(()=>{"use strict";var e={910:(e,t,n)=>{n.d(t,{Z:()=>z});var i=n(81),o=n.n(i),r=n(645),s=n.n(r),a=n(667),c=n.n(a),l=new URL(n(906),n.b),u=new URL(n(455),n.b),d=new URL(n(896),n.b),A=new URL(n(486),n.b),h=new URL(n(535),n.b),p=new URL(n(958),n.b),g=new URL(n(276),n.b),m=new URL(n(703),n.b),f=new URL(n(650),n.b),b=new URL(n(424),n.b),w=new URL(n(125),n.b),v=new URL(n(512),n.b),y=new URL(n(959),n.b),I=new URL(n(264),n.b),k=new URL(n(639),n.b),M=s()(o()),x=c()(l),L=c()(u),S=c()(d),B=c()(A),C=c()(h),E=c()(p),N=c()(g),R=c()(m),D=c()(f),j=c()(b),Q=c()(w),T=c()(v),P=c()(y),G=c()(I),U=c()(k);M.push([e.id,`@charset "UTF-8";\n.cg-wrap {\n  box-sizing: content-box;\n  position: relative;\n  display: block;\n  height: 0;\n  padding-bottom: 100%;\n  width: 100%;\n}\n\n/* before nrv\ncg-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: block;\n  top: 0;\n}\n*/\n\ncg-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: block;\n  top: 0;\n}\n\n\n\ncg-board {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  line-height: 0;\n  background-size: cover;\n}\n\ncg-board square {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 12.5%;\n  height: 12.5%;\n  pointer-events: none;\n}\n\ncg-board square.move-dest {\n  pointer-events: auto;\n}\n\ncg-board square.last-move {\n  will-change: transform;\n}\n\n.cg-wrap piece {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 12.5%;\n  height: 12.5%;\n  background-size: cover;\n  z-index: 2;\n  will-change: transform;\n  pointer-events: none;\n}\n\npiece.anim {\n  z-index: 8;\n}\n\npiece.fading {\n  z-index: 1;\n  opacity: 0.5;\n}\n\n.cg-wrap piece.ghost {\n  opacity: 0.3;\n}\n\n.cg-wrap piece svg {\n  overflow: hidden;\n  position: relative;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: 2;\n  opacity: 0.6;\n}\n\n.cg-wrap cg-auto-pieces,\n.cg-wrap .cg-shapes,\n.cg-wrap .cg-custom-svgs {\n  overflow: visible;\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n\n.cg-wrap cg-auto-pieces {\n  z-index: 2;\n}\n\n.cg-wrap cg-auto-pieces piece {\n  opacity: 0.3;\n}\n\n.cg-wrap .cg-shapes {\n  overflow: hidden;\n  opacity: 0.6;\n  z-index: 2;\n}\n\n.cg-wrap .cg-custom-svgs {\n  /* over piece.anim = 8, but under piece.dragging = 11 */\n  z-index: 9;\n}\n\n.cg-wrap .cg-custom-svgs svg {\n  overflow: visible;\n}\n\n.cg-wrap coords {\n  position: absolute;\n  display: flex;\n  pointer-events: none;\n  opacity: 0.8;\n  font-family: sans-serif;\n  font-size: 9px;\n  color: rgba(255, 255, 255, 0.8);\n}\n\n.cg-wrap coords.ranks {\n  top: 1px;\n  right: 0;\n  flex-flow: column-reverse;\n  height: 100%;\n  width: 12px;\n  text-align: center;\n}\n\n.cg-wrap coords.ranks.black {\n  flex-flow: column;\n}\n\n.cg-wrap coords.ranks.left {\n  left: -15px;\n  align-items: flex-end;\n}\n\n.cg-wrap coords.files {\n  bottom: 0;\n  left: 0.7ch;\n  flex-flow: row;\n  width: 100%;\n  height: 12px;\n  text-transform: uppercase;\n}\n\n.cg-wrap coords.files.black {\n  flex-flow: row-reverse;\n}\n\n.cg-wrap coords coord {\n  flex: 1 1 auto;\n}\n\ncg-board {\n  background-color: var(--board-color);\n  background-image: url(${x});\n}\n\n/** Interactive board square colors */\ncg-board square.move-dest {\n  background: radial-gradient(rgba(20, 85, 30, 0.5) 22%, #208530 0, rgba(0, 0, 0, 0.3) 0, rgba(0, 0, 0, 0) 0);\n}\n\ncg-board square.premove-dest {\n  background: radial-gradient(rgba(20, 30, 85, 0.5) 22%, #203085 0, rgba(0, 0, 0, 0.3) 0, rgba(0, 0, 0, 0) 0);\n}\n\ncg-board square.oc.move-dest {\n  background: radial-gradient(transparent 0%, transparent 80%, rgba(20, 85, 0, 0.3) 80%);\n}\n\ncg-board square.oc.premove-dest {\n  background: radial-gradient(transparent 0%, transparent 80%, rgba(20, 30, 85, 0.2) 80%);\n}\n\ncg-board square.move-dest:hover {\n  background: rgba(20, 85, 30, 0.3);\n}\n\ncg-board square.premove-dest:hover {\n  background: rgba(20, 30, 85, 0.2);\n}\n\ncg-board square.last-move {\n  background-color: rgba(155, 199, 0, 0.41);\n}\n\ncg-board square.selected {\n  background-color: rgba(20, 85, 30, 0.5);\n}\n\ncg-board square.check {\n  background: radial-gradient(ellipse at center, rgba(255, 0, 0, 1) 0%, rgba(231, 0, 0, 1) 25%, rgba(169, 0, 0, 0) 89%, rgba(158, 0, 0, 0) 100%);\n}\n\ncg-board square.current-premove {\n  background-color: rgba(20, 30, 85, 0.5);\n}\n\n/*/1** Alternating colors in rank/file labels *1/ */\n/*.cg-wrap.orientation-white coords.ranks coord:nth-child(2n), */\n/*.cg-wrap.orientation-white coords.files coord:nth-child(2n), */\n/*.cg-wrap.orientation-black coords.ranks coord:nth-child(2n + 1), */\n/*.cg-wrap.orientation-black coords.files coord:nth-child(2n + 1) { */\n/*  color: rgba(72, 72, 72, 0.8); */\n/*} */\n/*.cg-wrap.orientation-black coords.ranks coord:nth-child(2n), */\n/*.cg-wrap.orientation-black coords.files coord:nth-child(2n), */\n/*.cg-wrap.orientation-white coords.ranks coord:nth-child(2n + 1), */\n/*.cg-wrap.orientation-white coords.files coord:nth-child(2n + 1) { */\n/*  color: rgba(255, 255, 255, 0.8); */\n/*} */\n/** Embedded SVGs for all chess pieces */\n.cg-wrap piece.pawn.white {\n  background-image: url(${L});\n}\n\n.cg-wrap piece.bishop.white {\n  background-image: url(${S});\n}\n\n.cg-wrap piece.knight.white {\n  background-image: url(${B});\n}\n\n.cg-wrap piece.rook.white {\n  background-image: url(${C});\n}\n\n.cg-wrap piece.queen.white {\n  background-image: url(${E});\n}\n\n.cg-wrap piece.king.white {\n  background-image: url(${N});\n}\n\n.cg-wrap piece.pawn.black {\n  background-image: url(${R});\n}\n\n.cg-wrap piece.bishop.black {\n  background-image: url(${D});\n}\n\n.cg-wrap piece.knight.black {\n  background-image: url(${j});\n}\n\n.cg-wrap piece.rook.black {\n  background-image: url(${Q});\n}\n\n.cg-wrap piece.queen.black {\n  background-image: url(${T});\n}\n\n.cg-wrap piece.king.black {\n  background-image: url(${P});\n}\n\n/* move highlights */\n.lpv__fbt {\n  background: none;\n  border: none;\n  outline: none;\n  color: #aaa;\n  align-items: normal;\n  cursor: pointer;\n  text-transform: uppercase;\n  font-size: 1em;\n  line-height: 1.5;\n  text-decoration: none;\n}\n@media (hover: hover) {\n  .lpv__fbt:hover:not(.disabled):not([disabled]) {\n    background: #567e26;\n    color: #fff;\n  }\n}\n.lpv__fbt.active {\n  background: hsl(88, 62%, 37%) !important;\n  color: #fff;\n}\n.lpv__fbt.disabled, .lpv__fbt[disabled] {\n  opacity: 0.4;\n  cursor: default;\n}\n\n.lpv__board .cg-wrap {\n  position: relative;\n  display: block;\n  height: 0;\n  padding-bottom: 100%;\n  width: 100%;\n}\n\n.lpv {\n  display: grid;\n  overflow: hidden;\n  grid-row-gap: 0;\n  --controls-height: 4em;\n}\n.lpv--controls-false {\n  --controls-height: 0em;\n}\n.lpv--moves-false {\n  grid-template-areas: "board" "controls";\n  grid-template-columns: minmax(200px, calc(100vh - var(--controls-height)));\n  grid-template-rows: auto var(--controls-height);\n}\n.lpv--moves-right {\n  grid-template-areas: "board      side" "controls   side";\n  grid-template-columns: auto fit-content(40%);\n  grid-template-rows: auto var(--controls-height);\n}\n.lpv--moves-bottom {\n  grid-template-areas: "board" "controls" "side";\n  grid-template-rows: auto var(--controls-height);\n}\n.lpv--moves-bottom .lpv__controls {\n  border-bottom: 1px solid hsl(0, 0%, 25%);\n}\n.lpv--moves-auto {\n  grid-template-areas: "board      side" "controls   side";\n  grid-template-columns: minmax(200px, calc(100vh - var(--controls-height))) minmax(232px, 1fr);\n  grid-template-rows: auto var(--controls-height);\n}\n@media (max-width: 500px) {\n  .lpv--moves-auto {\n    grid-template-areas: "board" "controls" "side";\n    grid-template-columns: minmax(200px, calc(100vh - var(--controls-height) - 6em));\n    grid-template-rows: auto var(--controls-height);\n  }\n}\n.lpv--players.lpv--moves-false {\n  grid-template-areas: "player-top" "board" "player-bot" "controls";\n  grid-template-rows: 2em auto 2em var(--controls-height);\n}\n.lpv--players.lpv--moves-right {\n  grid-template-areas: "player-top side" "board      side" "player-bot side" "controls   side";\n  grid-template-rows: 2em auto 2em var(--controls-height);\n}\n.lpv--players.lpv--moves-bottom {\n  grid-template-areas: "player-top" "board" "player-bot" "controls" "side";\n  grid-template-rows: 2em auto 2em var(--controls-height);\n}\n.lpv--players.lpv--moves-bottom .lpv__controls {\n  border-bottom: 1px solid hsl(0, 0%, 25%);\n}\n.lpv--players.lpv--moves-auto {\n  grid-template-areas: "player-top side" "board      side" "player-bot side" "controls   side";\n  grid-template-columns: minmax(200px, calc(100vh - 2 * 2em - var(--controls-height))) minmax(232px, 1fr);\n  grid-template-rows: 2em auto 2em var(--controls-height);\n}\n@media (max-width: 500px) {\n  .lpv--players.lpv--moves-auto {\n    grid-template-areas: "player-top" "board" "player-bot" "controls" "side";\n    grid-template-columns: minmax(200px, calc(100vh - 2 * 2em - var(--controls-height) - 6em));\n    grid-template-rows: 2em auto 2em var(--controls-height);\n  }\n}\n.lpv__board {\n  grid-area: board;\n}\n.lpv__side {\n  grid-area: side;\n}\n.lpv__player--top {\n  grid-area: player-top;\n}\n.lpv__player--bottom {\n  grid-area: player-bot;\n}\n.lpv__controls {\n  grid-area: controls;\n}\n.lpv__menu, .lpv__pgn {\n  grid-area: 1/1/2/2;\n}\n.lpv--players .lpv__menu, .lpv--players .lpv__pgn {\n  grid-area: 1/1/4/2;\n}\n\n.lpv__side {\n  overflow: hidden;\n  display: flex;\n  flex-flow: column;\n}\n.lpv__moves {\n  position: relative;\n  flex: 1 1 0;\n  display: flex;\n  flex-flow: row wrap;\n  overflow-y: auto;\n  background: #143634;\n  align-items: center;\n  align-content: flex-start;\n  will-change: scroll-position;\n  user-select: none;\n  line-height: 1.7;\n  min-width: 20ch;\n}\n.lpv__moves index {\n  color: #FDD401;\n}\n.lpv__moves > index {\n  flex: 0 0 15%;\n  margin-right: 3%;\n  display: flex;\n  justify-content: flex-end;\n}\n.lpv__moves move {\n  border-radius: 3px;\n  padding-left: 3%;\n  font-weight: bold;\n  white-space: nowrap;\n}\n.lpv__moves move.empty {\n  color: #6d6c6b;\n}\n.lpv__moves move:not(.empty):hover {\n  background: #3f4e2a;\n  color: white;\n  cursor: pointer;\n}\n.lpv__moves move.ancestor {\n  color: #b1cc92;\n}\n.lpv__moves move.current {\n  background: #537926 !important;\n  color: white;\n}\n.lpv__moves move.inaccuracy {\n  color: hsl(202, 78%, 62%);\n}\n.lpv__moves move.inaccuracy:hover {\n  background: c-dimmer(hsl(202, 78%, 62%), 70%);\n}\n.lpv__moves move.mistake {\n  color: hsl(41, 100%, 45%);\n}\n.lpv__moves move.mistake:hover {\n  background: c-dimmer(hsl(41, 100%, 45%), 70%);\n}\n.lpv__moves move.blunder {\n  color: hsl(0, 69%, 60%);\n}\n.lpv__moves move.blunder:hover {\n  background: c-dimmer(hsl(0, 69%, 60%), 70%);\n}\n.lpv__moves move.good {\n  color: hsl(130, 67%, 62%);\n}\n.lpv__moves move.good:hover {\n  background: c-dimmer(hsl(130, 67%, 62%), 70%);\n}\n.lpv__moves move.brilliant {\n  color: hsl(129, 71%, 45%);\n}\n.lpv__moves move.brilliant:hover {\n  background: c-dimmer(hsl(129, 71%, 45%), 70%);\n}\n.lpv__moves move.interesting {\n  color: hsl(307, 80%, 70%);\n}\n.lpv__moves move.interesting:hover {\n  background: c-dimmer(hsl(307, 80%, 70%), 70%);\n}\n.lpv__moves > move {\n  flex: 0 0 41%;\n  font-size: 1.1em;\n}\n.lpv__moves comment {\n  user-select: text;\n  font-size: 0.9em;\n}\n.lpv__moves > comment {\n  flex: 1 1 100%;\n  color: #000;\n  background: #1e9c9c;\n  border: 1px solid hsl(0, 0%, 25%);\n  border-width: 1px 0;\n  padding: 0.4em 1em;\n  line-height: 1.4;\n  overflow-wrap: break-word;\n  word-break: break-word;\n}\n.lpv__moves > comment + variation,\n.lpv__moves > comment + comment {\n  border-top: none;\n}\n.lpv__moves > variation {\n  flex: 1 1 100%;\n  display: block;\n  overflow: hidden;\n  font-size: 0.8em;\n  background: hsl(37, 5%, 15%);\n  border: 1px solid hsl(0, 0%, 25%);\n  border-width: 1px 0;\n  padding: 0em 0.6em;\n}\n.lpv__moves > variation + variation {\n  border-top: none;\n}\n.lpv__moves > variation move {\n  display: inline-block;\n  padding: 0.1em 0.2em;\n  min-width: 2.5ch;\n  text-align: center;\n}\n.lpv__moves > variation move + index {\n  margin-left: 0.2em;\n}\n.lpv__moves > variation index {\n  margin: 0;\n  padding: 0.1em 0;\n}\n.lpv__moves > variation index + move {\n  margin-left: 0.1em;\n}\n.lpv__moves > variation comment {\n  align-self: center;\n  margin: 0 0.3em;\n}\n.lpv__moves > variation paren {\n  color: #6d6c6b;\n}\n.lpv__moves > variation paren.open {\n  margin: 0 0.1em 0 0.2em;\n}\n.lpv__moves > variation paren.close {\n  margin: 0 0.2em 0 0.1em;\n}\n\n.lpv__player {\n  font-size: 0.8em;\n  background:  #064742;\n  display: flex;\n  flex-flow: row nowrap;\n  padding: 0 1em;\n}\n.lpv__player--bottom {\n  border-bottom: 1px solid hsl(0, 0%, 25%);\n}\n.lpv--controls-false .lpv__player--bottom {\n  border-bottom: none;\n}\n.lpv__player__person {\n  flex: 1 1 auto;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  gap: 1ch;\n  color: #aaa;\n  text-decoration: none;\n}\n.lpv__player__title {\n  font-weight: bold;\n}\n.lpv__player__clock {\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  font-family: monospace;\n  font-size: 1.4em;\n  font-weight: bold;\n}\n.lpv__player__clock.active {\n  color: hsl(88, 62%, 37%);\n}\n\n.lpv__pane {\n  z-index: 2;\n  border-bottom: 2px solid hsl(88, 62%, 37%);\n  background: #383e2b;\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n}\n.lpv__pane .lpv__fbt {\n  text-align: left;\n  padding: 0.8em 2.5em;\n  transition: none;\n}\n.lpv__pane .lpv__fbt::before {\n  color: hsl(88, 62%, 37%);\n  font-size: 2em;\n}\n.lpv__pane .lpv__fbt:hover::before {\n  color: white;\n}\n.lpv__pgn__text {\n  flex: 1 1 auto;\n  background: #32332c;\n  color: #aaa;\n  padding: 0.8em 1.3em;\n}\n\n.lpv__controls {\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n  user-select: none;\n  background:  #064742;\n}\n.lpv__controls .lpv__fbt {\n  flex: 1 1 auto;\n  font-size: 1.4em;\n  padding: 0.4em 0.7em;\n  border-left: 1px solid #064742\n}\n.lpv__controls .lpv__fbt:first-child {\n  border: none;\n}\n.lpv__controls__menu.lpv__fbt {\n  flex: 0 1 auto;\n  width: 4em;\n  padding: 0.45em 1em 0.35em 1em;\n  font-size: 1.1em;\n}\n.lpv__controls__goto {\n  padding: 0.4rem 0.7rem;\n}\n\nbody ::-webkit-scrollbar,\nbody ::-webkit-scrollbar-corner {\n  width: 0.5rem;\n  background:  #064742;\n}\n\nbody ::-webkit-scrollbar-thumb {\n  background: #484745;\n}\n\nbody ::-webkit-scrollbar-thumb:hover,\nbody ::-webkit-scrollbar-thumb:active {\n  background: #6d6c6b;\n}\n\n/**\n* \n* Font license info\n* \n* \n* ## Elusive\n* \n*    Copyright (C) 2013 by Aristeides Stathopoulos\n* \n*    Author:    Aristeides Stathopoulos\n*    License:   SIL (http://scripts.sil.org/OFL)\n*    Homepage:  http://aristeides.com/\n* \n* \n* ## Font Awesome\n* \n*    Copyright (C) 2016 by Dave Gandy\n* \n*    Author:    Dave Gandy\n*    License:   SIL ()\n*    Homepage:  http://fortawesome.github.com/Font-Awesome/\n*/\n@font-face {\n  font-family: "lpv-fontello";\n  src: url(${G}) format("woff"), url(${U}) format("truetype");\n}\n.lpv__icon {\n  /* '' */\n  /* '' */\n  /* '' */\n  /* '' */\n  /* '' */\n}\n.lpv__icon:before {\n  font-family: "lpv-fontello";\n  font-size: 1.1em;\n  width: 1em;\n  text-align: center;\n  /* Font smoothing. That was taken from TWBS */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.lpv__icon-step-forward:before {\n  content: "\\e800";\n}\n.lpv__icon-step-backward:before {\n  content: "\\e801";\n}\n.lpv__icon-left-open:before {\n  content: "\\e802";\n}\n.lpv__icon-right-open:before {\n  content: "\\e803";\n}\n.lpv__icon-ellipsis-vert:before {\n  content: "\\f142";\n}\n\n.lpv {\n  border-radius: 5px;\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n  overflow: hidden;\n  background:  #064742;\n  color: #aaa;\n  box-sizing: border-box;\n}\n.lpv *,\n.lpv *::before,\n.lpv *::after {\n  box-sizing: inherit;\n}\n.lpv__board {\n  user-select: none;\n}\n.lpv__board cg-board {\n  box-shadow: none;\n}\n.lpv:focus {\n  outline: auto 2px hsl(88, 62%, 37%);\n}\n`,""]);const z=M},170:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(81),o=n.n(i),r=n(645),s=n.n(r)()(o());s.push([e.id,"/*********************************************************************************\n * a typescript chess repertoire builder. including line and example game viewing\n * made for shcc: Saskatchewan Horizon Chess Club\n * Copyright (C) 2023 Nicolas Vaagen\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along with\n * this program.  If not, see <http://www.gnu.org/licenses/>.\n *********************************************************************************/\n\n* {\n  box-sizing: border-box;\n  margin: 0;\n  font-family: 'Bebas Neue', sans-serif;\n}\n\n/* start navbar styling */\n.navbar {\n  background: #1e9c9c;\n  height: 80px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 6rem;\n  position: sticky;\n  top: 0;\n  z-index: 999;\n  min-width: 750px;\n}\n\n.navbar__container {\n  display: flex;\n  justify-content: space-between;\n  height: 80px;\n  z-index: 1;\n  width: 100%;\n  margin-right: auto;\n  margin-left: auto;\n  padding-right: 50px;\n  padding-left: 50px;\n}\n\n.navbar__menu {\n  display: flex;\n  align-items: center;\n  list-style: none;\n  text-align: center;\n  padding-right: 60px;\n}\n\n/*for the buttons*/\n.navbarBtn {\n  color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-decoration: none;\n  padding: 0 1rem;\n  height: 100%;\n  cursor: pointer;\n  outline: none;\n  border: none;\n  height: 60px;\n  font-size: xx-large;\n  background: #064742;\n  cursor: pointer;\n}\n\n.navbarBtn:hover{\n  box-shadow: inset 5em 5em #FDD401;\n  color: black;\n  transition: all 0.3s ease;\n  -webkit-transition: all 0.3s ease;\n  -moz-transition: all 0.3s ease;\n  -ms-transition: all 0.3s ease;\n  -o-transition: all 0.3s ease;\n}\n\n/* top bar logo */\n#logo {\n  margin: 5px;\n  height: 4rem;\n  border-radius: 15%;\n  -webkit-border-radius: 15%;\n  -moz-border-radius: 15%;\n  -ms-border-radius: 15%;\n  -o-border-radius: 15%;\n}\n\n/* chessground css */\n\n/* chessground pane and container */\n\n#chessgroundContainer{\n  width: fit-content;\n  margin: 0 auto;\n\n  align-self: center;\n}\n\n/* board color */\n.centerPane cg-board {\n  background-color: #1e9c9c;\n}\n\n.chessground {\n  width: 700px;\n  height: 700px;\n}\n\n\n/* common css */\n\nbutton:hover {\n  background: #FDD401;\n  color: #000;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  -webkit-transition: all 0.3s ease;\n  -moz-transition: all 0.3s ease;\n  -ms-transition: all 0.3s ease;\n  -o-transition: all 0.3s ease;\n}\n\nbody {\n  background-color: #adbebd;\n}\n\nul{\n  list-style-type: none;\n}\n\n/* RepViewer css */\n\n#repName {\n  display: block;\n  text-align: center;\n  background-color: #FDD401;\n}\n\n.row {\n  display: flex;\n}\n\n.column {\n  flex: 17.5%;\n}\n\n.centerPane {\n  flex: 70%;\n}\n\n.repLine {\n  display: block;\n  text-decoration: none;\n  padding: 10px 20px;\n  min-width: 200px;\n  height: 100%;\n  min-height: 50px;\n  width: 100%;\n  border: none;\n  outline-color: #000;\n  outline-width: 1px;\n  outline-style: dashed;\n  background: #FDD401;\n  color: black;\n}\n\n.repLine:hover {\n  background: #DD1810;\n  transition: all 0.3s ease;\n  cursor: pointer;\n}\n\n.repGame {\n  display: block;\n  justify-content: center;\n  text-decoration: none;\n  padding: 10px 20px;\n  height: 100%;\n  min-height: 50px;\n  width: 100%;\n  border: none;\n  outline-color: #000;\n  outline-width: 1px;\n  outline-style: dashed;\n  background: #FDD401;\n  color: black;\n}\n\n.repGame:hover {\n  background: #DD1810;\n  transition: all 0.3s ease;\n  cursor: pointer;\n}\n\n.column h1 {\n  margin:0 auto 10px 40px;\n}\n\n\n\n#downloadLink{\n  visibility: hidden;\n  margin: 10px 0px 0px 50px;\n  cursor: pointer;\n}\n\n/* New rep css */\n\n#newRepButtons {\n  display: inline-flex;\n  justify-content: center;\n  width: 100%;\n}\n\n#fileInput {\n  display: none;\n}\n\n.fileInput {\n  display: block;\n  text-align: center;\n  text-decoration: none;\n  padding: 10px 20px;\n  width: 100px;\n  border: none;\n  outline-style: none;\n  background: #064742;\n  color: #fff;\n  margin: 15px 15px;\n  height: 70px;\n  font-size: medium;\n  cursor: pointer;\n}\n\n.fileInput:hover {\n  background: #FDD401;\n  color: #000;\n  transition: all 0.3s ease;\n  -webkit-transition: all 0.3s ease;\n  -moz-transition: all 0.3s ease;\n  -ms-transition: all 0.3s ease;\n  -o-transition: all 0.3s ease;\n}\n\n\n.editRep{ /* when new rep is clicked, these items are shown */\n  visibility: hidden;\n}\n\n.editRep button {\n  display: block;\n  align-items: center;\n  text-decoration: none;\n  padding: 10px 20px;\n  width: 100px;\n  border: none;\n  outline-style: none;\n  background: #064742;\n  color: #fff;\n  margin: 15px 15px;\n  height: 70px;\n  font-size: medium;\n}\n\n.editRep .wideBtn {\n  width: 300px;\n}\n\n.editRep button:hover {\n  background: #FDD401;\n  color: #000;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  -webkit-transition: all 0.3s ease;\n  -moz-transition: all 0.3s ease;\n  -ms-transition: all 0.3s ease;\n  -o-transition: all 0.3s ease;\n}\n\n/* OpenRep css */\n\n/* the list of repertoires on open rep. pageS */\n#repertoiresTable {\n  border: 1px solid;\n}\n\n/* add game popup */\n#pop {\n  background: #adbebd;\n  position: relative;\n}\n#navbar-pop {\n  background:  #1e9c9c;\n}\n\n",""]);const a=s},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,o,r){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);i&&s[u[0]]||(void 0!==r&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=r),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var r={},s=[],a=0;a<e.length;a++){var c=e[a],l=i.base?c[0]+i.base:c[0],u=r[l]||0,d="".concat(l," ").concat(u);r[l]=u+1;var A=n(d),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==A)t[A].references++,t[A].updater(h);else{var p=o(h,i);i.byIndex=a,t.splice(a,0,{identifier:d,updater:p,references:1})}s.push(d)}return s}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var r=i(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<r.length;s++){var a=n(r[s]);t[a].references--}for(var c=i(e,o),l=0;l<r.length;l++){var u=n(r[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}r=c}}},569:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,o&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},639:e=>{e.exports="data:application/octet-stream;base64,AAEAAAAPAIAAAwBwR1NVQiCLJXoAAAD8AAAAVE9TLzI+I1HhAAABUAAAAGBjbWFw48n2ywAAAbAAAAGwY3Z0IAAAAAAAAAjwAAAADmZwZ21iLvl6AAAJAAAADgxnYXNwAAAAEAAACOgAAAAIZ2x5ZqicjgwAAANgAAABomhlYWQhJY5FAAAFBAAAADZoaGVhBz0DWAAABTwAAAAkaG10eA04AAAAAAVgAAAAGGxvY2EBTwC6AAAFeAAAAA5tYXhwAOAOaAAABYgAAAAgbmFtZc2dGRoAAAWoAAACzXBvc3SeRru9AAAIeAAAAG9wcmVwfrY7tgAAFwwAAACcAAEAAAAKADAAPgACREZMVAAObGF0bgAaAAQAAAAAAAAAAQAAAAQAAAAAAAAAAQAAAAFsaWdhAAgAAAABAAAAAQAEAAQAAAABAAgAAQAGAAAAAQAAAAQCNAGQAAUAAAJ6ArwAAACMAnoCvAAAAeAAMQECAAACAAUDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFBmRWQAwOgA8UIDUv9qAFoDrACWAAAAAQAAAAAAAAAAAAAAAAACAAAABQAAAAMAAAAsAAAABAAAAWQAAQAAAAAAXgADAAEAAAAsAAMACgAAAWQABAAyAAAABgAEAAEAAugD8UL//wAA6ADxQv//AAAAAAABAAYADAAAAAEAAgADAAQABQAAAQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAATAAAAAAAAAAFAADoAAAA6AAAAAABAADoAQAA6AEAAAACAADoAgAA6AIAAAADAADoAwAA6AMAAAAEAADxQgAA8UIAAAAFAAEAAP/nAbYC1QAHABpAFwcCAQAEAQABTAAAAQCFAAEBdhETAgYYKzURAREzESMRATl9fQYCsP7HAVj9EgFYAAABAAD/5wG2AtUABwAgQB0GBQQDBAEAAUwAAAEAhQIBAQF2AAAABwAHEQMGFysVETMRAREBEX0BOf7HGQLu/qgBOf1QATn+qAABAAD/agKIA1IABwAGswYCATIrETcBFwkBBwGUAWCU/qEBX5T+oAFelQFflP6g/qCUAWAAAQAA/2oCiANSAAYABrMGAwEyKxUJATcBFwEBYP6glAFglP4MAgFgAWCU/qGV/gwAAwAA//kA1wMLAA8AHwAvACxAKQAFAAQDBQRnAAMAAgEDAmcAAQAAAVcAAQEAXwAAAQBPNTU1NTUzBgYcKzcVFAYHIyImJzU0NhczMhYDFRQGJyMiJic1NDY3MzIWAxUUBisBIiYnNTQ2OwEyFtYeF2sXHgEgFmsWIAEeF2sXHgEgFmsWIAEeF2sXHgEgFmsWIJpsFh4BIBVsFiABHgEGaxYgAR4XaxceASABCGsWICAWaxYgIAAAAAEAAAABAADdNW3oXw889QAPA+gAAAAA3w0lUgAAAADfDSVSAAD/agPoA1IAAAAIAAIAAAAAAAAAAQAAA1L/agAAA+gAAP//A+gAAQAAAAAAAAAAAAAAAAAAAAYD6AAAAbUAAAG1AAACiAAAAogAAADWAAAAAAAAACAARABeAHYA0QAAAAEAAAAGADAAAwAAAAAAAgAMACoAjQAAAD0ODAAAAAAAAAASAN4AAQAAAAAAAAA1AAAAAQAAAAAAAQAIADUAAQAAAAAAAgAHAD0AAQAAAAAAAwAIAEQAAQAAAAAABAAIAEwAAQAAAAAABQALAFQAAQAAAAAABgAIAF8AAQAAAAAACgArAGcAAQAAAAAACwATAJIAAwABBAkAAABqAKUAAwABBAkAAQAQAQ8AAwABBAkAAgAOAR8AAwABBAkAAwAQAS0AAwABBAkABAAQAT0AAwABBAkABQAWAU0AAwABBAkABgAQAWMAAwABBAkACgBWAXMAAwABBAkACwAmAclDb3B5cmlnaHQgKEMpIDIwMjIgYnkgb3JpZ2luYWwgYXV0aG9ycyBAIGZvbnRlbGxvLmNvbWZvbnRlbGxvUmVndWxhcmZvbnRlbGxvZm9udGVsbG9WZXJzaW9uIDEuMGZvbnRlbGxvR2VuZXJhdGVkIGJ5IHN2ZzJ0dGYgZnJvbSBGb250ZWxsbyBwcm9qZWN0Lmh0dHA6Ly9mb250ZWxsby5jb20AQwBvAHAAeQByAGkAZwBoAHQAIAAoAEMAKQAgADIAMAAyADIAIABiAHkAIABvAHIAaQBnAGkAbgBhAGwAIABhAHUAdABoAG8AcgBzACAAQAAgAGYAbwBuAHQAZQBsAGwAbwAuAGMAbwBtAGYAbwBuAHQAZQBsAGwAbwBSAGUAZwB1AGwAYQByAGYAbwBuAHQAZQBsAGwAbwBmAG8AbgB0AGUAbABsAG8AVgBlAHIAcwBpAG8AbgAgADEALgAwAGYAbwBuAHQAZQBsAGwAbwBHAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAHMAdgBnADIAdAB0AGYAIABmAHIAbwBtACAARgBvAG4AdABlAGwAbABvACAAcAByAG8AagBlAGMAdAAuAGgAdAB0AHAAOgAvAC8AZgBvAG4AdABlAGwAbABvAC4AYwBvAG0AAAAAAgAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGAQIBAwEEAQUBBgEHAAxzdGVwLWZvcndhcmQNc3RlcC1iYWNrd2FyZAlsZWZ0LW9wZW4KcmlnaHQtb3Blbg1lbGxpcHNpcy12ZXJ0AAAAAAEAAf//AA8AAAAAAAAAAAAAAAAAAAAAsAAsILAAVVhFWSAgS7gADlFLsAZTWliwNBuwKFlgZiCKVViwAiVhuQgACABjYyNiGyEhsABZsABDI0SyAAEAQ2BCLbABLLAgYGYtsAIsIyEjIS2wAywgZLMDFBUAQkOwE0MgYGBCsQIUQ0KxJQNDsAJDVHggsAwjsAJDQ2FksARQeLICAgJDYEKwIWUcIbACQ0OyDhUBQhwgsAJDI0KyEwETQ2BCI7AAUFhlWbIWAQJDYEItsAQssAMrsBVDWCMhIyGwFkNDI7AAUFhlWRsgZCCwwFCwBCZasigBDUNFY0WwBkVYIbADJVlSW1ghIyEbilggsFBQWCGwQFkbILA4UFghsDhZWSCxAQ1DRWNFYWSwKFBYIbEBDUNFY0UgsDBQWCGwMFkbILDAUFggZiCKimEgsApQWGAbILAgUFghsApgGyCwNlBYIbA2YBtgWVlZG7ACJbAMQ2OwAFJYsABLsApQWCGwDEMbS7AeUFghsB5LYbgQAGOwDENjuAUAYllZZGFZsAErWVkjsABQWGVZWSBksBZDI0JZLbAFLCBFILAEJWFkILAHQ1BYsAcjQrAII0IbISFZsAFgLbAGLCMhIyGwAysgZLEHYkIgsAgjQrAGRVgbsQENQ0VjsQENQ7AAYEVjsAUqISCwCEMgiiCKsAErsTAFJbAEJlFYYFAbYVJZWCNZIVkgsEBTWLABKxshsEBZI7AAUFhlWS2wByywCUMrsgACAENgQi2wCCywCSNCIyCwACNCYbACYmawAWOwAWCwByotsAksICBFILAOQ2O4BABiILAAUFiwQGBZZrABY2BEsAFgLbAKLLIJDgBDRUIqIbIAAQBDYEItsAsssABDI0SyAAEAQ2BCLbAMLCAgRSCwASsjsABDsAQlYCBFiiNhIGQgsCBQWCGwABuwMFBYsCAbsEBZWSOwAFBYZVmwAyUjYUREsAFgLbANLCAgRSCwASsjsABDsAQlYCBFiiNhIGSwJFBYsAAbsEBZI7AAUFhlWbADJSNhRESwAWAtsA4sILAAI0KzDQwAA0VQWCEbIyFZKiEtsA8ssQICRbBkYUQtsBAssAFgICCwD0NKsABQWCCwDyNCWbAQQ0qwAFJYILAQI0JZLbARLCCwEGJmsAFjILgEAGOKI2GwEUNgIIpgILARI0IjLbASLEtUWLEEZERZJLANZSN4LbATLEtRWEtTWLEEZERZGyFZJLATZSN4LbAULLEAEkNVWLESEkOwAWFCsBErWbAAQ7ACJUKxDwIlQrEQAiVCsAEWIyCwAyVQWLEBAENgsAQlQoqKIIojYbAQKiEjsAFhIIojYbAQKiEbsQEAQ2CwAiVCsAIlYbAQKiFZsA9DR7AQQ0dgsAJiILAAUFiwQGBZZrABYyCwDkNjuAQAYiCwAFBYsEBgWWawAWNgsQAAEyNEsAFDsAA+sgEBAUNgQi2wFSwAsQACRVRYsBIjQiBFsA4jQrANI7AAYEIgYLcYGAEAEQATAEJCQopgILAUI0KwAWGxFAgrsIsrGyJZLbAWLLEAFSstsBcssQEVKy2wGCyxAhUrLbAZLLEDFSstsBossQQVKy2wGyyxBRUrLbAcLLEGFSstsB0ssQcVKy2wHiyxCBUrLbAfLLEJFSstsCssIyCwEGJmsAFjsAZgS1RYIyAusAFdGyEhWS2wLCwjILAQYmawAWOwFmBLVFgjIC6wAXEbISFZLbAtLCMgsBBiZrABY7AmYEtUWCMgLrABchshIVktsCAsALAPK7EAAkVUWLASI0IgRbAOI0KwDSOwAGBCIGCwAWG1GBgBABEAQkKKYLEUCCuwiysbIlktsCEssQAgKy2wIiyxASArLbAjLLECICstsCQssQMgKy2wJSyxBCArLbAmLLEFICstsCcssQYgKy2wKCyxByArLbApLLEIICstsCossQkgKy2wLiwgPLABYC2wLywgYLAYYCBDI7ABYEOwAiVhsAFgsC4qIS2wMCywLyuwLyotsDEsICBHICCwDkNjuAQAYiCwAFBYsEBgWWawAWNgI2E4IyCKVVggRyAgsA5DY7gEAGIgsABQWLBAYFlmsAFjYCNhOBshWS2wMiwAsQACRVRYsQ4GRUKwARawMSqxBQEVRVgwWRsiWS2wMywAsA8rsQACRVRYsQ4GRUKwARawMSqxBQEVRVgwWRsiWS2wNCwgNbABYC2wNSwAsQ4GRUKwAUVjuAQAYiCwAFBYsEBgWWawAWOwASuwDkNjuAQAYiCwAFBYsEBgWWawAWOwASuwABa0AAAAAABEPiM4sTQBFSohLbA2LCA8IEcgsA5DY7gEAGIgsABQWLBAYFlmsAFjYLAAQ2E4LbA3LC4XPC2wOCwgPCBHILAOQ2O4BABiILAAUFiwQGBZZrABY2CwAENhsAFDYzgtsDkssQIAFiUgLiBHsAAjQrACJUmKikcjRyNhIFhiGyFZsAEjQrI4AQEVFCotsDossAAWsBcjQrAEJbAEJUcjRyNhsQwAQrALQytlii4jICA8ijgtsDsssAAWsBcjQrAEJbAEJSAuRyNHI2EgsAYjQrEMAEKwC0MrILBgUFggsEBRWLMEIAUgG7MEJgUaWUJCIyCwCkMgiiNHI0cjYSNGYLAGQ7ACYiCwAFBYsEBgWWawAWNgILABKyCKimEgsARDYGQjsAVDYWRQWLAEQ2EbsAVDYFmwAyWwAmIgsABQWLBAYFlmsAFjYSMgILAEJiNGYTgbI7AKQ0awAiWwCkNHI0cjYWAgsAZDsAJiILAAUFiwQGBZZrABY2AjILABKyOwBkNgsAErsAUlYbAFJbACYiCwAFBYsEBgWWawAWOwBCZhILAEJWBkI7ADJWBkUFghGyMhWSMgILAEJiNGYThZLbA8LLAAFrAXI0IgICCwBSYgLkcjRyNhIzw4LbA9LLAAFrAXI0IgsAojQiAgIEYjR7ABKyNhOC2wPiywABawFyNCsAMlsAIlRyNHI2GwAFRYLiA8IyEbsAIlsAIlRyNHI2EgsAUlsAQlRyNHI2GwBiWwBSVJsAIlYbkIAAgAY2MjIFhiGyFZY7gEAGIgsABQWLBAYFlmsAFjYCMuIyAgPIo4IyFZLbA/LLAAFrAXI0IgsApDIC5HI0cjYSBgsCBgZrACYiCwAFBYsEBgWWawAWMjICA8ijgtsEAsIyAuRrACJUawF0NYUBtSWVggPFkusTABFCstsEEsIyAuRrACJUawF0NYUhtQWVggPFkusTABFCstsEIsIyAuRrACJUawF0NYUBtSWVggPFkjIC5GsAIlRrAXQ1hSG1BZWCA8WS6xMAEUKy2wQyywOisjIC5GsAIlRrAXQ1hQG1JZWCA8WS6xMAEUKy2wRCywOyuKICA8sAYjQoo4IyAuRrACJUawF0NYUBtSWVggPFkusTABFCuwBkMusDArLbBFLLAAFrAEJbAEJiAgIEYjR2GwDCNCLkcjRyNhsAtDKyMgPCAuIzixMAEUKy2wRiyxCgQlQrAAFrAEJbAEJSAuRyNHI2EgsAYjQrEMAEKwC0MrILBgUFggsEBRWLMEIAUgG7MEJgUaWUJCIyBHsAZDsAJiILAAUFiwQGBZZrABY2AgsAErIIqKYSCwBENgZCOwBUNhZFBYsARDYRuwBUNgWbADJbACYiCwAFBYsEBgWWawAWNhsAIlRmE4IyA8IzgbISAgRiNHsAErI2E4IVmxMAEUKy2wRyyxADorLrEwARQrLbBILLEAOyshIyAgPLAGI0IjOLEwARQrsAZDLrAwKy2wSSywABUgR7AAI0KyAAEBFRQTLrA2Ki2wSiywABUgR7AAI0KyAAEBFRQTLrA2Ki2wSyyxAAEUE7A3Ki2wTCywOSotsE0ssAAWRSMgLiBGiiNhOLEwARQrLbBOLLAKI0KwTSstsE8ssgAARistsFAssgABRistsFEssgEARistsFIssgEBRistsFMssgAARystsFQssgABRystsFUssgEARystsFYssgEBRystsFcsswAAAEMrLbBYLLMAAQBDKy2wWSyzAQAAQystsFosswEBAEMrLbBbLLMAAAFDKy2wXCyzAAEBQystsF0sswEAAUMrLbBeLLMBAQFDKy2wXyyyAABFKy2wYCyyAAFFKy2wYSyyAQBFKy2wYiyyAQFFKy2wYyyyAABIKy2wZCyyAAFIKy2wZSyyAQBIKy2wZiyyAQFIKy2wZyyzAAAARCstsGgsswABAEQrLbBpLLMBAABEKy2waiyzAQEARCstsGssswAAAUQrLbBsLLMAAQFEKy2wbSyzAQABRCstsG4sswEBAUQrLbBvLLEAPCsusTABFCstsHAssQA8K7BAKy2wcSyxADwrsEErLbByLLAAFrEAPCuwQistsHMssQE8K7BAKy2wdCyxATwrsEErLbB1LLAAFrEBPCuwQistsHYssQA9Ky6xMAEUKy2wdyyxAD0rsEArLbB4LLEAPSuwQSstsHkssQA9K7BCKy2weiyxAT0rsEArLbB7LLEBPSuwQSstsHwssQE9K7BCKy2wfSyxAD4rLrEwARQrLbB+LLEAPiuwQCstsH8ssQA+K7BBKy2wgCyxAD4rsEIrLbCBLLEBPiuwQCstsIIssQE+K7BBKy2wgyyxAT4rsEIrLbCELLEAPysusTABFCstsIUssQA/K7BAKy2whiyxAD8rsEErLbCHLLEAPyuwQistsIgssQE/K7BAKy2wiSyxAT8rsEErLbCKLLEBPyuwQistsIsssgsAA0VQWLAGG7IEAgNFWCMhGyFZWUIrsAhlsAMkUHixBQEVRVgwWS0AS7gAyFJYsQEBjlmwAbkIAAgAY3CxAAdCsQAAKrEAB0KxAAoqsQAHQrEACiqxAAdCuQAAAAsqsQAHQrkAAAALKrkAAwAARLEkAYhRWLBAiFi5AAMAZESxKAGIUVi4CACIWLkAAwAARFkbsScBiFFYugiAAAEEQIhjVFi5AAMAAERZWVlZWbEADiq4Af+FsASNsQIARLMFZAYAREQ="},264:e=>{e.exports="data:application/octet-stream;base64,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"},906:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4PSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIgogICAgIHZpZXdCb3g9IjAgMCA4IDgiIHNoYXBlLXJlbmRlcmluZz0iY3Jpc3BFZGdlcyI+CjxnIGlkPSJhIj4KICA8ZyBpZD0iYiI+CiAgICA8ZyBpZD0iYyI+CiAgICAgIDxnIGlkPSJkIj4KICAgICAgICA8cmVjdCB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBpZD0iZSIgb3BhY2l0eT0iMCIvPgogICAgICAgIDx1c2UgeD0iMSIgeT0iMSIgaHJlZj0iI2UiIHg6aHJlZj0iI2UiLz4KICAgICAgICA8cmVjdCB5PSIxIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBpZD0iZiIgb3BhY2l0eT0iMC4yIi8+CiAgICAgICAgPHVzZSB4PSIxIiB5PSItMSIgaHJlZj0iI2YiIHg6aHJlZj0iI2YiLz4KICAgICAgPC9nPgogICAgICA8dXNlIHg9IjIiIGhyZWY9IiNkIiB4OmhyZWY9IiNkIi8+CiAgICA8L2c+CiAgICA8dXNlIHg9IjQiIGhyZWY9IiNjIiB4OmhyZWY9IiNjIi8+CiAgPC9nPgogIDx1c2UgeT0iMiIgaHJlZj0iI2IiIHg6aHJlZj0iI2IiLz4KPC9nPgo8dXNlIHk9IjQiIGhyZWY9IiNhIiB4OmhyZWY9IiNhIi8+Cjwvc3ZnPg=="},512:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NSIgaGVpZ2h0PSI0NSI+PGcgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxnIHN0cm9rZT0ibm9uZSI+PGNpcmNsZSBjeD0iNiIgY3k9IjEyIiByPSIyLjc1Ii8+PGNpcmNsZSBjeD0iMTQiIGN5PSI5IiByPSIyLjc1Ii8+PGNpcmNsZSBjeD0iMjIuNSIgY3k9IjgiIHI9IjIuNzUiLz48Y2lyY2xlIGN4PSIzMSIgY3k9IjkiIHI9IjIuNzUiLz48Y2lyY2xlIGN4PSIzOSIgY3k9IjEyIiByPSIyLjc1Ii8+PC9nPjxwYXRoIGQ9Ik05IDI2YzguNS0xLjUgMjEtMS41IDI3IDBsMi41LTEyLjVMMzEgMjVsLS4zLTE0LjEtNS4yIDEzLjYtMy0xNC41LTMgMTQuNS01LjItMTMuNkwxNCAyNSA2LjUgMTMuNSA5IDI2eiIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48cGF0aCBkPSJNOSAyNmMwIDIgMS41IDIgMi41IDQgMSAxLjUgMSAxIC41IDMuNS0xLjUgMS0xLjUgMi41LTEuNSAyLjUtMS41IDEuNS41IDIuNS41IDIuNSA2LjUgMSAxNi41IDEgMjMgMCAwIDAgMS41LTEgMC0yLjUgMCAwIC41LTEuNS0xLTIuNS0uNS0yLjUtLjUtMiAuNS0zLjUgMS0yIDIuNS0yIDIuNS00LTguNS0xLjUtMTguNS0xLjUtMjcgMHoiIHN0cm9rZS1saW5lY2FwPSJidXR0Ii8+PHBhdGggZD0iTTExIDM4LjVhMzUgMzUgMSAwIDAgMjMgMCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48cGF0aCBkPSJNMTEgMjlhMzUgMzUgMSAwIDEgMjMgMG0tMjEuNSAyLjVoMjBtLTIxIDNhMzUgMzUgMSAwIDAgMjIgMG0tMjMgM2EzNSAzNSAxIDAgMCAyNCAwIiBmaWxsPSJub25lIiBzdHJva2U9IiNlY2VjZWMiLz48L2c+PC9zdmc+"},125:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NSIgaGVpZ2h0PSI0NSI+PGcgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik05IDM5aDI3di0zSDl2M3ptMy41LTdsMS41LTIuNWgxN2wxLjUgMi41aC0yMHptLS41IDR2LTRoMjF2NEgxMnoiIHN0cm9rZS1saW5lY2FwPSJidXR0Ii8+PHBhdGggZD0iTTE0IDI5LjV2LTEzaDE3djEzSDE0eiIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiLz48cGF0aCBkPSJNMTQgMTYuNUwxMSAxNGgyM2wtMyAyLjVIMTR6TTExIDE0VjloNHYyaDVWOWg1djJoNVY5aDR2NUgxMXoiIHN0cm9rZS1saW5lY2FwPSJidXR0Ii8+PHBhdGggZD0iTTEyIDM1LjVoMjFtLTIwLTRoMTltLTE4LTJoMTdtLTE3LTEzaDE3TTExIDE0aDIzIiBmaWxsPSJub25lIiBzdHJva2U9IiNlY2VjZWMiIHN0cm9rZS13aWR0aD0iMSIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIvPjwvZz48L3N2Zz4="},958:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NSIgaGVpZ2h0PSI0NSI+PGcgZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik04IDEyYTIgMiAwIDEgMS00IDAgMiAyIDAgMSAxIDQgMHptMTYuNS00LjVhMiAyIDAgMSAxLTQgMCAyIDIgMCAxIDEgNCAwek00MSAxMmEyIDIgMCAxIDEtNCAwIDIgMiAwIDEgMSA0IDB6TTE2IDguNWEyIDIgMCAxIDEtNCAwIDIgMiAwIDEgMSA0IDB6TTMzIDlhMiAyIDAgMSAxLTQgMCAyIDIgMCAxIDEgNCAweiIvPjxwYXRoIGQ9Ik05IDI2YzguNS0xLjUgMjEtMS41IDI3IDBsMi0xMi03IDExVjExbC01LjUgMTMuNS0zLTE1LTMgMTUtNS41LTE0VjI1TDcgMTRsMiAxMnoiIHN0cm9rZS1saW5lY2FwPSJidXR0Ii8+PHBhdGggZD0iTTkgMjZjMCAyIDEuNSAyIDIuNSA0IDEgMS41IDEgMSAuNSAzLjUtMS41IDEtMS41IDIuNS0xLjUgMi41LTEuNSAxLjUuNSAyLjUuNSAyLjUgNi41IDEgMTYuNSAxIDIzIDAgMCAwIDEuNS0xIDAtMi41IDAgMCAuNS0xLjUtMS0yLjUtLjUtMi41LS41LTIgLjUtMy41IDEtMiAyLjUtMiAyLjUtNC04LjUtMS41LTE4LjUtMS41LTI3IDB6IiBzdHJva2UtbGluZWNhcD0iYnV0dCIvPjxwYXRoIGQ9Ik0xMS41IDMwYzMuNS0xIDE4LjUtMSAyMiAwTTEyIDMzLjVjNi0xIDE1LTEgMjEgMCIgZmlsbD0ibm9uZSIvPjwvZz48L3N2Zz4="},535:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NSIgaGVpZ2h0PSI0NSI+PGcgZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik05IDM5aDI3di0zSDl2M3ptMy0zdi00aDIxdjRIMTJ6bS0xLTIyVjloNHYyaDVWOWg1djJoNVY5aDR2NSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48cGF0aCBkPSJNMzQgMTRsLTMgM0gxNGwtMy0zIi8+PHBhdGggZD0iTTMxIDE3djEyLjVIMTRWMTciIHN0cm9rZS1saW5lY2FwPSJidXR0IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIi8+PHBhdGggZD0iTTMxIDI5LjVsMS41IDIuNWgtMjBsMS41LTIuNSIvPjxwYXRoIGQ9Ik0xMSAxNGgyMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIvPjwvZz48L3N2Zz4="},650:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NSIgaGVpZ2h0PSI0NSI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxnIGZpbGw9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJidXR0Ij48cGF0aCBkPSJNOSAzNmMzLjM5LS45NyAxMC4xMS40MyAxMy41LTIgMy4zOSAyLjQzIDEwLjExIDEuMDMgMTMuNSAyIDAgMCAxLjY1LjU0IDMgMi0uNjguOTctMS42NS45OS0zIC41LTMuMzktLjk3LTEwLjExLjQ2LTEzLjUtMS0zLjM5IDEuNDYtMTAuMTEuMDMtMTMuNSAxLTEuMzU0LjQ5LTIuMzIzLjQ3LTMtLjUgMS4zNTQtMS45NCAzLTIgMy0yeiIvPjxwYXRoIGQ9Ik0xNSAzMmMyLjUgMi41IDEyLjUgMi41IDE1IDAgLjUtMS41IDAtMiAwLTIgMC0yLjUtMi41LTQtMi41LTQgNS41LTEuNSA2LTExLjUtNS0xNS41LTExIDQtMTAuNSAxNC01IDE1LjUgMCAwLTIuNSAxLjUtMi41IDQgMCAwLS41LjUgMCAyeiIvPjxwYXRoIGQ9Ik0yNSA4YTIuNSAyLjUgMCAxIDEtNSAwIDIuNSAyLjUgMCAxIDEgNSAweiIvPjwvZz48cGF0aCBkPSJNMTcuNSAyNmgxME0xNSAzMGgxNW0tNy41LTE0LjV2NU0yMCAxOGg1IiBzdHJva2U9IiNlY2VjZWMiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiLz48L2c+PC9zdmc+"},896:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NSIgaGVpZ2h0PSI0NSI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxnIGZpbGw9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJidXR0Ij48cGF0aCBkPSJNOSAzNmMzLjM5LS45NyAxMC4xMS40MyAxMy41LTIgMy4zOSAyLjQzIDEwLjExIDEuMDMgMTMuNSAyIDAgMCAxLjY1LjU0IDMgMi0uNjguOTctMS42NS45OS0zIC41LTMuMzktLjk3LTEwLjExLjQ2LTEzLjUtMS0zLjM5IDEuNDYtMTAuMTEuMDMtMTMuNSAxLTEuMzU0LjQ5LTIuMzIzLjQ3LTMtLjUgMS4zNTQtMS45NCAzLTIgMy0yeiIvPjxwYXRoIGQ9Ik0xNSAzMmMyLjUgMi41IDEyLjUgMi41IDE1IDAgLjUtMS41IDAtMiAwLTIgMC0yLjUtMi41LTQtMi41LTQgNS41LTEuNSA2LTExLjUtNS0xNS41LTExIDQtMTAuNSAxNC01IDE1LjUgMCAwLTIuNSAxLjUtMi41IDQgMCAwLS41LjUgMCAyeiIvPjxwYXRoIGQ9Ik0yNSA4YTIuNSAyLjUgMCAxIDEtNSAwIDIuNSAyLjUgMCAxIDEgNSAweiIvPjwvZz48cGF0aCBkPSJNMTcuNSAyNmgxME0xNSAzMGgxNW0tNy41LTE0LjV2NU0yMCAxOGg1IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIi8+PC9nPjwvc3ZnPg=="},959:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NSIgaGVpZ2h0PSI0NSI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0yMi41IDExLjYzVjYiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiLz48cGF0aCBkPSJNMjIuNSAyNXM0LjUtNy41IDMtMTAuNWMwIDAtMS0yLjUtMy0yLjVzLTMgMi41LTMgMi41Yy0xLjUgMyAzIDEwLjUgMyAxMC41IiBmaWxsPSIjMDAwIiBzdHJva2UtbGluZWNhcD0iYnV0dCIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIvPjxwYXRoIGQ9Ik0xMS41IDM3YzUuNSAzLjUgMTUuNSAzLjUgMjEgMHYtN3M5LTQuNSA2LTEwLjVjLTQtNi41LTEzLjUtMy41LTE2IDRWMjd2LTMuNWMtMy41LTcuNS0xMy0xMC41LTE2LTQtMyA2IDUgMTAgNSAxMFYzN3oiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJNMjAgOGg1IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIi8+PHBhdGggZD0iTTMyIDI5LjVzOC41LTQgNi4wMy05LjY1QzM0LjE1IDE0IDI1IDE4IDIyLjUgMjQuNWwuMDEgMi4xLS4wMS0yLjFDMjAgMTggOS45MDYgMTQgNi45OTcgMTkuODVjLTIuNDk3IDUuNjUgNC44NTMgOSA0Ljg1MyA5IiBzdHJva2U9IiNlY2VjZWMiLz48cGF0aCBkPSJNMTEuNSAzMGM1LjUtMyAxNS41LTMgMjEgMG0tMjEgMy41YzUuNS0zIDE1LjUtMyAyMSAwbS0yMSAzLjVjNS41LTMgMTUuNS0zIDIxIDAiIHN0cm9rZT0iI2VjZWNlYyIvPjwvZz48L3N2Zz4="},276:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NSIgaGVpZ2h0PSI0NSI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0yMi41IDExLjYzVjZNMjAgOGg1IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIi8+PHBhdGggZD0iTTIyLjUgMjVzNC41LTcuNSAzLTEwLjVjMCAwLTEtMi41LTMtMi41cy0zIDIuNS0zIDIuNWMtMS41IDMgMyAxMC41IDMgMTAuNSIgZmlsbD0iI2ZmZiIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiLz48cGF0aCBkPSJNMTEuNSAzN2M1LjUgMy41IDE1LjUgMy41IDIxIDB2LTdzOS00LjUgNi0xMC41Yy00LTYuNS0xMy41LTMuNS0xNiA0VjI3di0zLjVjLTMuNS03LjUtMTMtMTAuNS0xNi00LTMgNiA1IDEwIDUgMTBWMzd6IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTExLjUgMzBjNS41LTMgMTUuNS0zIDIxIDBtLTIxIDMuNWM1LjUtMyAxNS41LTMgMjEgMG0tMjEgMy41YzUuNS0zIDE1LjUtMyAyMSAwIi8+PC9nPjwvc3ZnPg=="},486:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NSIgaGVpZ2h0PSI0NSI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0yMiAxMGMxMC41IDEgMTYuNSA4IDE2IDI5SDE1YzAtOSAxMC02LjUgOC0yMSIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0yNCAxOGMuMzggMi45MS01LjU1IDcuMzctOCA5LTMgMi0yLjgyIDQuMzQtNSA0LTEuMDQyLS45NCAxLjQxLTMuMDQgMC0zLTEgMCAuMTkgMS4yMy0xIDItMSAwLTQuMDAzIDEtNC00IDAtMiA2LTEyIDYtMTJzMS44OS0xLjkgMi0zLjVjLS43My0uOTk0LS41LTItLjUtMyAxLTEgMyAyLjUgMyAyLjVoMnMuNzgtMS45OTIgMi41LTNjMSAwIDEgMyAxIDMiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNOS41IDI1LjVhLjUuNSAwIDEgMS0xIDAgLjUuNSAwIDEgMSAxIDB6bTUuNDMzLTkuNzVhLjUgMS41IDMwIDEgMS0uODY2LS41LjUgMS41IDMwIDEgMSAuODY2LjV6IiBmaWxsPSIjMDAwIi8+PC9nPjwvc3ZnPg=="},424:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NSIgaGVpZ2h0PSI0NSI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0yMiAxMGMxMC41IDEgMTYuNSA4IDE2IDI5SDE1YzAtOSAxMC02LjUgOC0yMSIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yNCAxOGMuMzggMi45MS01LjU1IDcuMzctOCA5LTMgMi0yLjgyIDQuMzQtNSA0LTEuMDQyLS45NCAxLjQxLTMuMDQgMC0zLTEgMCAuMTkgMS4yMy0xIDItMSAwLTQuMDAzIDEtNC00IDAtMiA2LTEyIDYtMTJzMS44OS0xLjkgMi0zLjVjLS43My0uOTk0LS41LTItLjUtMyAxLTEgMyAyLjUgMyAyLjVoMnMuNzgtMS45OTIgMi41LTNjMSAwIDEgMyAxIDMiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJNOS41IDI1LjVhLjUuNSAwIDEgMS0xIDAgLjUuNSAwIDEgMSAxIDB6bTUuNDMzLTkuNzVhLjUgMS41IDMwIDEgMS0uODY2LS41LjUgMS41IDMwIDEgMSAuODY2LjV6IiBmaWxsPSIjZWNlY2VjIiBzdHJva2U9IiNlY2VjZWMiLz48cGF0aCBkPSJNMjQuNTUgMTAuNGwtLjQ1IDEuNDUuNS4xNWMzLjE1IDEgNS42NSAyLjQ5IDcuOSA2Ljc1UzM1Ljc1IDI5LjA2IDM1LjI1IDM5bC0uMDUuNWgyLjI1bC4wNS0uNWMuNS0xMC4wNi0uODgtMTYuODUtMy4yNS0yMS4zNC0yLjM3LTQuNDktNS43OS02LjY0LTkuMTktNy4xNmwtLjUxLS4xeiIgZmlsbD0iI2VjZWNlYyIgc3Ryb2tlPSJub25lIi8+PC9nPjwvc3ZnPg=="},455:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NSIgaGVpZ2h0PSI0NSI+PHBhdGggZD0iTTIyLjUgOWMtMi4yMSAwLTQgMS43OS00IDQgMCAuODkuMjkgMS43MS43OCAyLjM4QzE3LjMzIDE2LjUgMTYgMTguNTkgMTYgMjFjMCAyLjAzLjk0IDMuODQgMi40MSA1LjAzLTMgMS4wNi03LjQxIDUuNTUtNy40MSAxMy40N2gyM2MwLTcuOTItNC40MS0xMi40MS03LjQxLTEzLjQ3IDEuNDctMS4xOSAyLjQxLTMgMi40MS01LjAzIDAtMi40MS0xLjMzLTQuNS0zLjI4LTUuNjIuNDktLjY3Ljc4LTEuNDkuNzgtMi4zOCAwLTIuMjEtMS43OS00LTQtNHoiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjwvc3ZnPg=="},703:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NSIgaGVpZ2h0PSI0NSI+PHBhdGggZD0iTTIyLjUgOWMtMi4yMSAwLTQgMS43OS00IDQgMCAuODkuMjkgMS43MS43OCAyLjM4QzE3LjMzIDE2LjUgMTYgMTguNTkgMTYgMjFjMCAyLjAzLjk0IDMuODQgMi40MSA1LjAzLTMgMS4wNi03LjQxIDUuNTUtNy40MSAxMy40N2gyM2MwLTcuOTItNC40MS0xMi40MS03LjQxLTEzLjQ3IDEuNDctMS4xOSAyLjQxLTMgMi40MS01LjAzIDAtMi40MS0xLjMzLTQuNS0zLjI4LTUuNjIuNDktLjY3Ljc4LTEuNDkuNzgtMi4zOCAwLTIuMjEtMS43OS00LTQtNHoiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjwvc3ZnPg=="}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={id:i,exports:{}};return e[i](r,r.exports,n),r.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.b=document.baseURI||self.location.href,n.nc=void 0;var i={};(()=>{n.d(i,{I:()=>Ro});var e=function(){function e(e,t){this.lineList=new Array,console.log("rep with name:"+e+", Line List: "+t+"made"),null!=e?this.name=e:this.setName(),null!=t&&(this.lineList=t)}return e.prototype.setName=function(){var e;do{e=prompt("What would you like to call the new repertoire?")}while(null==e);$("#repName").html(e)},e.prototype.addLine=function(e){this.lineList.push(e),this.updateLineDisplay()},e.prototype.updateLineDisplay=function(){console.log("updateLineDisplay() entered"),console.log("----------------------------------"),console.log("Line List: "),$("#lineList").replaceWith("<div id='lineList'> </div>"),this.lineList.forEach((function(e){console.log("line: "+e.name),e.lineBtn.appendTo($("#lineList")),e.lineBtn.on("click",{line:e},(function(e){e.data.line.updateGameDisplay()}))}))},e.prototype.resetLines=function(){confirm("reset lines?")&&(this.lineList=new Array,$("#lineList").replaceWith("<div id='lineList'> </div>"))},e.prototype.saveRep=function(){console.log("save Rep Pressed")},e.prototype.getOpenLine=function(){if(null!=this.openLine)return this.openLine;throw Error("no open line.")},e.prototype.setOpenLine=function(e){this.openLine=e,e.updateGameDisplay()},e}();const t=["a","b","c","d","e","f","g","h"],o=["1","2","3","4","5","6","7","8"],r=["white","black"],s=["pawn","knight","bishop","rook","queen","king"],a=["a","h"],c=e=>"role"in e,l=e=>void 0!==e,u=e=>"white"===e?"black":"white",d=e=>e>>3,A=e=>7&e,h=(e,t)=>0<=e&&e<8&&0<=t&&t<8?e+8*t:void 0,p=e=>{switch(e){case"pawn":return"p";case"knight":return"n";case"bishop":return"b";case"rook":return"r";case"queen":return"q";case"king":return"k"}};function g(e){switch(e.toLowerCase()){case"p":return"pawn";case"n":return"knight";case"b":return"bishop";case"r":return"rook";case"q":return"queen";case"k":return"king";default:return}}function m(e){if(2===e.length)return h(e.charCodeAt(0)-"a".charCodeAt(0),e.charCodeAt(1)-"1".charCodeAt(0))}const f=e=>t[A(e)]+o[d(e)],b=e=>c(e)?`${p(e.role).toUpperCase()}@${f(e.to)}`:f(e.from)+f(e.to)+(e.promotion?p(e.promotion):""),w=(e,t)=>"white"===e?"a"===t?2:6:"a"===t?58:62,v=(e,t)=>"white"===e?"a"===t?3:5:"a"===t?59:61;var y={flipTheBoard:"Flip the board",analysisBoard:"Analysis board",practiceWithComputer:"Practice with computer",getPgn:"Get PGN",download:"Download",viewOnLichess:"View on Lichess",viewOnSite:"View on site"};const I=["white","black"],k=["a","b","c","d","e","f","g","h"],M=["1","2","3","4","5","6","7","8"],x=[...M].reverse(),L=Array.prototype.concat(...k.map((e=>M.map((t=>e+t))))),S=e=>L[8*e[0]+e[1]],B=e=>[e.charCodeAt(0)-97,e.charCodeAt(1)-49],C=L.map(B),E=()=>{let e;return{start(){e=performance.now()},cancel(){e=void 0},stop(){if(!e)return 0;const t=performance.now()-e;return e=void 0,t}}},N=e=>"white"===e?"black":"white",R=(e,t)=>{const n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i},D=(e,t)=>e.role===t.role&&e.color===t.color,j=e=>(t,n)=>[(n?t[0]:7-t[0])*e.width/8,(n?7-t[1]:t[1])*e.height/8],Q=(e,t)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px)`},T=(e,t,n=1)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px) scale(${n})`},P=(e,t)=>{e.style.visibility=t?"visible":"hidden"},G=e=>{var t;return e.clientX||0===e.clientX?[e.clientX,e.clientY]:(null===(t=e.targetTouches)||void 0===t?void 0:t[0])?[e.targetTouches[0].clientX,e.targetTouches[0].clientY]:void 0},U=e=>{var t;return 2==(2&(null!==(t=e.buttons)&&void 0!==t?t:0))},z=(e,t)=>{const n=document.createElement(e);return t&&(n.className=t),n};function Z(e,t,n){const i=B(e);return t||(i[0]=7-i[0],i[1]=7-i[1]),[n.left+n.width*i[0]/8+n.width/16,n.top+n.height*(7-i[1])/8+n.height/16]}var W,Y=function(){function e(t){var n=this;this.path=t,this.size=function(){return n.path.length/2},this.head=function(){return n.path.slice(0,2)},this.tail=function(){return new e(n.path.slice(2))},this.init=function(){return new e(n.path.slice(0,-2))},this.last=function(){return n.path.slice(-2)},this.empty=function(){return""==n.path},this.contains=function(e){return n.path.startsWith(e.path)},this.isChildOf=function(e){return n.init()===e},this.append=function(t){return new e(n.path+t)},this.equals=function(e){return n.path==e.path}}return e.root=new e(""),e}(),O=function(e,t,n,i){var o=this;this.initial=e,this.moves=t,this.players=n,this.metadata=i,this.nodeAt=function(e){return _(o.moves,e)},this.dataAt=function(e){var t=o.nodeAt(e);return t?F(t)?t.data:o.initial:void 0},this.title=function(){return o.players.white.name?[o.players.white.title,o.players.white.name,"vs",o.players.black.title,o.players.black.name].filter((function(e){return e&&!!e.trim()})).join("_").replace(" ","-"):"lichess-pgn-viewer"},this.pathAtMainlinePly=function(e){var t;return 0==e?Y.root:(null===(t=o.mainline[Math.max(0,Math.min(o.mainline.length-1,"last"==e?9999:e-1))])||void 0===t?void 0:t.path)||Y.root},this.hasPlayerName=function(){var e,t;return!(!(null===(e=o.players.white)||void 0===e?void 0:e.name)&&!(null===(t=o.players.black)||void 0===t?void 0:t.name))},this.mainline=Array.from(this.moves.mainline())},_=function(e,t){if(t.empty())return e;var n=function(e,t){return e.children.find((function(e){return e.data.path.last()==t}))}(e,t.head());return n?_(n,t.tail()):void 0},F=function(e){return"data"in e};class H{unwrap(e,t){const n=this._chain((t=>W.ok(e?e(t):t)),(e=>t?W.ok(t(e)):W.err(e)));if(n.isErr)throw n.error;return n.value}map(e,t){return this._chain((t=>W.ok(e(t))),(e=>W.err(t?t(e):e)))}chain(e,t){return this._chain(e,t||(e=>W.err(e)))}}class K extends H{constructor(e){super(),this.value=void 0,this.isOk=!0,this.isErr=!1,this.value=e}_chain(e,t){return e(this.value)}}class V extends H{constructor(e){super(),this.error=void 0,this.isOk=!1,this.isErr=!0,this.error=e}_chain(e,t){return t(this.error)}}!function(e){e.ok=function(e){return new K(e)},e.err=function(e){return new V(e||new Error)},e.all=function(t){if(Array.isArray(t)){const n=[];for(let e=0;e<t.length;e++){const i=t[e];if(i.isErr)return i;n.push(i.value)}return e.ok(n)}const n={},i=Object.keys(t);for(let e=0;e<i.length;e++){const o=t[i[e]];if(o.isErr)return o;n[i[e]]=o.value}return e.ok(n)}}(W||(W={}));const J=e=>(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459),Math.imul(e+(e>>>4)&252645135,16843009)>>24),q=e=>(e=e>>>8&16711935|(16711935&e)<<8)>>>16&65535|(65535&e)<<16,X=e=>q(e=(e=(e=e>>>1&1431655765|(1431655765&e)<<1)>>>2&858993459|(858993459&e)<<2)>>>4&252645135|(252645135&e)<<4);class ee{constructor(e,t){this.lo=0|e,this.hi=0|t}static fromSquare(e){return e>=32?new ee(0,1<<e-32):new ee(1<<e,0)}static fromRank(e){return new ee(255,0).shl64(8*e)}static fromFile(e){return new ee(16843009<<e,16843009<<e)}static empty(){return new ee(0,0)}static full(){return new ee(4294967295,4294967295)}static corners(){return new ee(129,2164260864)}static center(){return new ee(402653184,24)}static backranks(){return new ee(255,4278190080)}static backrank(e){return"white"===e?new ee(255,0):new ee(0,4278190080)}static lightSquares(){return new ee(1437226410,1437226410)}static darkSquares(){return new ee(2857740885,2857740885)}complement(){return new ee(~this.lo,~this.hi)}xor(e){return new ee(this.lo^e.lo,this.hi^e.hi)}union(e){return new ee(this.lo|e.lo,this.hi|e.hi)}intersect(e){return new ee(this.lo&e.lo,this.hi&e.hi)}diff(e){return new ee(this.lo&~e.lo,this.hi&~e.hi)}intersects(e){return this.intersect(e).nonEmpty()}isDisjoint(e){return this.intersect(e).isEmpty()}supersetOf(e){return e.diff(this).isEmpty()}subsetOf(e){return this.diff(e).isEmpty()}shr64(e){return e>=64?ee.empty():e>=32?new ee(this.hi>>>e-32,0):e>0?new ee(this.lo>>>e^this.hi<<32-e,this.hi>>>e):this}shl64(e){return e>=64?ee.empty():e>=32?new ee(0,this.lo<<e-32):e>0?new ee(this.lo<<e,this.hi<<e^this.lo>>>32-e):this}bswap64(){return new ee(q(this.hi),q(this.lo))}rbit64(){return new ee(X(this.hi),X(this.lo))}minus64(e){const t=this.lo-e.lo,n=(t&e.lo&1)+(e.lo>>>1)+(t>>>1)>>>31;return new ee(t,this.hi-(e.hi+n))}equals(e){return this.lo===e.lo&&this.hi===e.hi}size(){return J(this.lo)+J(this.hi)}isEmpty(){return 0===this.lo&&0===this.hi}nonEmpty(){return 0!==this.lo||0!==this.hi}has(e){return 0!=(e>=32?this.hi&1<<e-32:this.lo&1<<e)}set(e,t){return t?this.with(e):this.without(e)}with(e){return e>=32?new ee(this.lo,this.hi|1<<e-32):new ee(this.lo|1<<e,this.hi)}without(e){return e>=32?new ee(this.lo,this.hi&~(1<<e-32)):new ee(this.lo&~(1<<e),this.hi)}toggle(e){return e>=32?new ee(this.lo,this.hi^1<<e-32):new ee(this.lo^1<<e,this.hi)}last(){return 0!==this.hi?63-Math.clz32(this.hi):0!==this.lo?31-Math.clz32(this.lo):void 0}first(){return 0!==this.lo?31-Math.clz32(this.lo&-this.lo):0!==this.hi?63-Math.clz32(this.hi&-this.hi):void 0}withoutFirst(){return 0!==this.lo?new ee(this.lo&this.lo-1,this.hi):new ee(0,this.hi&this.hi-1)}moreThanOne(){return 0!==this.hi&&0!==this.lo||0!=(this.lo&this.lo-1)||0!=(this.hi&this.hi-1)}singleSquare(){return this.moreThanOne()?void 0:this.last()}*[Symbol.iterator](){let e=this.lo,t=this.hi;for(;0!==e;){const t=31-Math.clz32(e&-e);e^=1<<t,yield t}for(;0!==t;){const e=31-Math.clz32(t&-t);t^=1<<e,yield 32+e}}*reversed(){let e=this.lo,t=this.hi;for(;0!==t;){const e=31-Math.clz32(t);t^=1<<e,yield 32+e}for(;0!==e;){const t=31-Math.clz32(e);e^=1<<t,yield t}}}class te{constructor(){}static default(){const e=new te;return e.reset(),e}reset(){this.occupied=new ee(65535,4294901760),this.promoted=ee.empty(),this.white=new ee(65535,0),this.black=new ee(0,4294901760),this.pawn=new ee(65280,16711680),this.knight=new ee(66,1107296256),this.bishop=new ee(36,603979776),this.rook=new ee(129,2164260864),this.queen=new ee(8,134217728),this.king=new ee(16,268435456)}static empty(){const e=new te;return e.clear(),e}clear(){this.occupied=ee.empty(),this.promoted=ee.empty();for(const e of r)this[e]=ee.empty();for(const e of s)this[e]=ee.empty()}clone(){const e=new te;e.occupied=this.occupied,e.promoted=this.promoted;for(const t of r)e[t]=this[t];for(const t of s)e[t]=this[t];return e}getColor(e){return this.white.has(e)?"white":this.black.has(e)?"black":void 0}getRole(e){for(const t of s)if(this[t].has(e))return t}get(e){const t=this.getColor(e);if(t)return{color:t,role:this.getRole(e),promoted:this.promoted.has(e)}}take(e){const t=this.get(e);return t&&(this.occupied=this.occupied.without(e),this[t.color]=this[t.color].without(e),this[t.role]=this[t.role].without(e),t.promoted&&(this.promoted=this.promoted.without(e))),t}set(e,t){const n=this.take(e);return this.occupied=this.occupied.with(e),this[t.color]=this[t.color].with(e),this[t.role]=this[t.role].with(e),t.promoted&&(this.promoted=this.promoted.with(e)),n}has(e){return this.occupied.has(e)}*[Symbol.iterator](){for(const e of this.occupied)yield[e,this.get(e)]}pieces(e,t){return this[e].intersect(this[t])}rooksAndQueens(){return this.rook.union(this.queen)}bishopsAndQueens(){return this.bishop.union(this.queen)}kingOf(e){return this.pieces(e,"king").singleSquare()}}class ne{constructor(){}static empty(){const e=new ne;for(const t of s)e[t]=0;return e}static fromBoard(e,t){const n=new ne;for(const i of s)n[i]=e.pieces(t,i).size();return n}clone(){const e=new ne;for(const t of s)e[t]=this[t];return e}equals(e){return s.every((t=>this[t]===e[t]))}add(e){const t=new ne;for(const n of s)t[n]=this[n]+e[n];return t}nonEmpty(){return s.some((e=>this[e]>0))}isEmpty(){return!this.nonEmpty()}hasPawns(){return this.pawn>0}hasNonPawns(){return this.knight>0||this.bishop>0||this.rook>0||this.queen>0||this.king>0}size(){return this.pawn+this.knight+this.bishop+this.rook+this.queen+this.king}}class ie{constructor(e,t){this.white=e,this.black=t}static empty(){return new ie(ne.empty(),ne.empty())}static fromBoard(e){return new ie(ne.fromBoard(e,"white"),ne.fromBoard(e,"black"))}clone(){return new ie(this.white.clone(),this.black.clone())}equals(e){return this.white.equals(e.white)&&this.black.equals(e.black)}add(e){return new ie(this.white.add(e.white),this.black.add(e.black))}count(e){return this.white[e]+this.black[e]}size(){return this.white.size()+this.black.size()}isEmpty(){return this.white.isEmpty()&&this.black.isEmpty()}nonEmpty(){return!this.isEmpty()}hasPawns(){return this.white.hasPawns()||this.black.hasPawns()}hasNonPawns(){return this.white.hasNonPawns()||this.black.hasNonPawns()}}class oe{constructor(e,t){this.white=e,this.black=t}static default(){return new oe(3,3)}clone(){return new oe(this.white,this.black)}equals(e){return this.white===e.white&&this.black===e.black}}var re;!function(e){e.Fen="ERR_FEN",e.Board="ERR_BOARD",e.Pockets="ERR_POCKETS",e.Turn="ERR_TURN",e.Castling="ERR_CASTLING",e.EpSquare="ERR_EP_SQUARE",e.RemainingChecks="ERR_REMAINING_CHECKS",e.Halfmoves="ERR_HALFMOVES",e.Fullmoves="ERR_FULLMOVES"}(re||(re={}));class se extends Error{}const ae=e=>/^\d{1,4}$/.test(e)?parseInt(e,10):void 0,ce=e=>{const t=g(e);return t&&{role:t,color:e.toLowerCase()===e?"black":"white"}},le=e=>{const t=te.empty();let n=7,i=0;for(let o=0;o<e.length;o++){const r=e[o];if("/"===r&&8===i)i=0,n--;else{const s=parseInt(r,10);if(s>0)i+=s;else{if(i>=8||n<0)return W.err(new se(re.Board));const s=i+8*n,a=ce(r);if(!a)return W.err(new se(re.Board));"~"===e[o+1]&&(a.promoted=!0,o++),t.set(s,a),i++}}}return 0!==n||8!==i?W.err(new se(re.Board)):W.ok(t)},ue=e=>{if(e.length>64)return W.err(new se(re.Pockets));const t=ie.empty();for(const n of e){const e=ce(n);if(!e)return W.err(new se(re.Pockets));t[e.color][e.role]++}return W.ok(t)},de=e=>{const t=e.split("+");if(3===t.length&&""===t[0]){const e=ae(t[1]),n=ae(t[2]);return!l(e)||e>3||!l(n)||n>3?W.err(new se(re.RemainingChecks)):W.ok(new oe(3-e,3-n))}if(2===t.length){const e=ae(t[0]),n=ae(t[1]);return!l(e)||e>3||!l(n)||n>3?W.err(new se(re.RemainingChecks)):W.ok(new oe(e,n))}return W.err(new se(re.RemainingChecks))},Ae=e=>{let t=p(e.role);return"white"===e.color&&(t=t.toUpperCase()),e.promoted&&(t+="~"),t},he=e=>{let t="",n=0;for(let i=7;i>=0;i--)for(let o=0;o<8;o++){const r=o+8*i,s=e.get(r);s?(n>0&&(t+=n,n=0),t+=Ae(s)):n++,7===o&&(n>0&&(t+=n,n=0),0!==i&&(t+="/"))}return t},pe=e=>s.map((t=>p(t).repeat(e[t]))).join(""),ge=(e,n)=>{let i="";for(const o of r){const r=ee.backrank(o);let s=e.kingOf(o);l(s)&&!r.has(s)&&(s=void 0);const a=e.pieces(o,"rook").intersect(r);for(const e of n.intersect(r).reversed())if(e===a.first()&&l(s)&&e<s)i+="white"===o?"Q":"q";else if(e===a.last()&&l(s)&&s<e)i+="white"===o?"K":"k";else{const n=t[A(e)];i+="white"===o?n.toUpperCase():n}}return i||"-"},me=(e,t)=>{return[he(e.board)+(e.pockets?`[${i=e.pockets,pe(i.white).toUpperCase()+pe(i.black)}]`:""),e.turn[0],ge(e.board,e.castlingRights),l(e.epSquare)?f(e.epSquare):"-",...e.remainingChecks?[(n=e.remainingChecks,`${n.white}+${n.black}`)]:[],...(null==t?void 0:t.epd)?[]:[Math.max(0,Math.min(e.halfmoves,9999)),Math.max(1,Math.min(e.fullmoves,9999))]].join(" ");var n,i},fe=(e,t)=>{let n=ee.empty();for(const i of t){const t=e+i;0<=t&&t<64&&Math.abs(A(e)-A(t))<=2&&(n=n.with(t))}return n},be=e=>{const t=[];for(let n=0;n<64;n++)t[n]=e(n);return t},we=be((e=>fe(e,[-9,-8,-7,-1,1,7,8,9]))),ve=be((e=>fe(e,[-17,-15,-10,-6,6,10,15,17]))),ye={white:be((e=>fe(e,[7,9]))),black:be((e=>fe(e,[-7,-9])))},Ie=e=>we[e],ke=e=>ve[e],Me=(e,t)=>ye[e][t],xe=be((e=>ee.fromFile(A(e)).without(e))),Le=be((e=>ee.fromRank(d(e)).without(e))),Se=be((e=>{const t=new ee(134480385,2151686160),n=8*(d(e)-A(e));return(n>=0?t.shl64(n):t.shr64(-n)).without(e)})),Be=be((e=>{const t=new ee(270549120,16909320),n=8*(d(e)+A(e)-7);return(n>=0?t.shl64(n):t.shr64(-n)).without(e)})),Ce=(e,t,n)=>{let i=n.intersect(t),o=i.bswap64();return i=i.minus64(e),o=o.minus64(e.bswap64()),i.xor(o.bswap64()).intersect(t)},Ee=(e,t)=>{const n=ee.fromSquare(e);return Ce(n,Se[e],t).xor(Ce(n,Be[e],t))},Ne=(e,t)=>((e,t)=>Ce(ee.fromSquare(e),xe[e],t))(e,t).xor(((e,t)=>{const n=Le[e];let i=t.intersect(n),o=i.rbit64();return i=i.minus64(ee.fromSquare(e)),o=o.minus64(ee.fromSquare(63-e)),i.xor(o.rbit64()).intersect(n)})(e,t)),Re=(e,t)=>Ee(e,t).xor(Ne(e,t)),De=(e,t,n)=>{switch(e.role){case"pawn":return Me(e.color,t);case"knight":return ke(t);case"bishop":return Ee(t,n);case"rook":return Ne(t,n);case"queen":return Re(t,n);case"king":return Ie(t)}},je=(e,t)=>{const n=ee.fromSquare(t);return Le[e].intersects(n)?Le[e].with(e):Be[e].intersects(n)?Be[e].with(e):Se[e].intersects(n)?Se[e].with(e):xe[e].intersects(n)?xe[e].with(e):ee.empty()},Qe=(e,t)=>je(e,t).intersect(ee.full().shl64(e).xor(ee.full().shl64(t))).withoutFirst();var Te;!function(e){e.Empty="ERR_EMPTY",e.OppositeCheck="ERR_OPPOSITE_CHECK",e.PawnsOnBackrank="ERR_PAWNS_ON_BACKRANK",e.Kings="ERR_KINGS",e.Variant="ERR_VARIANT"}(Te||(Te={}));class Pe extends Error{}class Ge{constructor(){}static default(){const e=new Ge;return e.castlingRights=ee.corners(),e.rook={white:{a:0,h:7},black:{a:56,h:63}},e.path={white:{a:new ee(14,0),h:new ee(96,0)},black:{a:new ee(0,234881024),h:new ee(0,1610612736)}},e}static empty(){const e=new Ge;return e.castlingRights=ee.empty(),e.rook={white:{a:void 0,h:void 0},black:{a:void 0,h:void 0}},e.path={white:{a:ee.empty(),h:ee.empty()},black:{a:ee.empty(),h:ee.empty()}},e}clone(){const e=new Ge;return e.castlingRights=this.castlingRights,e.rook={white:{a:this.rook.white.a,h:this.rook.white.h},black:{a:this.rook.black.a,h:this.rook.black.h}},e.path={white:{a:this.path.white.a,h:this.path.white.h},black:{a:this.path.black.a,h:this.path.black.h}},e}add(e,t,n,i){const o=w(e,t),r=v(e,t);this.castlingRights=this.castlingRights.with(i),this.rook[e][t]=i,this.path[e][t]=Qe(i,r).with(r).union(Qe(n,o).with(o)).without(n).without(i)}static fromSetup(e){const t=Ge.empty(),n=e.castlingRights.intersect(e.board.rook);for(const i of r){const o=ee.backrank(i),r=e.board.kingOf(i);if(!l(r)||!o.has(r))continue;const s=n.intersect(e.board[i]).intersect(o),a=s.first();l(a)&&a<r&&t.add(i,"a",r,a);const c=s.last();l(c)&&r<c&&t.add(i,"h",r,c)}return t}discardRook(e){if(this.castlingRights.has(e)){this.castlingRights=this.castlingRights.without(e);for(const t of r)for(const n of a)this.rook[t][n]===e&&(this.rook[t][n]=void 0)}}discardColor(e){this.castlingRights=this.castlingRights.diff(ee.backrank(e)),this.rook[e].a=void 0,this.rook[e].h=void 0}}class Ue{constructor(e){this.rules=e}reset(){this.board=te.default(),this.pockets=void 0,this.turn="white",this.castles=Ge.default(),this.epSquare=void 0,this.remainingChecks=void 0,this.halfmoves=0,this.fullmoves=1}setupUnchecked(e){this.board=e.board.clone(),this.board.promoted=ee.empty(),this.pockets=void 0,this.turn=e.turn,this.castles=Ge.fromSetup(e),this.epSquare=Ze(this,e.epSquare),this.remainingChecks=void 0,this.halfmoves=e.halfmoves,this.fullmoves=e.fullmoves}kingAttackers(e,t,n){return((e,t,n,i)=>n[t].intersect(Ne(e,i).intersect(n.rooksAndQueens()).union(Ee(e,i).intersect(n.bishopsAndQueens())).union(ke(e).intersect(n.knight)).union(Ie(e).intersect(n.king)).union(Me(u(t),e).intersect(n.pawn))))(e,t,this.board,n)}playCaptureAt(e,t){this.halfmoves=0,"rook"===t.role&&this.castles.discardRook(e),this.pockets&&this.pockets[u(t.color)][t.promoted?"pawn":t.role]++}ctx(){const e=this.isVariantEnd(),t=this.board.kingOf(this.turn);if(!l(t))return{king:t,blockers:ee.empty(),checkers:ee.empty(),variantEnd:e,mustCapture:!1};const n=Ne(t,ee.empty()).intersect(this.board.rooksAndQueens()).union(Ee(t,ee.empty()).intersect(this.board.bishopsAndQueens())).intersect(this.board[u(this.turn)]);let i=ee.empty();for(const e of n){const n=Qe(t,e).intersect(this.board.occupied);n.moreThanOne()||(i=i.union(n))}return{king:t,blockers:i,checkers:this.kingAttackers(t,u(this.turn),this.board.occupied),variantEnd:e,mustCapture:!1}}clone(){var e,t;const n=new this.constructor;return n.board=this.board.clone(),n.pockets=null===(e=this.pockets)||void 0===e?void 0:e.clone(),n.turn=this.turn,n.castles=this.castles.clone(),n.epSquare=this.epSquare,n.remainingChecks=null===(t=this.remainingChecks)||void 0===t?void 0:t.clone(),n.halfmoves=this.halfmoves,n.fullmoves=this.fullmoves,n}validate(){if(this.board.occupied.isEmpty())return W.err(new Pe(Te.Empty));if(2!==this.board.king.size())return W.err(new Pe(Te.Kings));if(!l(this.board.kingOf(this.turn)))return W.err(new Pe(Te.Kings));const e=this.board.kingOf(u(this.turn));return l(e)?this.kingAttackers(e,this.turn,this.board.occupied).nonEmpty()?W.err(new Pe(Te.OppositeCheck)):ee.backranks().intersects(this.board.pawn)?W.err(new Pe(Te.PawnsOnBackrank)):W.ok(void 0):W.err(new Pe(Te.Kings))}dropDests(e){return ee.empty()}dests(e,t){if((t=t||this.ctx()).variantEnd)return ee.empty();const n=this.board.get(e);if(!n||n.color!==this.turn)return ee.empty();let i,o;if("pawn"===n.role){i=Me(this.turn,e).intersect(this.board[u(this.turn)]);const n="white"===this.turn?8:-8,r=e+n;if(0<=r&&r<64&&!this.board.occupied.has(r)){i=i.with(r);const t=r+n;("white"===this.turn?e<16:e>=48)&&!this.board.occupied.has(t)&&(i=i.with(t))}l(this.epSquare)&&Ye(this,e,t)&&(o=ee.fromSquare(this.epSquare))}else i="bishop"===n.role?Ee(e,this.board.occupied):"knight"===n.role?ke(e):"rook"===n.role?Ne(e,this.board.occupied):"queen"===n.role?Re(e,this.board.occupied):Ie(e);if(i=i.diff(this.board[this.turn]),l(t.king)){if("king"===n.role){const n=this.board.occupied.without(e);for(const e of i)this.kingAttackers(e,u(this.turn),n).nonEmpty()&&(i=i.without(e));return i.union(Oe(this,"a",t)).union(Oe(this,"h",t))}if(t.checkers.nonEmpty()){const e=t.checkers.singleSquare();if(!l(e))return ee.empty();i=i.intersect(Qe(e,t.king).with(e))}t.blockers.has(e)&&(i=i.intersect(je(e,t.king)))}return o&&(i=i.union(o)),i}isVariantEnd(){return!1}variantOutcome(e){}hasInsufficientMaterial(e){return!this.board[e].intersect(this.board.pawn.union(this.board.rooksAndQueens())).nonEmpty()&&(this.board[e].intersects(this.board.knight)?this.board[e].size()<=2&&this.board[u(e)].diff(this.board.king).diff(this.board.queen).isEmpty():!this.board[e].intersects(this.board.bishop)||(!this.board.bishop.intersects(ee.darkSquares())||!this.board.bishop.intersects(ee.lightSquares()))&&this.board.pawn.isEmpty()&&this.board.knight.isEmpty())}toSetup(){var e,t;return{board:this.board.clone(),pockets:null===(e=this.pockets)||void 0===e?void 0:e.clone(),turn:this.turn,castlingRights:this.castles.castlingRights,epSquare:We(this),remainingChecks:null===(t=this.remainingChecks)||void 0===t?void 0:t.clone(),halfmoves:Math.min(this.halfmoves,150),fullmoves:Math.min(Math.max(this.fullmoves,1),9999)}}isInsufficientMaterial(){return r.every((e=>this.hasInsufficientMaterial(e)))}hasDests(e){e=e||this.ctx();for(const t of this.board[this.turn])if(this.dests(t,e).nonEmpty())return!0;return this.dropDests(e).nonEmpty()}isLegal(e,t){if(c(e))return!(!this.pockets||this.pockets[this.turn][e.role]<=0)&&("pawn"!==e.role||!ee.backranks().has(e.to))&&this.dropDests(t).has(e.to);{if("pawn"===e.promotion)return!1;if("king"===e.promotion&&"antichess"!==this.rules)return!1;if(!!e.promotion!==(this.board.pawn.has(e.from)&&ee.backranks().has(e.to)))return!1;const n=this.dests(e.from,t);return n.has(e.to)||n.has(He(this,e).to)}}isCheck(){const e=this.board.kingOf(this.turn);return l(e)&&this.kingAttackers(e,u(this.turn),this.board.occupied).nonEmpty()}isEnd(e){return!!(e?e.variantEnd:this.isVariantEnd())||this.isInsufficientMaterial()||!this.hasDests(e)}isCheckmate(e){return!(e=e||this.ctx()).variantEnd&&e.checkers.nonEmpty()&&!this.hasDests(e)}isStalemate(e){return!(e=e||this.ctx()).variantEnd&&e.checkers.isEmpty()&&!this.hasDests(e)}outcome(e){return this.variantOutcome(e)||(e=e||this.ctx(),this.isCheckmate(e)?{winner:u(this.turn)}:this.isInsufficientMaterial()||this.isStalemate(e)?{winner:void 0}:void 0)}allDests(e){e=e||this.ctx();const t=new Map;if(e.variantEnd)return t;for(const n of this.board[this.turn])t.set(n,this.dests(n,e));return t}play(e){const t=this.turn,n=this.epSquare,i=Fe(this,e);if(this.epSquare=void 0,this.halfmoves+=1,"black"===t&&(this.fullmoves+=1),this.turn=u(t),c(e))this.board.set(e.to,{role:e.role,color:t}),this.pockets&&this.pockets[t][e.role]--,"pawn"===e.role&&(this.halfmoves=0);else{const o=this.board.take(e.from);if(!o)return;let r;if("pawn"===o.role){this.halfmoves=0,e.to===n&&(r=this.board.take(e.to+("white"===t?-8:8)));const i=e.from-e.to;16===Math.abs(i)&&8<=e.from&&e.from<=55&&(this.epSquare=e.from+e.to>>1),e.promotion&&(o.role=e.promotion,o.promoted=!!this.pockets)}else if("rook"===o.role)this.castles.discardRook(e.from);else if("king"===o.role){if(i){const e=this.castles.rook[t][i];if(l(e)){const n=this.board.take(e);this.board.set(w(t,i),o),n&&this.board.set(v(t,i),n)}}this.castles.discardColor(t)}if(!i){const t=this.board.set(e.to,o)||r;t&&this.playCaptureAt(e.to,t)}}this.remainingChecks&&this.isCheck()&&(this.remainingChecks[t]=Math.max(this.remainingChecks[t]-1,0))}}class ze extends Ue{constructor(){super("chess")}static default(){const e=new this;return e.reset(),e}static fromSetup(e){const t=new this;return t.setupUnchecked(e),t.validate().map((e=>t))}clone(){return super.clone()}}const Ze=(e,t)=>{if(!l(t))return;const n="white"===e.turn?5:2,i="white"===e.turn?8:-8;if(d(t)!==n)return;if(e.board.occupied.has(t+i))return;const o=t-i;return e.board.pawn.has(o)&&e.board[u(e.turn)].has(o)?t:void 0},We=e=>{if(!l(e.epSquare))return;const t=e.ctx(),n=e.board.pieces(e.turn,"pawn").intersect(Me(u(e.turn),e.epSquare));for(const i of n)if(e.dests(i,t).has(e.epSquare))return e.epSquare},Ye=(e,t,n)=>{if(!l(e.epSquare))return!1;if(!Me(e.turn,t).has(e.epSquare))return!1;if(!l(n.king))return!0;const i="white"===e.turn?8:-8,o=e.epSquare-i;return e.kingAttackers(n.king,u(e.turn),e.board.occupied.toggle(t).toggle(o).with(e.epSquare)).without(o).isEmpty()},Oe=(e,t,n)=>{if(!l(n.king)||n.checkers.nonEmpty())return ee.empty();const i=e.castles.rook[e.turn][t];if(!l(i))return ee.empty();if(e.castles.path[e.turn][t].intersects(e.board.occupied))return ee.empty();const o=w(e.turn,t),r=Qe(n.king,o),s=e.board.occupied.without(n.king);for(const t of r)if(e.kingAttackers(t,u(e.turn),s).nonEmpty())return ee.empty();const a=v(e.turn,t),c=e.board.occupied.toggle(n.king).toggle(i).toggle(a);return e.kingAttackers(o,u(e.turn),c).nonEmpty()?ee.empty():ee.fromSquare(i)},_e=(e,t,n)=>{if(n.variantEnd)return ee.empty();const i=e.board.get(t);if(!i||i.color!==e.turn)return ee.empty();let o=De(i,t,e.board.occupied);if("pawn"===i.role){let n=e.board[u(e.turn)];l(e.epSquare)&&(n=n.with(e.epSquare)),o=o.intersect(n);const i="white"===e.turn?8:-8,r=t+i;if(0<=r&&r<64&&!e.board.occupied.has(r)){o=o.with(r);const n=r+i;("white"===e.turn?t<16:t>=48)&&!e.board.occupied.has(n)&&(o=o.with(n))}return o}return o=o.diff(e.board[e.turn]),t===n.king?o.union(Oe(e,"a",n)).union(Oe(e,"h",n)):o},Fe=(e,t)=>{if(c(t))return;const n=t.to-t.from;return(2===Math.abs(n)||e.board[e.turn].has(t.to))&&e.board.king.has(t.from)?n>0?"h":"a":void 0},He=(e,t)=>{const n=Fe(e,t);if(!n)return t;const i=e.castles.rook[e.turn][n];return{from:t.from,to:l(i)?i:t.to}};class Ke extends Ue{constructor(){super("crazyhouse")}reset(){super.reset(),this.pockets=ie.empty()}setupUnchecked(e){super.setupUnchecked(e),this.board.promoted=e.board.promoted.intersect(e.board.occupied).diff(e.board.king).diff(e.board.pawn),this.pockets=e.pockets?e.pockets.clone():ie.empty()}static default(){const e=new this;return e.reset(),e}static fromSetup(e){const t=new this;return t.setupUnchecked(e),t.validate().map((e=>t))}clone(){return super.clone()}validate(){return super.validate().chain((e=>{var t,n;return(null===(t=this.pockets)||void 0===t?void 0:t.count("king"))?W.err(new Pe(Te.Kings)):((null===(n=this.pockets)||void 0===n?void 0:n.size())||0)+this.board.occupied.size()>64?W.err(new Pe(Te.Variant)):W.ok(void 0)}))}hasInsufficientMaterial(e){return this.pockets?this.board.occupied.size()+this.pockets.size()<=3&&this.board.pawn.isEmpty()&&this.board.promoted.isEmpty()&&this.board.rooksAndQueens().isEmpty()&&this.pockets.count("pawn")<=0&&this.pockets.count("rook")<=0&&this.pockets.count("queen")<=0:super.hasInsufficientMaterial(e)}dropDests(e){var t,n;const i=this.board.occupied.complement().intersect((null===(t=this.pockets)||void 0===t?void 0:t[this.turn].hasNonPawns())?ee.full():(null===(n=this.pockets)||void 0===n?void 0:n[this.turn].hasPawns())?ee.backranks().complement():ee.empty());if(e=e||this.ctx(),l(e.king)&&e.checkers.nonEmpty()){const t=e.checkers.singleSquare();return l(t)?i.intersect(Qe(t,e.king)):ee.empty()}return i}}class Ve extends Ue{constructor(){super("atomic")}static default(){const e=new this;return e.reset(),e}static fromSetup(e){const t=new this;return t.setupUnchecked(e),t.validate().map((e=>t))}clone(){return super.clone()}validate(){if(this.board.occupied.isEmpty())return W.err(new Pe(Te.Empty));if(this.board.king.size()>2)return W.err(new Pe(Te.Kings));const e=this.board.kingOf(u(this.turn));return l(e)?this.kingAttackers(e,this.turn,this.board.occupied).nonEmpty()?W.err(new Pe(Te.OppositeCheck)):ee.backranks().intersects(this.board.pawn)?W.err(new Pe(Te.PawnsOnBackrank)):W.ok(void 0):W.err(new Pe(Te.Kings))}kingAttackers(e,t,n){const i=this.board.pieces(t,"king");return i.isEmpty()||Ie(e).intersects(i)?ee.empty():super.kingAttackers(e,t,n)}playCaptureAt(e,t){super.playCaptureAt(e,t),this.board.take(e);for(const t of Ie(e).intersect(this.board.occupied).diff(this.board.pawn)){const e=this.board.take(t);"rook"===(null==e?void 0:e.role)&&this.castles.discardRook(t),"king"===(null==e?void 0:e.role)&&this.castles.discardColor(e.color)}}hasInsufficientMaterial(e){if(this.board.pieces(u(e),"king").isEmpty())return!1;if(this.board[e].diff(this.board.king).isEmpty())return!0;if(this.board[u(e)].diff(this.board.king).nonEmpty()){if(this.board.occupied.equals(this.board.bishop.union(this.board.king))){if(!this.board.bishop.intersect(this.board.white).intersects(ee.darkSquares()))return!this.board.bishop.intersect(this.board.black).intersects(ee.lightSquares());if(!this.board.bishop.intersect(this.board.white).intersects(ee.lightSquares()))return!this.board.bishop.intersect(this.board.black).intersects(ee.darkSquares())}return!1}return!this.board.queen.nonEmpty()&&!this.board.pawn.nonEmpty()&&(1===this.board.knight.union(this.board.bishop).union(this.board.rook).size()||!!this.board.occupied.equals(this.board.knight.union(this.board.king))&&this.board.knight.size()<=2)}dests(e,t){t=t||this.ctx();let n=ee.empty();for(const i of _e(this,e,t)){const t=this.clone();t.play({from:e,to:i});const o=t.board.kingOf(this.turn);!l(o)||l(t.board.kingOf(t.turn))&&!t.kingAttackers(o,t.turn,t.board.occupied).isEmpty()||(n=n.with(i))}return n}isVariantEnd(){return!!this.variantOutcome()}variantOutcome(e){for(const e of r)if(this.board.pieces(e,"king").isEmpty())return{winner:u(e)}}}class Je extends Ue{constructor(){super("antichess")}reset(){super.reset(),this.castles=Ge.empty()}setupUnchecked(e){super.setupUnchecked(e),this.castles=Ge.empty()}static default(){const e=new this;return e.reset(),e}static fromSetup(e){const t=new this;return t.setupUnchecked(e),t.validate().map((e=>t))}clone(){return super.clone()}validate(){return this.board.occupied.isEmpty()?W.err(new Pe(Te.Empty)):ee.backranks().intersects(this.board.pawn)?W.err(new Pe(Te.PawnsOnBackrank)):W.ok(void 0)}kingAttackers(e,t,n){return ee.empty()}ctx(){const e=super.ctx();if(l(this.epSquare)&&Me(u(this.turn),this.epSquare).intersects(this.board.pieces(this.turn,"pawn")))return e.mustCapture=!0,e;const t=this.board[u(this.turn)];for(const n of this.board[this.turn])if(_e(this,n,e).intersects(t))return e.mustCapture=!0,e;return e}dests(e,t){t=t||this.ctx();const n=_e(this,e,t),i=this.board[u(this.turn)];return n.intersect(t.mustCapture?l(this.epSquare)&&"pawn"===this.board.getRole(e)?i.with(this.epSquare):i:ee.full())}hasInsufficientMaterial(e){if(this.board[e].isEmpty())return!1;if(this.board[u(e)].isEmpty())return!0;if(this.board.occupied.equals(this.board.bishop)){const t=this.board[e].intersects(ee.lightSquares()),n=this.board[e].intersects(ee.darkSquares()),i=this.board[u(e)].isDisjoint(ee.lightSquares()),o=this.board[u(e)].isDisjoint(ee.darkSquares());return t&&i||n&&o}return!(!this.board.occupied.equals(this.board.knight)||2!==this.board.occupied.size())&&this.board.white.intersects(ee.lightSquares())!==this.board.black.intersects(ee.darkSquares())!=(this.turn===e)}isVariantEnd(){return this.board[this.turn].isEmpty()}variantOutcome(e){if((e=e||this.ctx()).variantEnd||this.isStalemate(e))return{winner:this.turn}}}class qe extends Ue{constructor(){super("kingofthehill")}static default(){const e=new this;return e.reset(),e}static fromSetup(e){const t=new this;return t.setupUnchecked(e),t.validate().map((e=>t))}clone(){return super.clone()}hasInsufficientMaterial(e){return!1}isVariantEnd(){return this.board.king.intersects(ee.center())}variantOutcome(e){for(const e of r)if(this.board.pieces(e,"king").intersects(ee.center()))return{winner:e}}}class Xe extends Ue{constructor(){super("3check")}reset(){super.reset(),this.remainingChecks=oe.default()}setupUnchecked(e){var t;super.setupUnchecked(e),this.remainingChecks=(null===(t=e.remainingChecks)||void 0===t?void 0:t.clone())||oe.default()}static default(){const e=new this;return e.reset(),e}static fromSetup(e){const t=new this;return t.setupUnchecked(e),t.validate().map((e=>t))}clone(){return super.clone()}hasInsufficientMaterial(e){return this.board.pieces(e,"king").equals(this.board[e])}isVariantEnd(){return!!this.remainingChecks&&(this.remainingChecks.white<=0||this.remainingChecks.black<=0)}variantOutcome(e){if(this.remainingChecks)for(const e of r)if(this.remainingChecks[e]<=0)return{winner:e}}}class $e extends Ue{constructor(){super("racingkings")}reset(){this.board=(()=>{const e=te.empty();return e.occupied=new ee(65535,0),e.promoted=ee.empty(),e.white=new ee(61680,0),e.black=new ee(3855,0),e.pawn=ee.empty(),e.knight=new ee(6168,0),e.bishop=new ee(9252,0),e.rook=new ee(16962,0),e.queen=new ee(129,0),e.king=new ee(33024,0),e})(),this.pockets=void 0,this.turn="white",this.castles=Ge.empty(),this.epSquare=void 0,this.remainingChecks=void 0,this.halfmoves=0,this.fullmoves=1}setupUnchecked(e){super.setupUnchecked(e),this.castles=Ge.empty()}static default(){const e=new this;return e.reset(),e}static fromSetup(e){const t=new this;return t.setupUnchecked(e),t.validate().map((e=>t))}clone(){return super.clone()}validate(){return this.isCheck()||this.board.pawn.nonEmpty()?W.err(new Pe(Te.Variant)):super.validate()}dests(e,t){if(e===(t=t||this.ctx()).king)return super.dests(e,t);let n=ee.empty();for(const i of super.dests(e,t)){const t={from:e,to:i},o=this.clone();o.play(t),o.isCheck()||(n=n.with(i))}return n}hasInsufficientMaterial(e){return!1}isVariantEnd(){const e=ee.fromRank(7),t=this.board.king.intersect(e);if(t.isEmpty())return!1;if("white"===this.turn||t.intersects(this.board.black))return!0;const n=this.board.kingOf("black");if(l(n)){const t=this.board.occupied.without(n);for(const i of Ie(n).intersect(e).diff(this.board.black))if(this.kingAttackers(i,"white",t).isEmpty())return!1}return!0}variantOutcome(e){if(e?!e.variantEnd:!this.isVariantEnd())return;const t=ee.fromRank(7),n=this.board.pieces("black","king").intersects(t),i=this.board.pieces("white","king").intersects(t);return n&&!i?{winner:"black"}:i&&!n?{winner:"white"}:{winner:void 0}}}class et extends Ue{constructor(){super("horde")}reset(){this.board=(()=>{const e=te.empty();return e.occupied=new ee(4294967295,4294901862),e.promoted=ee.empty(),e.white=new ee(4294967295,102),e.black=new ee(0,4294901760),e.pawn=new ee(4294967295,16711782),e.knight=new ee(0,1107296256),e.bishop=new ee(0,603979776),e.rook=new ee(0,2164260864),e.queen=new ee(0,134217728),e.king=new ee(0,268435456),e})(),this.pockets=void 0,this.turn="white",this.castles=Ge.default(),this.castles.discardColor("white"),this.epSquare=void 0,this.remainingChecks=void 0,this.halfmoves=0,this.fullmoves=1}static default(){const e=new this;return e.reset(),e}static fromSetup(e){const t=new this;return t.setupUnchecked(e),t.validate().map((e=>t))}clone(){return super.clone()}validate(){if(this.board.occupied.isEmpty())return W.err(new Pe(Te.Empty));if(1!==this.board.king.size())return W.err(new Pe(Te.Kings));const e=this.board.kingOf(u(this.turn));if(l(e)&&this.kingAttackers(e,this.turn,this.board.occupied).nonEmpty())return W.err(new Pe(Te.OppositeCheck));for(const e of r){const t=this.board.pieces(e,"king").isEmpty()?ee.backrank(u(e)):ee.backranks();if(this.board.pieces(e,"pawn").intersects(t))return W.err(new Pe(Te.PawnsOnBackrank))}return W.ok(void 0)}hasInsufficientMaterial(e){if(this.board.pieces(e,"king").nonEmpty())return!1;const t=e=>"light"===e?"dark":"light",n=e=>"light"===e?ee.lightSquares():ee.darkSquares(),i=e=>{const t=this.board.pieces(e,"bishop");return t.intersects(ee.darkSquares())&&t.intersects(ee.lightSquares())},o=ne.fromBoard(this.board,e),r=t=>n(t).intersect(this.board.pieces(e,"bishop")).size(),s=r("light")>=1?"light":"dark",a=o.pawn+o.knight+o.rook+o.queen+Math.min(r("dark"),2)+Math.min(r("light"),2),c=ne.fromBoard(this.board,u(e)),l=t=>n(t).intersect(this.board.pieces(u(e),"bishop")).size(),d=c.size(),A=e=>d-e;if(0===a)return!0;if(a>=4)return!1;if((o.pawn>=1||o.queen>=1)&&a>=2)return!1;if(o.rook>=1&&a>=2&&(2!==a||1!==o.rook||1!==o.bishop||1!==A(l(s))))return!1;if(1===a){if(1===d)return!0;if(1===o.queen)return!(c.pawn>=1||c.rook>=1||l("light")>=2||l("dark")>=2);if(1===o.pawn){const t=this.board.pieces(e,"pawn").last(),n=this.clone();n.board.set(t,{color:e,role:"queen"});const i=this.clone();return i.board.set(t,{color:e,role:"knight"}),n.hasInsufficientMaterial(e)&&i.hasInsufficientMaterial(e)}if(1===o.rook)return!(c.pawn>=2||c.rook>=1&&c.pawn>=1||c.rook>=1&&c.knight>=1||c.pawn>=1&&c.knight>=1);if(1===o.bishop)return!(l(t(s))>=2||l(t(s))>=1&&c.pawn>=1||c.pawn>=2);if(1===o.knight)return!(d>=4&&(c.knight>=2||c.pawn>=2||c.rook>=1&&c.knight>=1||c.rook>=1&&c.bishop>=1||c.knight>=1&&c.bishop>=1||c.rook>=1&&c.pawn>=1||c.knight>=1&&c.pawn>=1||c.bishop>=1&&c.pawn>=1||i(u(e))&&c.pawn>=1)&&(l("dark")<2||A(l("dark"))>=3)&&(l("light")<2||A(l("light"))>=3))}else{if(2===a)return!(1!==d&&(2===o.knight?!(c.pawn+c.bishop+c.knight<1):i(e)?c.pawn>=1||c.bishop>=1||c.knight>=1&&c.rook+c.queen>=1:o.bishop>=1&&o.knight>=1?c.pawn>=1||l(t(s))>=1||A(l(s))>=3:c.pawn>=1&&l(t(s))>=1||c.pawn>=1&&c.knight>=1||l(t(s))>=1&&c.knight>=1||l(t(s))>=2||c.knight>=2||c.pawn>=2));if(3===a)return!(2===o.knight&&1===o.bishop||3===o.knight||i(e))&&1===d}return!0}isVariantEnd(){return this.board.white.isEmpty()||this.board.black.isEmpty()}variantOutcome(e){return this.board.white.isEmpty()?{winner:"black"}:this.board.black.isEmpty()?{winner:"white"}:void 0}}class tt{constructor(){this.children=[]}*mainline(){let e=this;for(;e.children.length;){const t=e.children[0];yield t.data,e=t}}}class nt extends tt{constructor(e){super(),this.data=e}}const it=()=>new Map([["Event","?"],["Site","?"],["Date","????.??.??"],["Round","?"],["White","?"],["Black","?"],["Result","*"]]),ot=e=>/^\s*$/.test(e),rt=e=>e.startsWith("%");class st extends Error{}class at{constructor(e,t=it,n=1e6){this.emitGame=e,this.initHeaders=t,this.maxBudget=n,this.lineBuf=[],this.resetGame(),this.state=0}resetGame(){this.budget=this.maxBudget,this.found=!1,this.state=1,this.game=((e=it)=>({headers:e(),moves:new tt}))(this.initHeaders),this.stack=[{parent:this.game.moves,root:!0}],this.commentBuf=[]}consumeBudget(e){if(this.budget-=e,this.budget<0)throw new st("ERR_PGN_BUDGET")}parse(e,t){if(!(this.budget<0))try{let n=0;for(;;){const t=e.indexOf("\n",n);if(-1===t)break;const i=t>n&&"\r"===e[t-1]?t-1:t;this.consumeBudget(t-n),this.lineBuf.push(e.slice(n,i)),n=t+1,this.handleLine()}this.consumeBudget(e.length-n),this.lineBuf.push(e.slice(n)),(null==t?void 0:t.stream)||(this.handleLine(),this.emit(void 0))}catch(e){this.emit(e)}}handleLine(){let e=!0,t=this.lineBuf.join("");this.lineBuf=[];e:for(;;)switch(this.state){case 0:t.startsWith("\ufeff")&&(t=t.slice(1)),this.state=1;case 1:if(ot(t)||rt(t))return;this.found=!0,this.state=2;case 2:{if(rt(t))return;let n=!0;for(;n;)n=!1,t=t.replace(/^\s*\[([A-Za-z0-9][A-Za-z0-9_+#=:-]*)\s+"((?:[^"\\]|\\"|\\\\)*)"\]/,((t,i,o)=>(this.consumeBudget(200),this.game.headers.set(i,o.replace(/\\"/g,'"').replace(/\\\\/g,"\\")),n=!0,e=!1,"")));if(ot(t))return;this.state=3}case 3:{if(e){if(rt(t))return;if(ot(t))return this.emit(void 0)}const n=/(?:[NBKRQ]?[a-h]?[1-8]?[-x]?[a-h][1-8](?:=?[nbrqkNBRQK])?|[pnbrqkPNBRQK]?@[a-h][1-8]|O-O-O|0-0-0|O-O|0-0)[+#]?|--|Z0|0000|@@@@|{|;|\$\d{1,4}|[?!]{1,2}|\(|\)|\*|1-0|0-1|1\/2-1\/2/g;let i;for(;i=n.exec(t);){const e=this.stack[this.stack.length-1];let o=i[0];if(";"===o)return;if(o.startsWith("$"))this.handleNag(parseInt(o.slice(1),10));else if("!"===o)this.handleNag(1);else if("?"===o)this.handleNag(2);else if("!!"===o)this.handleNag(3);else if("??"===o)this.handleNag(4);else if("!?"===o)this.handleNag(5);else if("?!"===o)this.handleNag(6);else if("1-0"===o||"0-1"===o||"1/2-1/2"===o||"*"===o)1===this.stack.length&&"*"!==o&&this.game.headers.set("Result",o);else if("("===o)this.consumeBudget(100),this.stack.push({parent:e.parent,root:!1});else if(")"===o)this.stack.length>1&&this.stack.pop();else{if("{"===o){const e=n.lastIndex,i=" "===t[e]?e+1:e;t=t.slice(i),this.state=4;continue e}this.consumeBudget(100),"Z0"===o||"0000"===o||"@@@@"===o?o="--":o.startsWith("0")&&(o=o.replace(/0/g,"O")),e.node&&(e.parent=e.node),e.node=new nt({san:o,startingComments:e.startingComments}),e.startingComments=void 0,e.root=!1,e.parent.children.push(e.node)}}return}case 4:{const n=t.indexOf("}");if(-1===n)return void this.commentBuf.push(t);{const i=n>0&&" "===t[n-1]?n-1:n;this.commentBuf.push(t.slice(0,i)),this.handleComment(),t=t.slice(n),this.state=3,e=!1}}}}handleNag(e){var t;this.consumeBudget(50);const n=this.stack[this.stack.length-1];n.node&&((t=n.node.data).nags||(t.nags=[]),n.node.data.nags.push(e))}handleComment(){var e,t;this.consumeBudget(100);const n=this.stack[this.stack.length-1],i=this.commentBuf.join("\n");this.commentBuf=[],n.node?((e=n.node.data).comments||(e.comments=[]),n.node.data.comments.push(i)):n.root?((t=this.game).comments||(t.comments=[]),this.game.comments.push(i)):(n.startingComments||(n.startingComments=[]),n.startingComments.push(i))}emit(e){if(4===this.state&&this.handleComment(),e)return this.emitGame(this.game,e);this.found&&this.emitGame(this.game,void 0),this.resetGame()}}const ct=(e,t=it)=>{const n=[];return new at((e=>n.push(e)),t,NaN).parse(e),n},lt=e=>{const t=(e=>{switch((e||"chess").toLowerCase()){case"chess":case"chess960":case"chess 960":case"standard":case"from position":case"classical":case"normal":case"fischerandom":case"fischerrandom":case"fischer random":case"wild/0":case"wild/1":case"wild/2":case"wild/3":case"wild/4":case"wild/5":case"wild/6":case"wild/7":case"wild/8":case"wild/8a":return"chess";case"crazyhouse":case"crazy house":case"house":case"zh":return"crazyhouse";case"king of the hill":case"koth":case"kingofthehill":return"kingofthehill";case"three-check":case"three check":case"threecheck":case"three check chess":case"3-check":case"3 check":case"3check":return"3check";case"antichess":case"anti chess":case"anti":return"antichess";case"atomic":case"atom":case"atomic chess":return"atomic";case"horde":case"horde chess":return"horde";case"racing kings":case"racingkings":case"racing":case"race":return"racingkings";default:return}})(e.get("Variant"));if(!t)return W.err(new Pe(Te.Variant));const n=e.get("FEN");return n?(e=>{const t=e.split(/[\s_]+/),n=t.shift();let i,o,s=W.ok(void 0);if(n.endsWith("]")){const e=n.indexOf("[");if(-1===e)return W.err(new se(re.Fen));i=le(n.slice(0,e)),s=ue(n.slice(e+1,-1))}else{const e=((e,t,n)=>{let i=e.indexOf("/");for(;n-- >0&&-1!==i;)i=e.indexOf("/",i+1);return i})(n,0,7);-1===e?i=le(n):(i=le(n.slice(0,e)),s=ue(n.slice(e+1)))}const a=t.shift();if(l(a)&&"w"!==a){if("b"!==a)return W.err(new se(re.Turn));o="black"}else o="white";return i.chain((e=>{const n=t.shift(),i=l(n)?((e,t)=>{let n=ee.empty();if("-"===t)return W.ok(n);for(const i of t){const t=i.toLowerCase(),o=i===t?"black":"white",r="white"===o?0:7;if("a"<=t&&t<="h")n=n.with(h(t.charCodeAt(0)-"a".charCodeAt(0),r));else{if("k"!==t&&"q"!==t)return W.err(new se(re.Castling));{const i=e[o].intersect(ee.backrank(o)).intersect(e.rook.union(e.king)),s="k"===t?i.last():i.first();n=n.with(l(s)&&e.rook.has(s)?s:h("k"===t?7:0,r))}}}return r.some((e=>ee.backrank(e).intersect(n).size()>2))?W.err(new se(re.Castling)):W.ok(n)})(e,n):W.ok(ee.empty()),a=t.shift();let c;if(l(a)&&"-"!==a&&(c=m(a),!l(c)))return W.err(new se(re.EpSquare));let u,d=t.shift();l(d)&&d.includes("+")&&(u=de(d),d=t.shift());const A=l(d)?ae(d):0;if(!l(A))return W.err(new se(re.Halfmoves));const p=t.shift(),g=l(p)?ae(p):1;if(!l(g))return W.err(new se(re.Fullmoves));const f=t.shift();let b=W.ok(void 0);if(l(f)){if(l(u))return W.err(new se(re.RemainingChecks));b=de(f)}else l(u)&&(b=u);return t.length>0?W.err(new se(re.Fen)):s.chain((t=>i.chain((n=>b.map((i=>({board:e,pockets:t,turn:o,castlingRights:n,remainingChecks:i,epSquare:c,halfmoves:A,fullmoves:Math.max(1,g)})))))))}))})(n).chain((e=>((e,t)=>{switch(e){case"chess":return ze.fromSetup(t);case"antichess":return Je.fromSetup(t);case"atomic":return Ve.fromSetup(t);case"horde":return et.fromSetup(t);case"racingkings":return $e.fromSetup(t);case"kingofthehill":return qe.fromSetup(t);case"3check":return Xe.fromSetup(t);case"crazyhouse":return Ke.fromSetup(t)}})(t,e))):W.ok((e=>{switch(e){case"chess":return ze.default();case"antichess":return Je.default();case"atomic":return Ve.default();case"horde":return et.default();case"racingkings":return $e.default();case"kingofthehill":return qe.default();case"3check":return Xe.default();case"crazyhouse":return Ke.default()}})(t))},ut=e=>{const t=function(e){switch(e){case"G":return"green";case"R":return"red";case"Y":return"yellow";case"B":return"blue";default:return}}(e.slice(0,1)),n=m(e.slice(1,3)),i=m(e.slice(3,5));if(t&&l(n))return 3===e.length?{color:t,from:n,to:n}:5===e.length&&l(i)?{color:t,from:n,to:i}:void 0},dt=e=>{let t,n,i;const o=[];return{text:e.replace(/\s?\[%(emt|clk)\s(\d{1,5}):(\d{1,2}):(\d{1,2}(?:\.\d{0,3})?)\]\s?/g,((e,i,o,r,s)=>{const a=3600*parseInt(o,10)+60*parseInt(r,10)+parseFloat(s);return"emt"===i?t=a:"clk"===i&&(n=a),"  "})).replace(/\s?\[%(?:csl|cal)\s([RGYB][a-h][1-8](?:[a-h][1-8])?(?:,[RGYB][a-h][1-8](?:[a-h][1-8])?)*)\]\s?/g,((e,t)=>{for(const e of t.split(","))o.push(ut(e));return"  "})).replace(/\s?\[%eval\s(?:#([+-]?\d{1,5})|([+-]?(?:\d{1,5}|\d{0,5}\.\d{1,2})))(?:,(\d{1,5}))?\]\s?/g,((e,t,n,o)=>{const r=o&&parseInt(o,10);return i=t?{mate:parseInt(t,10),depth:r}:{pawns:parseFloat(n),depth:r},"  "})).trim(),shapes:o,emt:t,clock:n,evaluation:i}},At=(e,n)=>{var i;const r=((e,n)=>{let i="";if(c(n))"pawn"!==n.role&&(i=p(n.role).toUpperCase()),i+="@"+f(n.to);else{const r=e.board.getRole(n.from);if(!r)return"--";if("king"!==r||!e.board[e.turn].has(n.to)&&2!==Math.abs(n.to-n.from)){const s=e.board.occupied.has(n.to)||"pawn"===r&&A(n.from)!==A(n.to);if("pawn"!==r){let s;if(i=p(r).toUpperCase(),s="king"===r?Ie(n.to).intersect(e.board.king):"queen"===r?Re(n.to,e.board.occupied).intersect(e.board.queen):"rook"===r?Ne(n.to,e.board.occupied).intersect(e.board.rook):"bishop"===r?Ee(n.to,e.board.occupied).intersect(e.board.bishop):ke(n.to).intersect(e.board.knight),s=s.intersect(e.board[e.turn]).without(n.from),s.nonEmpty()){const r=e.ctx();for(const t of s)e.dests(t,r).has(n.to)||(s=s.without(t));if(s.nonEmpty()){let e=!1,r=s.intersects(ee.fromRank(d(n.from)));s.intersects(ee.fromFile(A(n.from)))?e=!0:r=!0,r&&(i+=t[A(n.from)]),e&&(i+=o[d(n.from)])}}}else s&&(i=t[A(n.from)]);s&&(i+="x"),i+=f(n.to),n.promotion&&(i+="="+p(n.promotion).toUpperCase())}else i=n.to>n.from?"O-O":"O-O-O"}return i})(e,n);return e.play(n),(null===(i=e.outcome())||void 0===i?void 0:i.winner)?r+"#":e.isCheck()?r+"+":r};var ht=function(){return ht=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ht.apply(this,arguments)},pt=function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},gt=function e(t,n,i){var o=this;this.pos=t,this.path=n,this.clocks=i,this.clone=function(){return new e(o.pos.clone(),o.path,ht({},o.clocks))}},mt=function(e){var t=e.map(dt),n=function(e){return e.reduce((function(e,t){return null==typeof t?e:t}),void 0)};return{texts:t.map((function(e){return e.text})).filter((function(e){return!!e})),shapes:t.flatMap((function(e){return e.shapes})),clock:n(t.map((function(e){return e.clock}))),emt:n(t.map((function(e){return e.emt})))}},ft=function(e,t,n){return((e,t,n)=>{const i=new tt,o=[{before:e,after:i,ctx:t}];let r;for(;r=o.pop();)for(let e=0;e<r.before.children.length;e++){const t=e<r.before.children.length-1?r.ctx.clone():r.ctx,i=r.before.children[e],s=n(t,i.data);if(l(s)){const e=new nt(s);r.after.children.push(e),o.push({before:i,after:e,ctx:t})}}return i})(t,new gt(e,Y.root,{}),(function(e,t,i){var o=((e,t)=>{const n=e.ctx(),i=t.match(/^([NBRQK])?([a-h])?([1-8])?[-x]?([a-h][1-8])(?:=?([nbrqkNBRQK]))?[+#]?$/);if(!i){let i;if("O-O"===t||"O-O+"===t||"O-O#"===t?i="h":"O-O-O"!==t&&"O-O-O+"!==t&&"O-O-O#"!==t||(i="a"),i){const t=e.castles.rook[e.turn][i];if(!l(n.king)||!l(t)||!e.dests(n.king,n).has(t))return;return{from:n.king,to:t}}const o=t.match(/^([pnbrqkPNBRQK])?@([a-h][1-8])[+#]?$/);if(!o)return;const r={role:o[1]?g(o[1]):"pawn",to:m(o[2])};return e.isLegal(r,n)?r:void 0}const o=i[1]?g(i[1]):"pawn",r=m(i[4]),s=i[5]?g(i[5]):void 0;if(!!s!==("pawn"===o&&ee.backranks().has(r)))return;if("king"===s&&"antichess"!==e.rules)return;let a=e.board.pieces(e.turn,o);"pawn"!==o||i[2]?i[2]&&(a=a.intersect(ee.fromFile(i[2].charCodeAt(0)-"a".charCodeAt(0)))):a=a.intersect(ee.fromFile(A(r))),i[3]&&(a=a.intersect(ee.fromRank(i[3].charCodeAt(0)-"1".charCodeAt(0))));const c="pawn"===o?ee.fromFile(A(r)):ee.empty();let d;a=a.intersect(c.union(De({color:u(e.turn),role:o},r,e.board.occupied)));for(const t of a)if(e.dests(t,n).has(r)){if(l(d))return;d=t}return l(d)?{from:d,to:r,promotion:s}:void 0})(e.pos,t.san);if(o){var r=(e=>c(e)?String.fromCharCode(35+e.to,139+["queen","rook","bishop","knight","pawn"].indexOf(e.role)):String.fromCharCode(35+e.from,e.promotion?99+8*["queen","rook","bishop","knight","king"].indexOf(e.promotion)+A(e.to):35+e.to))(o),s=e.path.append(r),a=At(e.pos,o);e.path=s;var d=e.pos.toSetup(),h=mt(t.comments||[]),p=mt(t.startingComments||[]),f=pt(pt([],h.shapes,!0),p.shapes,!0),w=2*(d.fullmoves-1)+("white"===e.pos.turn?0:1),v=e.clocks=bt(e.clocks,e.pos.turn,h.clock);return w<2&&n.timeControl&&(v=ht({white:n.timeControl.initial,black:n.timeControl.initial},v)),{path:s,ply:w,move:o,san:a,uci:b(o),fen:me(e.pos.toSetup()),turn:e.pos.turn,check:e.pos.isCheck(),comments:h.texts,startingComments:p.texts,nags:t.nags||[],shapes:f,clocks:v,emt:h.emt}}}))},bt=function(e,t,n){return ht(ht({},e),"white"==t?{black:n}:{white:n})};const wt=function(e,t){var n,i=this;this.opts=e,this.redraw=t,this.flipped=!1,this.pane="board",this.autoScrollRequested=!1,this.curNode=function(){return i.game.nodeAt(i.path)||i.game.moves},this.curData=function(){return i.game.dataAt(i.path)||i.game.initial},this.goTo=function(e,t){var n,o;void 0===t&&(t=!0);var r="first"==e?Y.root:"prev"==e?i.path.init():"next"==e?null===(o=null===(n=i.game.nodeAt(i.path))||void 0===n?void 0:n.children[0])||void 0===o?void 0:o.data.path:i.game.pathAtMainlinePly("last");i.toPath(r||i.path,t)},this.canGoTo=function(e){return"prev"==e||"first"==e?!i.path.empty():!!i.curNode().children[0]},this.toPath=function(e,t){void 0===t&&(t=!0),i.path=e,i.pane="board",i.autoScrollRequested=!0,i.redrawGround(),i.redraw(),t&&i.focus()},this.focus=function(){var e;return null===(e=i.div)||void 0===e?void 0:e.focus()},this.toggleMenu=function(){i.pane="board"==i.pane?"menu":"board",i.redraw()},this.togglePgn=function(){i.pane="pgn"==i.pane?"board":"pgn",i.redraw()},this.orientation=function(){var e=i.opts.orientation||"white";return i.flipped?u(e):e},this.flip=function(){i.flipped=!i.flipped,i.pane="board",i.redrawGround(),i.redraw()},this.cgState=function(){var e,t=i.curData(),n="uci"in t?(e=>{if(e)return"@"===e[1]?[e.slice(2,4)]:[e.slice(0,2),e.slice(2,4)]})(t.uci):null===(e=i.opts.chessground)||void 0===e?void 0:e.lastMove;return{fen:t.fen,orientation:i.orientation(),check:t.check,lastMove:n,turnColor:t.turn}},this.analysisUrl=function(){return i.game.metadata.isLichess&&i.game.metadata.externalLink||"https://lichess.org/analysis/".concat(i.curData().fen.replace(" ","_"),"?color=").concat(i.orientation())},this.practiceUrl=function(){return"".concat(i.analysisUrl(),"#practice")},this.setGround=function(e){i.ground=e,i.redrawGround()},this.redrawGround=function(){return i.withGround((function(e){e.set(i.cgState()),e.setShapes(i.curData().shapes.map((function(e){return{orig:f(e.from),dest:f(e.to),brush:e.color}})))}))},this.withGround=function(e){return i.ground&&e(i.ground)},this.game=function(e,t){var n,i;void 0===t&&(t=!1);var o=ct(e)[0]||ct("*")[0],r=lt(o.headers).unwrap(),s=me(r.toSetup()),a=mt(o.comments||[]),c=new Map(Array.from(o.headers,(function(e){var t=e[0],n=e[1];return[t.toLowerCase(),n]}))),l=function(e,t){var n,i=e.get("source")||e.get("site"),o=null===(n=e.get("timecontrol"))||void 0===n?void 0:n.split("+").map((function(e){return parseInt(e)})),r=o&&o[0]?{initial:o[0],increment:o[1]||0}:void 0,s=e.get("orientation");return{externalLink:i&&i.match(/^https?:\/\//)?i:void 0,isLichess:!(!t||!(null==i?void 0:i.startsWith(t))),timeControl:r,orientation:"white"===s||"black"===s?s:void 0}}(c,t),u={fen:s,turn:r.turn,check:r.isCheck(),pos:r.clone(),comments:a.texts,shapes:a.shapes,clocks:{white:(null===(n=l.timeControl)||void 0===n?void 0:n.initial)||a.clock,black:(null===(i=l.timeControl)||void 0===i?void 0:i.initial)||a.clock}},d=ft(r,o.moves,l),A=function(e,t){var n=function(t,n){var i=e.get("".concat(t).concat(n));return"?"==i||""==i?void 0:i},i=function(e){var i=n(e,"");return{name:i,title:n(e,"title"),rating:parseInt(n(e,"elo")||"")||void 0,isLichessUser:t.isLichess&&!!(null==i?void 0:i.match(/^[a-z0-9][a-z0-9_-]{0,28}[a-z0-9]$/i))}};return{white:i("white"),black:i("black")}}(c,l);return new O(u,d,A,l)}(e.pgn,e.lichess),e.orientation=e.orientation||this.game.metadata.orientation,this.translate=(n=e.translate,function(e){return n&&n(e)||function(e){return y[e]}(e)}),this.path=this.game.pathAtMainlinePly(e.initialPly)},vt=(e,t)=>Math.abs(e-t),yt=e=>(t,n,i,o)=>vt(t,i)<2&&("white"===e?o===n+1||n<=1&&o===n+2&&t===i:o===n-1||n>=6&&o===n-2&&t===i),It=(e,t,n,i)=>{const o=vt(e,n),r=vt(t,i);return 1===o&&2===r||2===o&&1===r},kt=(e,t,n,i)=>vt(e,n)===vt(t,i),Mt=(e,t,n,i)=>e===n||t===i,xt=(e,t,n,i)=>kt(e,t,n,i)||Mt(e,t,n,i),Lt=(e,t,n)=>(i,o,r,s)=>vt(i,r)<2&&vt(o,s)<2||n&&o===s&&o===("white"===e?0:7)&&(4===i&&(2===r&&t.includes(0)||6===r&&t.includes(7))||t.includes(r));function St(e,t,n){const i=e.get(t);if(!i)return[];const o=B(t),r=i.role,s="pawn"===r?yt(i.color):"knight"===r?It:"bishop"===r?kt:"rook"===r?Mt:"queen"===r?xt:Lt(i.color,function(e,t){const n="white"===t?"1":"8",i=[];for(const[o,r]of e)o[1]===n&&r.color===t&&"rook"===r.role&&i.push(B(o)[0]);return i}(e,i.color),n);return C.filter((e=>(o[0]!==e[0]||o[1]!==e[1])&&s(o[0],o[1],e[0],e[1]))).map(S)}function Bt(e,...t){e&&setTimeout((()=>e(...t)),1)}function Ct(e){e.premovable.current&&(e.premovable.current=void 0,Bt(e.premovable.events.unset))}function Et(e){const t=e.predroppable;t.current&&(t.current=void 0,Bt(t.events.unset))}function Nt(e,t,n){const i=e.pieces.get(t),o=e.pieces.get(n);if(t===n||!i)return!1;const r=o&&o.color!==i.color?o:void 0;return n===e.selected&&Gt(e),Bt(e.events.move,t,n,r),function(e,t,n){if(!e.autoCastle)return!1;const i=e.pieces.get(t);if(!i||"king"!==i.role)return!1;const o=B(t),r=B(n);if(0!==o[1]&&7!==o[1]||o[1]!==r[1])return!1;4!==o[0]||e.pieces.has(n)||(6===r[0]?n=S([7,r[1]]):2===r[0]&&(n=S([0,r[1]])));const s=e.pieces.get(n);return!(!s||s.color!==i.color||"rook"!==s.role||(e.pieces.delete(t),e.pieces.delete(n),o[0]<r[0]?(e.pieces.set(S([6,r[1]]),i),e.pieces.set(S([5,r[1]]),s)):(e.pieces.set(S([2,r[1]]),i),e.pieces.set(S([3,r[1]]),s)),0))}(e,t,n)||(e.pieces.set(n,i),e.pieces.delete(t)),e.lastMove=[t,n],e.check=void 0,Bt(e.events.change),r||!0}function Rt(e,t,n,i){if(e.pieces.has(n)){if(!i)return!1;e.pieces.delete(n)}return Bt(e.events.dropNewPiece,t,n),e.pieces.set(n,t),e.lastMove=[n],e.check=void 0,Bt(e.events.change),e.movable.dests=void 0,e.turnColor=N(e.turnColor),!0}function Dt(e,t,n){const i=Nt(e,t,n);return i&&(e.movable.dests=void 0,e.turnColor=N(e.turnColor),e.animation.current=void 0),i}function jt(e,t,n){if(zt(e,t,n)){const i=Dt(e,t,n);if(i){const o=e.hold.stop();Gt(e);const r={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:o};return!0!==i&&(r.captured=i),Bt(e.movable.events.after,t,n,r),!0}}else if(function(e,t,n){var i,o;const r=null!==(o=null===(i=e.premovable.customDests)||void 0===i?void 0:i.get(t))&&void 0!==o?o:St(e.pieces,t,e.premovable.castle);return t!==n&&Zt(e,t)&&r.includes(n)}(e,t,n))return function(e,t,n,i){Et(e),e.premovable.current=[t,n],Bt(e.premovable.events.set,t,n,i)}(e,t,n,{ctrlKey:e.stats.ctrlKey}),Gt(e),!0;return Gt(e),!1}function Qt(e,t,n,i){const o=e.pieces.get(t);o&&(function(e,t,n){const i=e.pieces.get(t);return!(!i||t!==n&&e.pieces.has(n)||"both"!==e.movable.color&&(e.movable.color!==i.color||e.turnColor!==i.color))}(e,t,n)||i)?(e.pieces.delete(t),Rt(e,o,n,i),Bt(e.movable.events.afterNewPiece,o.role,n,{premove:!1,predrop:!1})):o&&function(e,t,n){const i=e.pieces.get(t),o=e.pieces.get(n);return!!i&&(!o||o.color!==e.movable.color)&&e.predroppable.enabled&&("pawn"!==i.role||"1"!==n[1]&&"8"!==n[1])&&e.movable.color===i.color&&e.turnColor!==i.color}(e,t,n)?function(e,t,n){Ct(e),e.predroppable.current={role:t,key:n},Bt(e.predroppable.events.set,t,n)}(e,o.role,n):(Ct(e),Et(e)),e.pieces.delete(t),Gt(e)}function Tt(e,t,n){if(Bt(e.events.select,t),e.selected){if(e.selected===t&&!e.draggable.enabled)return Gt(e),void e.hold.cancel();if((e.selectable.enabled||n)&&e.selected!==t&&jt(e,e.selected,t))return void(e.stats.dragged=!1)}(e.selectable.enabled||e.draggable.enabled)&&(Ut(e,t)||Zt(e,t))&&(Pt(e,t),e.hold.start())}function Pt(e,t){e.selected=t,Zt(e,t)?e.premovable.customDests||(e.premovable.dests=St(e.pieces,t,e.premovable.castle)):e.premovable.dests=void 0}function Gt(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function Ut(e,t){const n=e.pieces.get(t);return!!n&&("both"===e.movable.color||e.movable.color===n.color&&e.turnColor===n.color)}const zt=(e,t,n)=>{var i,o;return t!==n&&Ut(e,t)&&(e.movable.free||!!(null===(o=null===(i=e.movable.dests)||void 0===i?void 0:i.get(t))||void 0===o?void 0:o.includes(n)))};function Zt(e,t){const n=e.pieces.get(t);return!!n&&e.premovable.enabled&&e.movable.color===n.color&&e.turnColor!==n.color}function Wt(e){const t=e.premovable.current;if(!t)return!1;const n=t[0],i=t[1];let o=!1;if(zt(e,n,i)){const t=Dt(e,n,i);if(t){const r={premove:!0};!0!==t&&(r.captured=t),Bt(e.movable.events.after,n,i,r),o=!0}}return Ct(e),o}function Yt(e){Ct(e),Et(e),Gt(e)}function Ot(e){e.movable.color=e.movable.dests=e.animation.current=void 0,Yt(e)}function _t(e,t,n){let i=Math.floor(8*(e[0]-n.left)/n.width);t||(i=7-i);let o=7-Math.floor(8*(e[1]-n.top)/n.height);return t||(o=7-o),i>=0&&i<8&&o>=0&&o<8?S([i,o]):void 0}const Ft=e=>"white"===e.orientation,Ht="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",Kt={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},Vt={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};function Jt(e){"start"===e&&(e=Ht);const t=new Map;let n=7,i=0;for(const o of e)switch(o){case" ":case"[":return t;case"/":if(--n,n<0)return t;i=0;break;case"~":{const e=t.get(S([i-1,n]));e&&(e.promoted=!0);break}default:{const e=o.charCodeAt(0);if(e<57)i+=e-48;else{const e=o.toLowerCase();t.set(S([i,n]),{role:Kt[e],color:o===e?"black":"white"}),++i}}}return t}function qt(e,t){t.animation&&($t(e.animation,t.animation),(e.animation.duration||0)<70&&(e.animation.enabled=!1))}function Xt(e,t){var n,i,o;if((null===(n=t.movable)||void 0===n?void 0:n.dests)&&(e.movable.dests=void 0),(null===(i=t.drawable)||void 0===i?void 0:i.autoShapes)&&(e.drawable.autoShapes=[]),$t(e,t),t.fen&&(e.pieces=Jt(t.fen),e.drawable.shapes=(null===(o=t.drawable)||void 0===o?void 0:o.shapes)||[]),"check"in t&&function(e,t){if(e.check=void 0,!0===t&&(t=e.turnColor),t)for(const[n,i]of e.pieces)"king"===i.role&&i.color===t&&(e.check=n)}(e,t.check||!1),"lastMove"in t&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&Pt(e,e.selected),qt(e,t),!e.movable.rookCastle&&e.movable.dests){const t="white"===e.movable.color?"1":"8",n="e"+t,i=e.movable.dests.get(n),o=e.pieces.get(n);if(!i||!o||"king"!==o.role)return;e.movable.dests.set(n,i.filter((e=>!(e==="a"+t&&i.includes("c"+t)||e==="h"+t&&i.includes("g"+t)))))}}function $t(e,t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Object.prototype.hasOwnProperty.call(e,n)&&en(e[n])&&en(t[n])?$t(e[n],t[n]):e[n]=t[n])}function en(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}const tn=(e,t)=>t.animation.enabled?function(e,t){const n=new Map(t.pieces),i=e(t),o=function(e,t){const n=new Map,i=[],o=new Map,r=[],s=[],a=new Map;let c,l,u;for(const[t,n]of e)a.set(t,on(t,n));for(const e of L)c=t.pieces.get(e),l=a.get(e),c?l?D(c,l.piece)||(r.push(l),s.push(on(e,c))):s.push(on(e,c)):l&&r.push(l);for(const e of s)l=rn(e,r.filter((t=>D(e.piece,t.piece)))),l&&(u=[l.pos[0]-e.pos[0],l.pos[1]-e.pos[1]],n.set(e.key,u.concat(u)),i.push(l.key));for(const e of r)i.includes(e.key)||o.set(e.key,e.piece);return{anims:n,fadings:o}}(n,t);if(o.anims.size||o.fadings.size){const e=t.animation.current&&t.animation.current.start;t.animation.current={start:performance.now(),frequency:1/t.animation.duration,plan:o},e||sn(t,performance.now())}else t.dom.redraw();return i}(e,t):nn(e,t);function nn(e,t){const n=e(t);return t.dom.redraw(),n}const on=(e,t)=>({key:e,pos:B(e),piece:t}),rn=(e,t)=>t.sort(((t,n)=>R(e.pos,t.pos)-R(e.pos,n.pos)))[0];function sn(e,t){const n=e.animation.current;if(void 0===n)return void(e.dom.destroyed||e.dom.redrawNow());const i=1-(t-n.start)*n.frequency;if(i<=0)e.animation.current=void 0,e.dom.redrawNow();else{const t=an(i);for(const e of n.plan.anims.values())e[2]=e[0]*t,e[3]=e[1]*t;e.dom.redrawNow(!0),requestAnimationFrame(((t=performance.now())=>sn(e,t)))}}const an=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,cn=["green","red","blue","yellow"];function ln(e,t){if(t.touches&&t.touches.length>1)return;t.stopPropagation(),t.preventDefault(),t.ctrlKey?Gt(e):Yt(e);const n=G(t),i=_t(n,Ft(e),e.dom.bounds());i&&(e.drawable.current={orig:i,pos:n,brush:pn(t),snapToValidMove:e.drawable.defaultSnapToValidMove},un(e))}function un(e){requestAnimationFrame((()=>{const t=e.drawable.current;if(t){const n=_t(t.pos,Ft(e),e.dom.bounds());n||(t.snapToValidMove=!1);const i=t.snapToValidMove?function(e,t,n,i){const o=B(e),r=C.filter((e=>xt(o[0],o[1],e[0],e[1])||It(o[0],o[1],e[0],e[1]))),s=r.map((e=>Z(S(e),n,i))).map((e=>R(t,e))),[,a]=s.reduce(((e,t,n)=>e[0]<t?e:[t,n]),[s[0],0]);return S(r[a])}(t.orig,t.pos,Ft(e),e.dom.bounds()):n;i!==t.mouseSq&&(t.mouseSq=i,t.dest=i!==t.orig?i:void 0,e.dom.redrawNow()),un(e)}}))}function dn(e,t){e.drawable.current&&(e.drawable.current.pos=G(t))}function An(e){const t=e.drawable.current;t&&(t.mouseSq&&function(e,t){const n=e=>e.orig===t.orig&&e.dest===t.dest,i=e.shapes.find(n);i&&(e.shapes=e.shapes.filter((e=>!n(e)))),i&&i.brush===t.brush||e.shapes.push({orig:t.orig,dest:t.dest,brush:t.brush}),gn(e)}(e.drawable,t),hn(e))}function hn(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function pn(e){var t;const n=(e.shiftKey||e.ctrlKey)&&U(e),i=e.altKey||e.metaKey||(null===(t=e.getModifierState)||void 0===t?void 0:t.call(e,"AltGraph"));return cn[(n?1:0)+(i?2:0)]}function gn(e){e.onChange&&e.onChange(e.shapes)}function mn(e){requestAnimationFrame((()=>{var t;const n=e.draggable.current;if(!n)return;(null===(t=e.animation.current)||void 0===t?void 0:t.plan.anims.has(n.orig))&&(e.animation.current=void 0);const i=e.pieces.get(n.orig);if(i&&D(i,n.piece)){if(!n.started&&R(n.pos,n.origPos)>=Math.pow(e.draggable.distance,2)&&(n.started=!0),n.started){if("function"==typeof n.element){const e=n.element();if(!e)return;e.cgDragging=!0,e.classList.add("dragging"),n.element=e}const t=e.dom.bounds();Q(n.element,[n.pos[0]-t.left-t.width/16,n.pos[1]-t.top-t.height/16]),n.keyHasChanged||(n.keyHasChanged=n.orig!==_t(n.pos,Ft(e),t))}}else wn(e);mn(e)}))}function fn(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.pos=G(t))}function bn(e,t){const n=e.draggable.current;if(!n)return;if("touchend"===t.type&&!1!==t.cancelable&&t.preventDefault(),"touchend"===t.type&&n.originTarget!==t.target&&!n.newPiece)return void(e.draggable.current=void 0);Ct(e),Et(e);const i=_t(G(t)||n.pos,Ft(e),e.dom.bounds());i&&n.started&&n.orig!==i?n.newPiece?Qt(e,n.orig,i,n.force):(e.stats.ctrlKey=t.ctrlKey,jt(e,n.orig,i)&&(e.stats.dragged=!0)):n.newPiece?e.pieces.delete(n.orig):e.draggable.deleteOnDropOff&&!i&&(e.pieces.delete(n.orig),Bt(e.events.change)),(n.orig!==n.previouslySelected&&!n.keyHasChanged||n.orig!==i&&i)&&e.selectable.enabled||Gt(e),vn(e),e.draggable.current=void 0,e.dom.redraw()}function wn(e){const t=e.draggable.current;t&&(t.newPiece&&e.pieces.delete(t.orig),e.draggable.current=void 0,Gt(e),vn(e),e.dom.redraw())}function vn(e){const t=e.dom.elements;t.ghost&&P(t.ghost,!1)}function yn(e,t){let n=e.dom.elements.board.firstChild;for(;n;){if(n.cgKey===t&&"PIECE"===n.tagName)return n;n=n.nextSibling}}function In(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}const kn={hilitePrimary:{key:"hilitePrimary",color:"#3291ff",opacity:1,lineWidth:1},hiliteWhite:{key:"hiliteWhite",color:"#ffffff",opacity:1,lineWidth:1}};function Mn({orig:e,dest:t,brush:n,piece:i,modifiers:o,customSvg:r,label:s},a,c,l){var u,d,A;return[l.width,l.height,c,e,t,n,a&&"-",i&&xn(i),o&&(A=o,[A.lineWidth,A.hilite&&"*"].filter((e=>e)).join(",")),r&&`custom-${Ln(r.html)},${null!==(d=null===(u=r.center)||void 0===u?void 0:u[0])&&void 0!==d?d:"o"}`,s&&`label-${Ln(s.text)}`].filter((e=>e)).join(",")}function xn(e){return[e.color,e.role,e.scale].filter((e=>e)).join(",")}function Ln(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)>>>0;return t.toString()}function Sn(e){return["#ffffff","#fff","white"].includes(e.color)?kn.hilitePrimary:kn.hiliteWhite}function Bn(e){const t=Dn(Rn("marker"),{id:"arrowhead-"+e.key,orient:"auto",overflow:"visible",markerWidth:4,markerHeight:4,refX:e.key.startsWith("hilite")?1.86:2.05,refY:2});return t.appendChild(Dn(Rn("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function Cn(e,t,n,i,o,r){var s;const a=.4*.75**e.text.length,c=Un(n,i,o),l="tr"===r?.4:0,u=Dn(Rn("g"),{transform:`translate(${c[0]+l},${c[1]-l})`,cgHash:t});u.appendChild(Dn(Rn("circle"),{r:.2,"fill-opacity":r?1:.8,"stroke-opacity":r?1:.7,"stroke-width":.03,fill:null!==(s=e.fill)&&void 0!==s?s:"#666",stroke:"white"}));const d=Dn(Rn("text"),{"font-size":a,"font-family":"Noto Sans","text-anchor":"middle",fill:"white",y:.13*.75**e.text.length});return d.innerHTML=e.text,u.appendChild(d),u}function En(e,t){return"white"===t?e:[7-e[0],7-e[1]]}function Nn(e,t){return!0===(e&&t.has(e)&&t.get(e).size>1)}function Rn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Dn(e,t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.setAttribute(n,t[n]);return e}function jn(e,t){return t?{color:e.color,opacity:Math.round(10*e.opacity)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth),key:[e.key,t.lineWidth].filter((e=>e)).join("")}:e}function Qn(e,t){return(e.lineWidth||10)*(t?.85:1)/64}function Tn(e,t){return(e.opacity||1)*(t?.9:1)}function Pn(e,t){const n=Math.min(1,t.width/t.height),i=Math.min(1,t.height/t.width);return[(e[0]-3.5)*n,(3.5-e[1])*i]}function Gn(e,t,n=!0){const i=Math.atan2(t[1]-e[1],t[0]-e[0])+Math.PI;return n?(Math.round(8*i/Math.PI)+16)%16:i}function Un(e,t,n){let i=function(e,t){return Math.sqrt([e[0]-t[0],e[1]-t[1]].reduce(((e,t)=>e+t*t),0))}(e,t);const o=Gn(e,t,!1);if(n&&(i-=33/64,n.size>1)){i-=10/64;const o=Gn(e,t);(n.has((o+1)%16)||n.has((o+15)%16))&&1&o&&(i-=.4)}return[e[0]-Math.cos(o)*i,e[1]-Math.sin(o)*i].map((e=>e+.5))}function zn(e,t){const n=z("coords",t);let i;for(const t of e)i=z("coord"),i.textContent=t,n.appendChild(i);return n}function Zn(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}const Wn=e=>t=>{e.draggable.current?wn(e):e.drawable.current?hn(e):t.shiftKey||U(t)?e.drawable.enabled&&ln(e,t):e.viewOnly||(e.dropmode.active?function(e,t){if(!e.dropmode.active)return;Ct(e),Et(e);const n=e.dropmode.piece;if(n){e.pieces.set("a0",n);const i=G(t),o=i&&_t(i,Ft(e),e.dom.bounds());o&&Qt(e,"a0",o)}e.dom.redraw()}(e,t):function(e,t){if(!e.trustAllEvents&&!t.isTrusted)return;if(void 0!==t.buttons&&t.buttons>1)return;if(t.touches&&t.touches.length>1)return;const n=e.dom.bounds(),i=G(t),o=_t(i,Ft(e),n);if(!o)return;const r=e.pieces.get(o),s=e.selected;var a;if(s||!e.drawable.enabled||!e.drawable.eraseOnClick&&r&&r.color===e.turnColor||(a=e).drawable.shapes.length&&(a.drawable.shapes=[],a.dom.redraw(),gn(a.drawable)),!1!==t.cancelable&&(!t.touches||e.blockTouchScroll||r||s||function(e,t){const n=Ft(e),i=e.dom.bounds(),o=Math.pow(i.width/8,2);for(const r of e.pieces.keys()){const e=Z(r,n,i);if(R(e,t)<=o)return!0}return!1}(e,i)))t.preventDefault();else if(t.touches)return;const c=!!e.premovable.current,l=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&zt(e,e.selected,o)?tn((e=>Tt(e,o)),e):Tt(e,o);const u=e.selected===o,d=yn(e,o);if(r&&d&&u&&function(e,t){const n=e.pieces.get(t);return!!n&&e.draggable.enabled&&("both"===e.movable.color||e.movable.color===n.color&&(e.turnColor===n.color||e.premovable.enabled))}(e,o)){e.draggable.current={orig:o,piece:r,origPos:i,pos:i,started:e.draggable.autoDistance&&e.stats.dragged,element:d,previouslySelected:s,originTarget:t.target,keyHasChanged:!1},d.cgDragging=!0,d.classList.add("dragging");const a=e.dom.elements.ghost;a&&(a.className=`ghost ${r.color} ${r.role}`,Q(a,j(n)(B(o),Ft(e))),P(a,!0)),mn(e)}else c&&Ct(e),l&&Et(e);e.dom.redraw()}(e,t))},Yn=(e,t,n)=>i=>{e.drawable.current?e.drawable.enabled&&n(e,i):e.viewOnly||t(e,i)};function On(e){var t,n;const i=e.dom.elements.wrap.getBoundingClientRect(),o=e.dom.elements.container,r=i.height/i.width,s=8*Math.floor(i.width*window.devicePixelRatio/8)/window.devicePixelRatio,a=s*r;o.style.width=s+"px",o.style.height=a+"px",e.dom.bounds.clear(),null===(t=e.addDimensionsCssVarsTo)||void 0===t||t.style.setProperty("--cg-width",s+"px"),null===(n=e.addDimensionsCssVarsTo)||void 0===n||n.style.setProperty("--cg-height",a+"px")}const _n=e=>"PIECE"===e.tagName,Fn=e=>"SQUARE"===e.tagName;function Hn(e,t){for(const n of t)e.dom.elements.board.removeChild(n)}function Kn(e,t){const n=e[1];return`${t?10-n:3+n}`}const Vn=e=>`${e.color} ${e.role}`;function Jn(e,t,n){const i=e.get(t);i?e.set(t,`${i} ${n}`):e.set(t,n)}function qn(e,t,n){const i=e.get(t);i?i.push(n):e.set(t,[n])}const Xn=e=>{var t,n,i;return[e.orig,null===(t=e.piece)||void 0===t?void 0:t.role,null===(n=e.piece)||void 0===n?void 0:n.color,null===(i=e.piece)||void 0===i?void 0:i.scale].join(",")};function $n(e,t){const n={pieces:Jt(Ht),orientation:"white",turnColor:"white",coordinates:!0,ranksPosition:"right",autoCastle:!0,viewOnly:!1,disableContextMenu:!1,addPieceZIndex:!1,blockTouchScroll:!1,pieceKey:!1,trustAllEvents:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15},purple:{key:"purple",color:"#68217a",opacity:.65,lineWidth:10},pink:{key:"pink",color:"#ee2080",opacity:.5,lineWidth:10},white:{key:"white",color:"white",opacity:1,lineWidth:10}},prevSvgHash:""},hold:E()};function i(){const t="dom"in n?n.dom.unbind:void 0,i=function(e,t){e.innerHTML="",e.classList.add("cg-wrap");for(const n of I)e.classList.toggle("orientation-"+n,t.orientation===n);e.classList.toggle("manipulable",!t.viewOnly);const n=z("cg-container");e.appendChild(n);const i=z("cg-board");let o,r,s,a;if(n.appendChild(i),t.drawable.visible&&(o=Dn(Rn("svg"),{class:"cg-shapes",viewBox:"-4 -4 8 8",preserveAspectRatio:"xMidYMid slice"}),o.appendChild(function(){const e=Rn("defs"),t=Dn(Rn("filter"),{id:"cg-filter-blur"});return t.appendChild(Dn(Rn("feGaussianBlur"),{stdDeviation:"0.019"})),e.appendChild(t),e}()),o.appendChild(Rn("g")),r=Dn(Rn("svg"),{class:"cg-custom-svgs",viewBox:"-3.5 -3.5 8 8",preserveAspectRatio:"xMidYMid slice"}),r.appendChild(Rn("g")),s=z("cg-auto-pieces"),n.appendChild(o),n.appendChild(r),n.appendChild(s)),t.coordinates){const e="black"===t.orientation?" black":"",i="left"===t.ranksPosition?" left":"";n.appendChild(zn(M,"ranks"+e+i)),n.appendChild(zn(k,"files"+e))}return t.draggable.enabled&&t.draggable.showGhost&&(a=z("piece","ghost"),P(a,!1),n.appendChild(a)),{board:i,container:n,wrap:e,ghost:a,svg:o,customSvg:r,autoPieces:s}}(e,n),o=function(e){let t;const n=()=>(void 0===t&&(t=i.board.getBoundingClientRect()),t);return n.clear=()=>{t=void 0},n}(),r=e=>{(function(e){const t=Ft(e),n=j(e.dom.bounds()),i=e.dom.elements.board,o=e.pieces,r=e.animation.current,s=r?r.plan.anims:new Map,a=r?r.plan.fadings:new Map,c=e.draggable.current,l=function(e){var t,n,i;const o=new Map;if(e.lastMove&&e.highlight.lastMove)for(const t of e.lastMove)Jn(o,t,"last-move");if(e.check&&e.highlight.check&&Jn(o,e.check,"check"),e.selected&&(Jn(o,e.selected,"selected"),e.movable.showDests)){const r=null===(t=e.movable.dests)||void 0===t?void 0:t.get(e.selected);if(r)for(const t of r)Jn(o,t,"move-dest"+(e.pieces.has(t)?" oc":""));const s=null!==(i=null===(n=e.premovable.customDests)||void 0===n?void 0:n.get(e.selected))&&void 0!==i?i:e.premovable.dests;if(s)for(const t of s)Jn(o,t,"premove-dest"+(e.pieces.has(t)?" oc":""))}const r=e.premovable.current;if(r)for(const e of r)Jn(o,e,"current-premove");else e.predroppable.current&&Jn(o,e.predroppable.current.key,"current-premove");const s=e.exploding;if(s)for(const e of s.keys)Jn(o,e,"exploding"+s.stage);return e.highlight.custom&&e.highlight.custom.forEach(((e,t)=>{Jn(o,t,e)})),o}(e),u=new Set,d=new Set,A=new Map,h=new Map;let p,g,m,f,b,w,v,y,I,k;for(g=i.firstChild;g;){if(p=g.cgKey,_n(g))if(m=o.get(p),b=s.get(p),w=a.get(p),f=g.cgPiece,!g.cgDragging||c&&c.orig===p||(g.classList.remove("dragging"),Q(g,n(B(p),t)),g.cgDragging=!1),!w&&g.cgFading&&(g.cgFading=!1,g.classList.remove("fading")),m){if(b&&g.cgAnimating&&f===Vn(m)){const e=B(p);e[0]+=b[2],e[1]+=b[3],g.classList.add("anim"),Q(g,n(e,t))}else g.cgAnimating&&(g.cgAnimating=!1,g.classList.remove("anim"),Q(g,n(B(p),t)),e.addPieceZIndex&&(g.style.zIndex=Kn(B(p),t)));f!==Vn(m)||w&&g.cgFading?w&&f===Vn(w)?(g.classList.add("fading"),g.cgFading=!0):qn(A,f,g):u.add(p)}else qn(A,f,g);else if(Fn(g)){const e=g.className;l.get(p)===e?d.add(p):qn(h,e,g)}g=g.nextSibling}for(const[e,o]of l)if(!d.has(e)){I=h.get(o),k=I&&I.pop();const r=n(B(e),t);if(k)k.cgKey=e,Q(k,r);else{const t=z("square",o);t.cgKey=e,Q(t,r),i.insertBefore(t,i.firstChild)}}for(const[r,a]of o)if(b=s.get(r),!u.has(r))if(v=A.get(Vn(a)),y=v&&v.pop(),y){y.cgKey=r,y.cgFading&&(y.classList.remove("fading"),y.cgFading=!1);const i=B(r);e.addPieceZIndex&&(y.style.zIndex=Kn(i,t)),b&&(y.cgAnimating=!0,y.classList.add("anim"),i[0]+=b[2],i[1]+=b[3]),Q(y,n(i,t))}else{const o=Vn(a),s=z("piece",o),c=B(r);s.cgPiece=o,s.cgKey=r,b&&(s.cgAnimating=!0,c[0]+=b[2],c[1]+=b[3]),Q(s,n(c,t)),e.addPieceZIndex&&(s.style.zIndex=Kn(c,t)),i.appendChild(s)}for(const t of A.values())Hn(e,t);for(const t of h.values())Hn(e,t)})(a),i.autoPieces&&function(e,t){!function(t,n,i){const o=new Map,r=[];for(const e of t)o.set(e.hash,!1);let s,a=n.firstElementChild;for(;a;)s=a.getAttribute("cgHash"),o.has(s)?o.set(s,!0):r.push(a),a=a.nextElementSibling;for(const e of r)n.removeChild(e);for(const i of t)o.get(i.hash)||n.appendChild(function(e,{shape:t,hash:n},i){var o,r,s;const a=t.orig,c=null===(o=t.piece)||void 0===o?void 0:o.role,l=null===(r=t.piece)||void 0===r?void 0:r.color,u=null===(s=t.piece)||void 0===s?void 0:s.scale,d=z("piece",`${c} ${l}`);return d.setAttribute("cgHash",n),d.cgKey=a,d.cgScale=u,T(d,j(i)(B(a),Ft(e)),u),d}(e,i,e.dom.bounds()))}(e.drawable.autoShapes.filter((e=>e.piece)).map((e=>({shape:e,hash:Xn(e),current:!1}))),t)}(a,i.autoPieces),!e&&i.svg&&function(e,t,n){var i;const o=e.drawable,r=o.current,s=r&&r.mouseSq?r:void 0,a=new Map,c=e.dom.bounds(),l=o.autoShapes.filter((e=>!e.piece));for(const t of o.shapes.concat(l).concat(s?[s]:[])){if(!t.dest)continue;const n=null!==(i=a.get(t.dest))&&void 0!==i?i:new Set,o=Pn(En(B(t.orig),e.orientation),c),r=Pn(En(B(t.dest),e.orientation),c);n.add(Gn(o,r)),a.set(t.dest,n)}const u=o.shapes.concat(l).map((e=>({shape:e,current:!1,hash:Mn(e,Nn(e.dest,a),!1,c)})));s&&u.push({shape:s,current:!0,hash:Mn(s,Nn(s.dest,a),!0,c)});const d=u.map((e=>e.hash)).join(";");if(d===e.drawable.prevSvgHash)return;e.drawable.prevSvgHash=d;const A=t.querySelector("defs");!function(e,t,n){var i;const o=new Map;let r;for(const n of t.filter((e=>e.shape.dest&&e.shape.brush)))r=jn(e.brushes[n.shape.brush],n.shape.modifiers),(null===(i=n.shape.modifiers)||void 0===i?void 0:i.hilite)&&o.set(Sn(r).key,Sn(r)),o.set(r.key,r);const s=new Set;let a=n.firstElementChild;for(;a;)s.add(a.getAttribute("cgKey")),a=a.nextElementSibling;for(const[e,t]of o.entries())s.has(e)||n.appendChild(Bn(t))}(o,u,A),function(t,n,i,r){const s=new Map;for(const e of t)s.set(e.hash,!1);for(const e of[n,i]){const t=[];let n,i=e.firstElementChild;for(;i;)n=i.getAttribute("cgHash"),s.has(n)?s.set(n,!0):t.push(i),i=i.nextElementSibling;for(const n of t)e.removeChild(n)}for(const r of t.filter((e=>!s.get(e.hash))))for(const t of function(e,{shape:t,current:n,hash:i},o,r,s){var a,c;const l=Pn(En(B(t.orig),e.orientation),s),u=t.dest?Pn(En(B(t.dest),e.orientation),s):l,d=t.brush&&jn(o[t.brush],t.modifiers),A=r.get(t.dest),h=[];if(d){const e=Dn(Rn("g"),{cgHash:i});h.push({el:e}),l[0]!==u[0]||l[1]!==u[1]?e.appendChild(function(e,t,n,i,o,r){var s;function a(s){var a;const c=function(e){return(e?20:10)/64}(r&&!o),l=i[0]-n[0],u=i[1]-n[1],d=Math.atan2(u,l),A=Math.cos(d)*c,h=Math.sin(d)*c;return Dn(Rn("line"),{stroke:s?Sn(t).color:t.color,"stroke-width":Qn(t,o)+(s?.04:0),"stroke-linecap":"round","marker-end":`url(#arrowhead-${s?Sn(t).key:t.key})`,opacity:(null===(a=e.modifiers)||void 0===a?void 0:a.hilite)?1:Tn(t,o),x1:n[0],y1:n[1],x2:i[0]-A,y2:i[1]-h})}if(!(null===(s=e.modifiers)||void 0===s?void 0:s.hilite))return a(!1);const c=Rn("g"),l=Dn(Rn("g"),{filter:"url(#cg-filter-blur)"});return l.appendChild(function(e,t){const n={from:[Math.floor(Math.min(e[0],t[0])),Math.floor(Math.min(e[1],t[1]))],to:[Math.ceil(Math.max(e[0],t[0])),Math.ceil(Math.max(e[1],t[1]))]};return Dn(Rn("rect"),{x:n.from[0],y:n.from[1],width:n.to[0]-n.from[0],height:n.to[1]-n.from[1],fill:"none",stroke:"none"})}(n,i)),l.appendChild(a(!0)),c.appendChild(l),c.appendChild(a(!1)),c}(t,d,l,u,n,Nn(t.dest,r))):e.appendChild(function(e,t,n,i){const o=[3/64,4/64],r=(i.width+i.height)/(4*Math.max(i.width,i.height));return Dn(Rn("circle"),{stroke:e.color,"stroke-width":o[n?0:1],fill:"none",opacity:Tn(e,n),cx:t[0],cy:t[1],r:r-o[1]/2})}(o[t.brush],l,n,s))}if(t.label){const e=t.label;null!==(a=e.fill)&&void 0!==a||(e.fill=t.brush&&o[t.brush].color);const n=t.brush?void 0:"tr";h.push({el:Cn(e,i,l,u,A,n),isCustom:!0})}if(t.customSvg){const e=null!==(c=t.customSvg.center)&&void 0!==c?c:"orig",[n,o]="label"===e?Un(l,u,A).map((e=>e-.5)):"dest"===e?u:l,r=Dn(Rn("g"),{transform:`translate(${n},${o})`,cgHash:i});r.innerHTML=`<svg width="1" height="1" viewBox="0 0 100 100">${t.customSvg.html}</svg>`,h.push({el:r,isCustom:!0})}return h}(e,r,o.brushes,a,c))t.isCustom?i.appendChild(t.el):n.appendChild(t.el)}(u,t.querySelector("g"),n.querySelector("g"))}(a,i.svg,i.customSvg)},s=()=>{On(a),function(e){const t=Ft(e),n=j(e.dom.bounds());let i=e.dom.elements.board.firstChild;for(;i;)(_n(i)&&!i.cgAnimating||Fn(i))&&Q(i,n(B(i.cgKey),t)),i=i.nextSibling}(a),i.autoPieces&&function(e){var t;const n=Ft(e),i=j(e.dom.bounds());let o=null===(t=e.dom.elements.autoPieces)||void 0===t?void 0:t.firstChild;for(;o;)T(o,i(B(o.cgKey),n),o.cgScale),o=o.nextSibling}(a)},a=n;return a.dom={elements:i,bounds:o,redraw:ei(r),redrawNow:r,unbind:t},a.drawable.prevSvgHash="",On(a),r(!1),function(e,t){const n=e.dom.elements.board;if("ResizeObserver"in window&&new ResizeObserver(t).observe(e.dom.elements.wrap),(e.disableContextMenu||e.drawable.enabled)&&n.addEventListener("contextmenu",(e=>e.preventDefault())),e.viewOnly)return;const i=Wn(e);n.addEventListener("touchstart",i,{passive:!1}),n.addEventListener("mousedown",i,{passive:!1})}(a,s),t||(a.dom.unbind=function(e,t){const n=[];if("ResizeObserver"in window||n.push(Zn(document.body,"chessground.resize",t)),!e.viewOnly){const t=Yn(e,fn,dn),i=Yn(e,bn,An);for(const e of["touchmove","mousemove"])n.push(Zn(document,e,t));for(const e of["touchend","mouseup"])n.push(Zn(document,e,i));const o=()=>e.dom.bounds.clear();n.push(Zn(document,"scroll",o,{capture:!0,passive:!0})),n.push(Zn(window,"resize",o,{passive:!0}))}return()=>n.forEach((e=>e()))}(a,s)),a.events.insert&&a.events.insert(i),a}return Xt(n,t||{}),function(e,t){function n(){!function(e){e.orientation=N(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0}(e),t()}return{set(t){t.orientation&&t.orientation!==e.orientation&&n(),qt(e,t),(t.fen?tn:nn)((e=>Xt(e,t)),e)},state:e,getFen:()=>{return t=e.pieces,x.map((e=>k.map((n=>{const i=t.get(n+e);if(i){let e=Vt[i.role];return"white"===i.color&&(e=e.toUpperCase()),i.promoted&&(e+="~"),e}return"1"})).join(""))).join("/").replace(/1{2,}/g,(e=>e.length.toString()));var t},toggleOrientation:n,setPieces(t){tn((e=>function(e,t){for(const[n,i]of t)i?e.pieces.set(n,i):e.pieces.delete(n)}(e,t)),e)},selectSquare(t,n){t?tn((e=>Tt(e,t,n)),e):e.selected&&(Gt(e),e.dom.redraw())},move(t,n){tn((e=>Nt(e,t,n)),e)},newPiece(t,n){tn((e=>Rt(e,t,n)),e)},playPremove(){if(e.premovable.current){if(tn(Wt,e))return!0;e.dom.redraw()}return!1},playPredrop(t){if(e.predroppable.current){const n=function(e,t){const n=e.predroppable.current;let i=!1;return!!n&&(t(n)&&Rt(e,{role:n.role,color:e.movable.color},n.key)&&(Bt(e.movable.events.afterNewPiece,n.role,n.key,{premove:!1,predrop:!0}),i=!0),Et(e),i)}(e,t);return e.dom.redraw(),n}return!1},cancelPremove(){nn(Ct,e)},cancelPredrop(){nn(Et,e)},cancelMove(){nn((e=>{Yt(e),wn(e)}),e)},stop(){nn((e=>{Ot(e),wn(e)}),e)},explode(t){!function(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout((()=>{In(e,2),setTimeout((()=>In(e,void 0)),120)}),120)}(e,t)},setAutoShapes(t){nn((e=>e.drawable.autoShapes=t),e)},setShapes(t){nn((e=>e.drawable.shapes=t),e)},getKeyAtDomPos:t=>_t(t,Ft(e),e.dom.bounds()),redrawAll:t,dragNewPiece(t,n,i){!function(e,t,n,i){const o="a0";e.pieces.set(o,t),e.dom.redraw();const r=G(n);e.draggable.current={orig:o,piece:t,origPos:r,pos:r,started:!0,element:()=>yn(e,o),originTarget:n.target,newPiece:!0,force:!!i,keyHasChanged:!1},mn(e)}(e,t,n,i)},destroy(){Ot(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}(i(),i)}function ei(e){let t=!1;return()=>{t||(t=!0,requestAnimationFrame((()=>{e(),t=!1})))}}function ti(e,t,n,i,o){return{sel:e,data:t,children:n,text:i,elm:o,key:void 0===t?void 0:t.key}}const ni=Array.isArray;function ii(e){return"string"==typeof e||"number"==typeof e||e instanceof String||e instanceof Number}function oi(e,t,n){if(e.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==t)for(let e=0;e<t.length;++e){const n=t[e];if("string"==typeof n)continue;const i=n.data;void 0!==i&&oi(i,n.children,n.sel)}}function ri(e,t,n){let i,o,r,s={};if(void 0!==n?(null!==t&&(s=t),ni(n)?i=n:ii(n)?o=n.toString():n&&n.sel&&(i=[n])):null!=t&&(ni(t)?i=t:ii(t)?o=t.toString():t&&t.sel?i=[t]:s=t),void 0!==i)for(r=0;r<i.length;++r)ii(i[r])&&(i[r]=ti(void 0,void 0,void 0,i[r],void 0));return"s"!==e[0]||"v"!==e[1]||"g"!==e[2]||3!==e.length&&"."!==e[3]&&"#"!==e[3]||oi(s,i,e),ti(e,s,i,o,void 0)}var si=function(e,t,n,i){return void 0===i&&(i=!0),ai((function(o){return o.addEventListener(e,(function(e){var i=t(e);return!1===i&&e.preventDefault(),null==n||n(),i}),{passive:i})}))};function ai(e){return{insert:function(t){return e(t.elm)}}}var ci=function(e){return function(t){(function(e){return e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement})(t)||("ArrowLeft"==t.key?e.goTo("prev"):"ArrowRight"==t.key?e.goTo("next"):"f"==t.key&&e.flip())}},li=function(e){return ri("div.lpv__menu.lpv__pane",[ri("button.lpv__menu__entry.lpv__menu__flip.lpv__fbt",{hook:si("click",e.flip)},e.translate("flipTheBoard")),ri("a.lpv__menu__entry.lpv__menu__analysis.lpv__fbt",{attrs:{href:e.analysisUrl(),target:"_blank"}},e.translate("analysisBoard")),ri("a.lpv__menu__entry.lpv__menu__practice.lpv__fbt",{attrs:{href:e.practiceUrl(),target:"_blank"}},e.translate("practiceWithComputer")),e.opts.menu.getPgn.enabled?ri("button.lpv__menu__entry.lpv__menu__pgn.lpv__fbt",{hook:si("click",e.togglePgn)},e.translate("getPgn")):void 0,ui(e)])},ui=function(e){var t=e.game.metadata.externalLink;return t&&ri("a.lpv__menu__entry.lpv__fbt",{attrs:{href:t,target:"_blank"}},e.translate(e.game.metadata.isLichess?"viewOnLichess":"viewOnSite"))},di=function(e){return ri("div.lpv__controls",["board"==e.pane?void 0:Ai(e,"first","step-backward"),Ai(e,"prev","left-open"),ri("button.lpv__fbt.lpv__controls__menu.lpv__icon",{class:{active:"board"!=e.pane,"lpv__icon-ellipsis-vert":"board"==e.pane},hook:si("click",e.toggleMenu)},"board"==e.pane?void 0:"X"),Ai(e,"next","right-open"),"board"==e.pane?void 0:Ai(e,"last","step-forward")])},Ai=function(e,t,n){return ri("button.lpv__controls__goto.lpv__controls__goto--".concat(t,".lpv__fbt.lpv__icon.lpv__icon-").concat(n),{class:{disabled:"board"==e.pane&&!e.canGoTo(t)},hook:ai((function(n){return function(e,t,n){for(var i=0,o=["touchstart","mousedown"];i<o.length;i++){var r=o[i];e.addEventListener(r,(function(e){t(e),e.preventDefault()}),{passive:!1})}}(n,(function(n){return function(e,t){var n=function(){e(),i=Math.max(100,i-i/15),o=setTimeout(n,i)},i=350,o=setTimeout(n,500);e();var r="touchstart"==t.type?"touchend":"mouseup";document.addEventListener(r,(function(){return clearTimeout(o)}),{once:!0})}((function(){return e.goTo(t)}),n)}))}))})},hi=function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},pi=function(e){return ri("div.lpv__side",ri("div.lpv__moves",{hook:{insert:function(t){var n=t.elm;e.path.empty()||ki(e,n),n.addEventListener("mousedown",(function(t){var n=t.target.getAttribute("p");n&&e.toPath(new Y(n))}),{passive:!0})},postpatch:function(t,n){e.autoScrollRequested&&(ki(e,n.elm),e.autoScrollRequested=!1)}}},hi(hi([],e.game.initial.comments.map(fi),!0),wi(e),!0)))},gi=function(){return ri("move.empty","...")},mi=function(e){return ri("index","".concat(e,"."))},fi=function(e){return ri("comment",e)},bi=function(e){return Math.floor((e.ply-1)/2)+1},wi=function(e){var t,n=Ii(e),i=[],o=e.game.moves.children.slice(1);for("black"==e.game.initial.pos.turn&&e.game.mainline[0]&&i.push(mi(e.game.initial.pos.fullmoves),gi());t=(t||e.game.moves).children[0];){var r=t.data,s=r.ply%2==1;s&&i.push(mi(bi(r))),i.push(n(r));var a=s&&(o.length||r.comments.length)&&t.children.length;a&&i.push(gi()),r.comments.forEach((function(e){return i.push(fi(e))})),o.forEach((function(e){return i.push(vi(n,e))})),a&&i.push(mi(bi(r)),gi()),o=t.children.slice(1)}return i},vi=function(e,t){return ri("variation",hi(hi([],t.data.startingComments.map(fi),!0),yi(e,t),!0))},yi=function(e,t){var n=[],i=[];t.data.ply%2==0&&n.push(ri("index",[bi(t.data),"..."]));do{var o=t.data;o.ply%2==1&&n.push(ri("index",[bi(o),"."])),n.push(e(o)),o.comments.forEach((function(e){return n.push(fi(e))})),i.forEach((function(t){n=hi(hi(hi(hi([],n,!0),[ri("paren.open","(")],!1),yi(e,t),!0),[ri("paren.close",")")],!1)})),i=t.children.slice(1),t=t.children[0]}while(t);return n},Ii=function(e){return function(t){return ri("move",{class:{current:e.path.equals(t.path),ancestor:e.path.contains(t.path),good:t.nags.includes(1),mistake:t.nags.includes(2),brilliant:t.nags.includes(3),blunder:t.nags.includes(4),interesting:t.nags.includes(5),inaccuracy:t.nags.includes(6)},attrs:{p:t.path.path}},t.san)}},ki=function(e,t){var n=t.querySelector(".current");t.scrollTop=n?n.offsetTop-t.offsetHeight/2+n.offsetHeight:e.path.empty()?0:99999};function Mi(e,t){var n="bottom"==t?e.orientation():u(e.orientation()),i=e.game.players[n],o=[i.title?ri("span.lpv__player__title",i.title):void 0,ri("span.lpv__player__name",i.name),i.rating?ri("span.lpv__player__rating",["(",i.rating,")"]):void 0];return ri("div.lpv__player.lpv__player--".concat(t),[i.isLichessUser?ri("a.lpv__player__person.ulpt.user-link",{attrs:{href:"".concat(e.opts.lichess,"/@/").concat(i.name)}},o):ri("span.lpv__player__person",o),e.opts.showClocks?xi(e,n):void 0])}var xi=function(e,t){var n=e.curData(),i=n.clocks&&n.clocks[t];return null==typeof i?void 0:ri("div.lpv__player__clock",{class:{active:t==n.turn}},Li(i))},Li=function(e){if(!e&&0!==e)return["-"];var t=new Date(1e3*e),n=Si(t.getUTCMinutes())+":"+Si(t.getUTCSeconds());return e>=3600?[Math.floor(e/3600)+":"+n]:[n]},Si=function(e){return(e<10?"0":"")+e},Bi=function(){return Bi=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Bi.apply(this,arguments)};function Ci(e){var t=e.opts,n="lpv.lpv--moves-".concat(t.showMoves,".lpv--controls-").concat(t.showControls).concat(t.classes?"."+t.classes.replace(" ","."):""),i="auto"==t.showPlayers?e.game.hasPlayerName():t.showPlayers;return ri("div.".concat(n),{class:{"lpv--menu":"board"!=e.pane,"lpv--players":i},attrs:{tabindex:0},hook:ai((function(t){e.setGround($n(t.querySelector(".cg-wrap"),Ri(e,t))),t.addEventListener("keydown",ci(e))}))},[i?Mi(e,"top"):void 0,Ei(e),i?Mi(e,"bottom"):void 0,t.showControls?di(e):void 0,t.showMoves?pi(e):void 0,"menu"==e.pane?li(e):"pgn"==e.pane?Ni(e):void 0])}var Ei=function(e){return ri("div.lpv__board",{hook:ai((function(t){var n,i;t.addEventListener("click",e.focus),e.opts.scrollToMove&&!("ontouchstart"in window)&&t.addEventListener("wheel",(n=function(t,n){t.preventDefault(),t.deltaY>0&&n?e.goTo("next",!1):t.deltaY<0&&n&&e.goTo("prev",!1)},i=0,function(e){i+=e.deltaY*(e.deltaMode?40:1),Math.abs(i)>=4?(n(e,!0),i=0):n(e,!1)}))}))},ri("div.cg-wrap"))},Ni=function(e){var t=new Blob([e.opts.pgn],{type:"text/plain"});return ri("div.lpv__pgn.lpv__pane",[ri("a.lpv__pgn__download.lpv__fbt",{attrs:{href:window.URL.createObjectURL(t),download:e.opts.menu.getPgn.fileName||"".concat(e.game.title(),".pgn")}},e.translate("download")),ri("textarea.lpv__pgn__text",e.opts.pgn)])},Ri=function(e,t){return Bi(Bi(Bi({viewOnly:!e.opts.drawArrows,addDimensionsCssVarsTo:t,drawable:{enabled:e.opts.drawArrows,visible:!0},disableContextMenu:e.opts.drawArrows},e.opts.chessground||{}),{movable:{free:!1},draggable:{enabled:!1},selectable:{enabled:!1}}),e.cgState())};function Di(e){if(ji(e)){for(;e&&ji(e);)e=Qi(e).parent;return null!=e?e:null}return e.parentNode}function ji(e){return 11===e.nodeType}function Qi(e,t){var n,i,o;const r=e;return null!==(n=r.parent)&&void 0!==n||(r.parent=null!=t?t:null),null!==(i=r.firstChildNode)&&void 0!==i||(r.firstChildNode=e.firstChild),null!==(o=r.lastChildNode)&&void 0!==o||(r.lastChildNode=e.lastChild),r}const Ti={createElement:function(e,t){return document.createElement(e,t)},createElementNS:function(e,t,n){return document.createElementNS(e,t,n)},createTextNode:function(e){return document.createTextNode(e)},createDocumentFragment:function(){return Qi(document.createDocumentFragment())},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){if(ji(e)){let t=e;for(;t&&ji(t);)t=Qi(t).parent;e=null!=t?t:e}ji(t)&&(t=Qi(t,e)),n&&ji(n)&&(n=Qi(n).firstChildNode),e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){ji(t)&&(t=Qi(t,e)),e.appendChild(t)},parentNode:Di,nextSibling:function(e){var t;if(ji(e)){const n=Qi(e),i=Di(n);if(i&&n.lastChildNode){const e=Array.from(i.childNodes),o=e.indexOf(n.lastChildNode);return null!==(t=e[o+1])&&void 0!==t?t:null}return null}return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},getTextContent:function(e){return e.textContent},isElement:function(e){return 1===e.nodeType},isText:function(e){return 3===e.nodeType},isComment:function(e){return 8===e.nodeType},isDocumentFragment:ji};function Pi(e){return void 0===e}function Gi(e){return void 0!==e}const Ui=ti("",{},[],void 0,void 0);function zi(e,t){var n,i;const o=e.key===t.key,r=(null===(n=e.data)||void 0===n?void 0:n.is)===(null===(i=t.data)||void 0===i?void 0:i.is),s=e.sel===t.sel,a=!(!e.sel&&e.sel===t.sel)||typeof e.text==typeof t.text;return s&&o&&r&&a}function Zi(){throw new Error("The document fragment is not supported on this platform.")}function Wi(e,t,n){var i;const o={};for(let r=t;r<=n;++r){const t=null===(i=e[r])||void 0===i?void 0:i.key;void 0!==t&&(o[t]=r)}return o}const Yi=["create","update","remove","destroy","pre","post"];function Oi(e,t,n){const i={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},o=void 0!==t?t:Ti;for(const t of Yi)for(const n of e){const e=n[t];void 0!==e&&i[t].push(e)}function r(e,t){return function(){if(0==--t){const t=o.parentNode(e);o.removeChild(t,e)}}}function s(e,t){var r,a,c,l;let u,d=e.data;if(void 0!==d){const t=null===(r=d.hook)||void 0===r?void 0:r.init;Gi(t)&&(t(e),d=e.data)}const A=e.children,h=e.sel;if("!"===h)Pi(e.text)&&(e.text=""),e.elm=o.createComment(e.text);else if(void 0!==h){const n=h.indexOf("#"),r=h.indexOf(".",n),c=n>0?n:h.length,l=r>0?r:h.length,p=-1!==n||-1!==r?h.slice(0,Math.min(c,l)):h,g=e.elm=Gi(d)&&Gi(u=d.ns)?o.createElementNS(u,p,d):o.createElement(p,d);for(c<l&&g.setAttribute("id",h.slice(c+1,l)),r>0&&g.setAttribute("class",h.slice(l+1).replace(/\./g," ")),u=0;u<i.create.length;++u)i.create[u](Ui,e);if(ni(A))for(u=0;u<A.length;++u){const e=A[u];null!=e&&o.appendChild(g,s(e,t))}else ii(e.text)&&o.appendChild(g,o.createTextNode(e.text));const m=e.data.hook;Gi(m)&&(null===(a=m.create)||void 0===a||a.call(m,Ui,e),m.insert&&t.push(e))}else if((null===(c=null==n?void 0:n.experimental)||void 0===c?void 0:c.fragments)&&e.children){for(e.elm=(null!==(l=o.createDocumentFragment)&&void 0!==l?l:Zi)(),u=0;u<i.create.length;++u)i.create[u](Ui,e);for(u=0;u<e.children.length;++u){const n=e.children[u];null!=n&&o.appendChild(e.elm,s(n,t))}}else e.elm=o.createTextNode(e.text);return e.elm}function a(e,t,n,i,r,a){for(;i<=r;++i){const r=n[i];null!=r&&o.insertBefore(e,s(r,a),t)}}function c(e){var t,n;const o=e.data;if(void 0!==o){null===(n=null===(t=null==o?void 0:o.hook)||void 0===t?void 0:t.destroy)||void 0===n||n.call(t,e);for(let t=0;t<i.destroy.length;++t)i.destroy[t](e);if(void 0!==e.children)for(let t=0;t<e.children.length;++t){const n=e.children[t];null!=n&&"string"!=typeof n&&c(n)}}}function l(e,t,n,s){for(var a,u;n<=s;++n){let s,d;const A=t[n];if(null!=A)if(Gi(A.sel)){c(A),s=i.remove.length+1,d=r(A.elm,s);for(let e=0;e<i.remove.length;++e)i.remove[e](A,d);const e=null===(u=null===(a=null==A?void 0:A.data)||void 0===a?void 0:a.hook)||void 0===u?void 0:u.remove;Gi(e)?e(A,d):d()}else A.children?(c(A),l(e,A.children,0,A.children.length-1)):o.removeChild(e,A.elm)}}function u(e,t,n){var r,c,d,A,h,p,g,m;const f=null===(r=t.data)||void 0===r?void 0:r.hook;null===(c=null==f?void 0:f.prepatch)||void 0===c||c.call(f,e,t);const b=t.elm=e.elm;if(e===t)return;if(void 0!==t.data||Gi(t.text)&&t.text!==e.text){null!==(d=t.data)&&void 0!==d||(t.data={}),null!==(A=e.data)&&void 0!==A||(e.data={});for(let n=0;n<i.update.length;++n)i.update[n](e,t);null===(g=null===(p=null===(h=t.data)||void 0===h?void 0:h.hook)||void 0===p?void 0:p.update)||void 0===g||g.call(p,e,t)}const w=e.children,v=t.children;Pi(t.text)?Gi(w)&&Gi(v)?w!==v&&function(e,t,n,i){let r,c,d,A,h=0,p=0,g=t.length-1,m=t[0],f=t[g],b=n.length-1,w=n[0],v=n[b];for(;h<=g&&p<=b;)null==m?m=t[++h]:null==f?f=t[--g]:null==w?w=n[++p]:null==v?v=n[--b]:zi(m,w)?(u(m,w,i),m=t[++h],w=n[++p]):zi(f,v)?(u(f,v,i),f=t[--g],v=n[--b]):zi(m,v)?(u(m,v,i),o.insertBefore(e,m.elm,o.nextSibling(f.elm)),m=t[++h],v=n[--b]):zi(f,w)?(u(f,w,i),o.insertBefore(e,f.elm,m.elm),f=t[--g],w=n[++p]):(void 0===r&&(r=Wi(t,h,g)),c=r[w.key],Pi(c)?o.insertBefore(e,s(w,i),m.elm):(d=t[c],d.sel!==w.sel?o.insertBefore(e,s(w,i),m.elm):(u(d,w,i),t[c]=void 0,o.insertBefore(e,d.elm,m.elm))),w=n[++p]);p<=b&&(A=null==n[b+1]?null:n[b+1].elm,a(e,A,n,p,b,i)),h<=g&&l(e,t,h,g)}(b,w,v,n):Gi(v)?(Gi(e.text)&&o.setTextContent(b,""),a(b,null,v,0,v.length-1,n)):Gi(w)?l(b,w,0,w.length-1):Gi(e.text)&&o.setTextContent(b,""):e.text!==t.text&&(Gi(w)&&l(b,w,0,w.length-1),o.setTextContent(b,t.text)),null===(m=null==f?void 0:f.postpatch)||void 0===m||m.call(f,e,t)}return function(e,t){let n,r,a;const c=[];for(n=0;n<i.pre.length;++n)i.pre[n]();for(function(e,t){return e.isElement(t)}(o,e)?e=function(e){const t=e.id?"#"+e.id:"",n=e.getAttribute("class"),i=n?"."+n.split(" ").join("."):"";return ti(o.tagName(e).toLowerCase()+t+i,{},[],void 0,e)}(e):function(e,t){return e.isDocumentFragment(t)}(o,e)&&(e=ti(void 0,{},[],void 0,e)),zi(e,t)?u(e,t,c):(r=e.elm,a=o.parentNode(r),s(t,c),null!==a&&(o.insertBefore(a,t.elm,o.nextSibling(r)),l(a,[e],0,0))),n=0;n<c.length;++n)c[n].data.hook.insert(c[n]);for(n=0;n<i.post.length;++n)i.post[n]();return t}}function _i(e,t){let n,i;const o=t.elm;let r=e.data.class,s=t.data.class;if((r||s)&&r!==s){for(i in r=r||{},s=s||{},r)r[i]&&!Object.prototype.hasOwnProperty.call(s,i)&&o.classList.remove(i);for(i in s)n=s[i],n!==r[i]&&o.classList[n?"add":"remove"](i)}}const Fi={create:_i,update:_i};function Hi(e,t){let n;const i=t.elm;let o=e.data.attrs,r=t.data.attrs;if((o||r)&&o!==r){for(n in o=o||{},r=r||{},r){const e=r[n];o[n]!==e&&(!0===e?i.setAttribute(n,""):!1===e?i.removeAttribute(n):120!==n.charCodeAt(0)?i.setAttribute(n,e):58===n.charCodeAt(3)?i.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,e):58===n.charCodeAt(5)?i.setAttributeNS("http://www.w3.org/1999/xlink",n,e):i.setAttribute(n,e))}for(n in o)n in r||i.removeAttribute(n)}}const Ki={create:Hi,update:Hi};var Vi=function(){return Vi=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Vi.apply(this,arguments)},Ji={pgn:"*",fen:void 0,showPlayers:"auto",showClocks:!0,showMoves:"auto",showControls:!0,scrollToMove:!0,orientation:void 0,initialPly:0,chessground:{},drawArrows:!0,menu:{getPgn:{enabled:!0,fileName:void 0}},lichess:"https://lichess.org",classes:void 0};function qi(e,t){var n=Vi({},Ji);return Xi(n,t),n.fen&&(n.pgn='[FEN "'.concat(n.fen,'"]\n').concat(n.pgn)),n.classes||(n.classes=e.className),n}function Xi(e,t){for(var n in t)void 0!==t[n]&&($i(e[n])&&$i(t[n])?Xi(e[n],t[n]):e[n]=t[n])}function $i(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function eo(e,t){var n=Oi([Fi,Ki]),i=qi(e,t),o=new wt(i,(function(){s=n(s,Ci(o))})),r=Ci(o);e.innerHTML="";var s=n(e,r);return o.div=s.elm,o}var to,no=function(){function e(e){this.config={viewOnly:!0,pgn:'[Event "Rated Blitz game"]\n    [Site "https://lichess.org/IMxmoURQ"]\n    [Date "2023.11.20"]\n    [White "nrv773"]\n    [Black "Aboodi916"]\n    [Result "0-1"]\n    [UTCDate "2023.11.20"]\n    [UTCTime "04:28:11"]\n    [Variant "Standard"]\n    [TimeControl "180+2"]\n    [ECO "A20"]\n    [Opening "English Opening: King\'s English Variation"]\n    [Termination "Normal"]\n    [Annotator "lichess.org"]\n\n    1. c4 e5 { A20 English Opening: King\'s English Variation } 2. g3 Bc5 3. Nc3 Nc6 4. Bg2 d6 5. a3 a6 6. b4 Ba7 7. e3 Rb8 8. Nge2 Bg4 9. O-O Qd7 10. d4 exd4 11. exd4 Nxd4 12. c5 Nxe2+ 13. Nxe2 Nf6 14. Re1 O-O 15. Qc2 dxc5 16. bxc5 Bh3 17. Rd1 Qc8 18. Bf3 b6 19. c6 b5 20. Rb1 Qe6 21. Nf4 Qc8 22. Nxh3 Qxh3 23. Bf4 Bb6 24. Rb4 Ng4 25. Bxg4 Qxg4 26. Bxc7 Qf5 27. Bxb8 Rxb8 28. c7 Rc8 29. Rd8+ Rxd8 30. cxd8=Q+ Bxd8 31. a4 Qxc2 { White resigns. } 0-1'},this.xxx={viewOnly:!0,pgn:'[Event "Rated Rapid game"]\n  [Site "https://lichess.org/eOXqcPAS"]\n  [Date "2023.11.20"]\n  [White "Integralis"]\n  [Black "nrv773"]\n  [Result "0-1"]\n  [UTCDate "2023.11.20"]\n  [UTCTime "20:48:54"]\n  [Variant "Standard"]\n  [TimeControl "900+10"]\n  [ECO "B10"]\n  [Opening "Caro-Kann Defense: Two Knights Attack"]\n  [Termination "Normal"]\n  [Annotator "lichess.org"]\n\n  1. e4 c6 2. Nf3 d5 3. Nc3 { B10 Caro-Kann Defense: Two Knights Attack } d4?! { (0.28 → 0.96) Inaccuracy. Bg4 was best. } (3... Bg4 4. h3 Bxf3 5. Qxf3 e6 6. Be2 Bc5 7. O-O Nd7 8. exd5) 4. Ne2 c5 5. c3 Nc6?! { (0.94 → 1.76) Inaccuracy. dxc3 was best. } (5... dxc3 6. Nxc3 a6 7. d4 cxd4 8. Qxd4 Qxd4 9. Nxd4 e6 10. Be3) 6. cxd4 cxd4 7. Ng3?? { (1.49 → -0.27) Blunder. Qa4 was best. } (7. Qa4 a6 8. Nexd4 Bd7 9. d3 Nf6 10. Nxc6 Bxc6 11. Qb3 e5) 7... e5 8. Bb5 Bd6 9. Qa4?! { (0.17 → -0.81) Inaccuracy. O-O was best. } (9. O-O a6 10. Ba4 b5 11. Bc2 Nf6 12. d3 O-O 13. Bd2 Bd7 14. a3 a5 15. Bb3 a4) 9... Ne7 10. d3 O-O 11. O-O a6 12. Bxc6 Nxc6 13. Nf5 b5?! { (-1.30 → -0.41) Inaccuracy. Bxf5 was best. } (13... Bxf5) 14. Qb3 Be6 15. Qd1 Bc7?! { (-0.36 → 0.28) Inaccuracy. Be7 was best. } (15... Be7) 16. a3?! { (0.28 → -0.76) Inaccuracy. Ng5 was best. } (16. Ng5 Qf6) 16... b4?! { (-0.76 → 0.19) Inaccuracy. f6 was best. } (16... f6) 17. Qc2?! { (0.19 → -0.58) Inaccuracy. Ng5 was best. } (17. Ng5 Qd7) 17... Ne7 18. Nxe7+ Qxe7 19. axb4 Rfc8 20. Qd2 Rcb8 21. Qe1?! { (-0.59 → -1.27) Inaccuracy. Qc2 was best. } (21. Qc2 Rxb4) 21... Qxb4 22. Bd2 Qxb2 23. Ba5 Bd6 24. Qc1?! { (-1.71 → -2.39) Inaccuracy. Ng5 was best. } (24. Ng5 Ba2 25. f4 exf4 26. Rf2 Qxa1 27. Qxa1 Rb1+ 28. Rf1 Rxa1 29. Rxa1 h6 30. e5 Be7) 24... Qxc1 25. Rfxc1 h6? { (-1.79 → -0.12) Mistake. Rc8 was best. } (25... Rc8 26. Nd2 h5 27. Kf1 Rab8 28. Rxc8+ Rxc8 29. Ke2 f6 30. Kd1 h4 31. h3 Rb8 32. Rc1) 26. Rc6 Bf8 27. Nxe5 Rb5 28. Bc7? { (0.00 → -1.15) Mistake. Nf3 was best. } (28. Nf3 Bc5 29. Kf1 Bd7 30. Rc7 Be6 31. Rc6) 28... a5 29. Nf3 a4?! { (-1.41 → -0.42) Inaccuracy. Rb4 was best. } (29... Rb4 30. Be5 Bd7 31. Rcc1 Bg4 32. Rab1 Rxb1 33. Rxb1 a4 34. h3 Bxf3 35. gxf3 Rd8 36. Bc7) 30. Nxd4 Rb4?! { (-0.70 → 0.10) Inaccuracy. Bd7 was best. } (30... Bd7) 31. Nxe6 fxe6 32. h3 a3 33. Rc3?? { (-0.11 → -1.93) Blunder. Be5 was best. } (33. Be5 Rb3) 33... a2 34. Rcc1 Rb2? { (-1.90 → -0.72) Mistake. Rc8 was best. } (34... Rc8 35. Rxa2) 35. Be5 Rd2 36. Kf1 Ba3 37. Rd1 Rc2?! { (-1.34 → -0.67) Inaccuracy. Rxd1+ was best. } (37... Rxd1+ 38. Rxd1) 38. Ke1?? { (-0.67 → -3.30) Blunder. Re1 was best. } (38. Re1) 38... Bb2?? { (-3.30 → 0.00) Blunder. Rf8 was best. } (38... Rf8 39. f4 g5 40. Kf1 gxf4 41. d4 f3 42. g4 Rfc8 43. d5 exd5 44. exd5 Bc5 45. d6) 39. Bxb2 Rxb2 40. Rdc1?? { (0.00 → -4.40) Blunder. Rd2 was best. } (40. Rd2 Rb1+ 41. Rd1 Rb2) 40... Kh7 41. g4?! { (-4.40 → -6.06) Inaccuracy. g3 was best. } (41. g3 Rf8 42. f4 Rfb8 43. Kf1 Rb1 44. Kf2 Rxc1 45. Rxc1 Rb1 46. Rxb1 axb1=R 47. h4 g5) 41... Kg6?! { (-6.06 → -4.42) Inaccuracy. Rf8 was best. } (41... Rf8 42. Kf1 Rfxf2+ 43. Kg1 Rg2+ 44. Kh1 Rg3 45. Rd1 Rxh3+ 46. Kg1 Rg3+ 47. Kh1 Rxg4 48. Re1) 42. f4 Kf6 43. Kd1 Rab8 44. Rc2 Rb1+ 45. Rc1 Rxa1 46. Rxa1 Rb1+ 47. Kc2 Rxa1 48. Kb2 Rh1 49. Kxa2 Rxh3 50. d4 Re3 51. d5?! { (-7.27 → -40.75) Inaccuracy. e5+ was best. } (51. e5+ Kf7 52. g5 hxg5 53. fxg5 Rxe5 54. dxe5 Kg6 55. Kb2 Kxg5 56. Kc2 Kf5 57. Kd3 Kxe5) 51... Rxe4 52. d6 Rxf4 53. d7 Rd4 54. d8=Q+ Rxd8 55. g5+ Kxg5 56. Kb3 e5 57. Kb4 e4 58. Kb5 e3 59. Kb6 e2 60. Kc7 Rd1 61. Kc6 e1=Q 62. Kb7 Qc3 63. Kb6 Rb1+ 64. Ka7 Qa3# { Black wins by checkmate. } 0-1'},console.log("BoardTate Constructed."),this.boardRoot=e,this.PgnViewer=eo(e,this.config),console.log(this.PgnViewer)}return e.prototype.changeOrientation=function(e){if("white"==e)this.PgnViewer.flipped=!1;else{if("black"!=e)throw Error("boardSide must be black or white");this.PgnViewer.flipped=!0}},e.prototype.setPGN=function(e){console.log("setPGN entered with pgn: !!!!!"+e.stringPgn),this.boardRoot.innerHTML="",this.PgnViewer=eo(this.boardRoot,this.xxx)},e}(),io=function(e){this.stringPgn=e},oo=function(e){this.stringFEN=e},ro=function(){function t(){}return t.saveRepToLocal=function(e,t){this.putLocal(e,t)},t.getRepertoireFromLocal=function(n){var i=t.getFromLocal(n);if(i instanceof e)return i;throw Error("Returned obj not a repertoire")},t.getFromLocal=function(e){var t=localStorage.getItem(e);if(null!=t)return JSON.parse(t);throw Error("Retried obj null")},t.putLocal=function(e,t){console.log("putLocal() entered. Key: "+e+"object: "+t);var n=JSON.stringify(t);console.log("strObject: "+n)},t}(),so=document.getElementById("editLine"),ao=document.getElementById("resetLines"),co=document.getElementById("resetGames"),lo=document.getElementById("saveBrowser"),uo=function(){function e(){console.log("EditRepertoireController constructed"),null==so||so.addEventListener("click",Ao),null==ao||ao.addEventListener("click",Ao),null==co||co.addEventListener("click",Ao),null==lo||lo.addEventListener("click",Ao),$("#fileInput").on("change",null,(function(e){var t=e.target;if(null==t.files)throw Error("addPGNBtn.files is null.");var n=t.files[0].name;console.log(n)})),to=this}return e.prototype.editLine=function(){console.log("EditLine entered"),window.open("AddPgn.html","mozillaWindow","width=500, height=400,popup")},e.prototype.resetLines=function(){},e.prototype.resetGames=function(){},e.prototype.saveToBrowser=function(){},e}();function Ao(e){if(e.target==so)console.log("Edit Line btn was the target"),to.editLine();else if(e.target==ao)console.log("reset Lines btn"),to.resetLines();else if(e.target==co)console.log("reset games btn"),to.resetGames();else{if(e.target!=lo)throw Error("event target was: "+e.target+" this is not one of the buttons.");console.log("save browser btn"),to.saveToBrowser()}}var ho=function(){function t(){this.boardSpot=document.getElementById("chessground"),this.repNameElement=document.getElementById("repName"),this.text_PGN="1. e4 e5 {A surprising move. I did not expect this from my opponent.} 2. Nf3 Nc6 3. Bb5 a6 {Here I was thinking about taking on c6, but eventually decided to preserve my bishop.} 4. Ba4 ({Usually, I play} 4.Bxc6) 4…Nf6 5. O-O Be7 6. Re1 b5 7. Bb3 d6 8. c3 O-O {etc.}",this.obj_pgn=new io(this.text_PGN),this.test_FENS=[new oo("rnbq1rk1/ppp2ppp/3p1n2/4p3/1bP1P3/2N3P1/PP1PNPBP/R1BQK2R b KQ - 1 6 "),new oo("r2q1rk1/pp2ppbp/1n3np1/3P4/P2P1N2/1QN5/1P3PPP/R1B1K2R b KQ - 2 13")],this.boardState=new no(this.boardSpot),$("#newRepTop").on("click",{controller:this},(function(e){console.log(e),e.data.controller.newRepertoire(),e.data.controller.editRepertoire()})),$("#openRepTop").on("click",{controller:this},(function(e){console.log("top btn open "+e),window.open("AddLine.html","mozillaWindow","width=320,height=320,popup")})),$("#editRepTop").on("click",{controller:this},(function(e){console.log("top btn edit "+e),e.data.controller.editRepertoire()}))}return t.prototype.setNameElement=function(e){console.log("set name element entered with name: "+e),this.repNameElement.innerText=e},t.prototype.getOpenRep=function(){if(null!=this.openRep)return this.openRep;throw Error("no open repertoire.")},t.prototype.newRepertoire=function(t){if($("#lineList").replaceWith("<div id='lineList'> </div>"),console.log("newRepertoire entered with name: "+t),null!=this.openRep&&null!=this.openRep&&confirm("Do you want to save the open repertoire to browser storage?")){if(null==this.openRep.name)throw new Error("newRepertoire: this.openRep.name undefined");ro.saveRepToLocal(this.openRep.name,this.openRep),console.log("Rep saved")}return null!=t?(this.openRep=new e(t),this.openRepName=t,this.setNameElement(this.openRepName)):this.openRep=new e,this.editRepertoire(),this.openRep},t.prototype.editRepertoire=function(){null!=this.editRepController&&null!=this.editRepController||(this.editRepController=new uo),Array.from(document.getElementsByClassName("editRep")).forEach((function(e){e.style.visibility="visible"}))},t.prototype.changeExampleGame=function(e){console.log("changeExampleGame() entered, with game: "+e.name+"with PGN: "+e.PGN.stringPgn),this.boardState.setPGN(e.PGN)},t.prototype.switchLine=function(e){console.log("switch line entered with line: "+e.name),console.log("switch line entered with line named: "+e.name),this.boardState.setPGN(e.pgn)},t}(),po=function(){function e(e,t,n){this.exampleGames=new Array,console.log("repertoire line with name: "+e+" constructed."),this.name=e,this.pgn=t,this.lineBtn=$("<button/>",{text:e,id:e,line:this}),this.lineBtn.addClass("repLine"),null!=n&&(this.exampleGames=n)}return e.prototype.resetGames=function(){0!=this.exampleGames.length&&confirm("reset games?")&&(this.exampleGames=new Array)},e.prototype.addGame=function(e){this.exampleGames.push(e)},e.prototype.getGames=function(){return this.exampleGames},e.prototype.updateGameDisplay=function(){console.log("updateGameDisplay() entered"),console.log("======================================="),$("#gameList").replaceWith("<div id='gameList'> </div>"),console.log("example Games List length: "+this.exampleGames.length),this.exampleGames.forEach((function(e){console.log("game added to gameList: "+e.name),e.gameBtn.appendTo($("#gameList")),e.gameBtn.on("click",{game:e},(function(t){console.log("game clicked with name: "+e.name),t.data.game.showGame(e)}))}))},e}(),go=function(){function e(e,t,n){console.log("Example Game constructed."),this.name=e,this.PGN=t,this.FEN=n,this.gameBtn=$("<button/>",{text:this.name,id:e}),this.gameBtn.addClass("repGame"),this.gameBtn.on("click",{game:this},(function(e){e.data.game.showGame(e.data.game)}))}return e.prototype.showGame=function(e){null==e?Ro.changeExampleGame(this):Ro.changeExampleGame(e)},e}(),mo=n(379),fo=n.n(mo),bo=n(795),wo=n.n(bo),vo=n(569),yo=n.n(vo),Io=n(565),ko=n.n(Io),Mo=n(216),xo=n.n(Mo),Lo=n(589),So=n.n(Lo),Bo=n(170),Co={};Co.styleTagTransform=So(),Co.setAttributes=ko(),Co.insert=yo().bind(null,"head"),Co.domAPI=wo(),Co.insertStyleElement=xo(),fo()(Bo.Z,Co),Bo.Z&&Bo.Z.locals&&Bo.Z.locals;var Eo=n(910),No={};No.styleTagTransform=So(),No.setAttributes=ko(),No.insert=yo().bind(null,"head"),No.domAPI=wo(),No.insertStyleElement=xo(),fo()(Eo.Z,No),Eo.Z&&Eo.Z.locals&&Eo.Z.locals;var Ro=new ho;document.addEventListener("DOMContentLoaded",(function(){console.log("loaded"),Ro.newRepertoire("the only");var e=Ro.getOpenRep(),t=new go("Game 1",new io("xxx"),new oo("rnbq1rk1/ppp2ppp/3p1n2/4p3/1bP1P3/2N3P1/PP1PNPBP/R1BQK2R b KQ - 1 6")),n=new go("Game 2",new io("XXX"),new oo("rnbqkbnr/pp1ppppp/8/2p5/4P3/5N2/PPPP1PPP/RNBQKB1R b KQkq - 1 2")),i=new po("Line 1",new io('"[Event "Rated Rapid game"]\n  [Site "https://lichess.org/eOXqcPAS"]\n  [Date "2023.11.20"]\n  [White "Integralis"]\n  [Black "nrv773"]\n  [Result "0-1"]\n  [UTCDate "2023.11.20"]\n  [UTCTime "20:48:54"]\n  [Variant "Standard"]\n  [TimeControl "900+10"]\n  [ECO "B10"]\n  [Opening "Caro-Kann Defense: Two Knights Attack"]\n  [Termination "Normal"]\n  [Annotator "lichess.org"]\n  \n  1. e4 c6 2. Nf3 d5 3. Nc3 { B10 Caro-Kann Defense: Two Knights Attack } d4?! { (0.28 → 0.96) Inaccuracy. Bg4 was best. } (3... Bg4 4. h3 Bxf3 5. Qxf3 e6 6. Be2 Bc5 7. O-O Nd7 8. exd5) 4. Ne2 c5 5. c3 Nc6?! { (0.94 → 1.76) Inaccuracy. dxc3 was best. } (5... dxc3 6. Nxc3 a6 7. d4 cxd4 8. Qxd4 Qxd4 9. Nxd4 e6 10. Be3) 6. cxd4 cxd4 7. Ng3?? { (1.49 → -0.27) Blunder. Qa4 was best. } (7. Qa4 a6 8. Nexd4 Bd7 9. d3 Nf6 10. Nxc6 Bxc6 11. Qb3 e5) 7... e5 8. Bb5 Bd6 9. Qa4?! { (0.17 → -0.81) Inaccuracy. O-O was best. } (9. O-O a6 10. Ba4 b5 11. Bc2 Nf6 12. d3 O-O 13. Bd2 Bd7 14. a3 a5 15. Bb3 a4) 9... Ne7 10. d3 O-O 11. O-O a6 12. Bxc6 Nxc6 13. Nf5 b5?! { (-1.30 → -0.41) Inaccuracy. Bxf5 was best. } (13... Bxf5) 14. Qb3 Be6 15. Qd1 Bc7?! { (-0.36 → 0.28) Inaccuracy. Be7 was best. } (15... Be7) 16. a3?! { (0.28 → -0.76) Inaccuracy. Ng5 was best. } (16. Ng5 Qf6) 16... b4?! { (-0.76 → 0.19) Inaccuracy. f6 was best. } (16... f6) 17. Qc2?! { (0.19 → -0.58) Inaccuracy. Ng5 was best. } (17. Ng5 Qd7) 17... Ne7 18. Nxe7+ Qxe7 19. axb4 Rfc8 20. Qd2 Rcb8 21. Qe1?! { (-0.59 → -1.27) Inaccuracy. Qc2 was best. } (21. Qc2 Rxb4) 21... Qxb4 22. Bd2 Qxb2 23. Ba5 Bd6 24. Qc1?! { (-1.71 → -2.39) Inaccuracy. Ng5 was best. } (24. Ng5 Ba2 25. f4 exf4 26. Rf2 Qxa1 27. Qxa1 Rb1+ 28. Rf1 Rxa1 29. Rxa1 h6 30. e5 Be7) 24... Qxc1 25. Rfxc1 h6? { (-1.79 → -0.12) Mistake. Rc8 was best. } (25... Rc8 26. Nd2 h5 27. Kf1 Rab8 28. Rxc8+ Rxc8 29. Ke2 f6 30. Kd1 h4 31. h3 Rb8 32. Rc1) 26. Rc6 Bf8 27. Nxe5 Rb5 28. Bc7? { (0.00 → -1.15) Mistake. Nf3 was best. } (28. Nf3 Bc5 29. Kf1 Bd7 30. Rc7 Be6 31. Rc6) 28... a5 29. Nf3 a4?! { (-1.41 → -0.42) Inaccuracy. Rb4 was best. } (29... Rb4 30. Be5 Bd7 31. Rcc1 Bg4 32. Rab1 Rxb1 33. Rxb1 a4 34. h3 Bxf3 35. gxf3 Rd8 36. Bc7) 30. Nxd4 Rb4?! { (-0.70 → 0.10) Inaccuracy. Bd7 was best. } (30... Bd7) 31. Nxe6 fxe6 32. h3 a3 33. Rc3?? { (-0.11 → -1.93) Blunder. Be5 was best. } (33. Be5 Rb3) 33... a2 34. Rcc1 Rb2? { (-1.90 → -0.72) Mistake. Rc8 was best. } (34... Rc8 35. Rxa2) 35. Be5 Rd2 36. Kf1 Ba3 37. Rd1 Rc2?! { (-1.34 → -0.67) Inaccuracy. Rxd1+ was best. } (37... Rxd1+ 38. Rxd1) 38. Ke1?? { (-0.67 → -3.30) Blunder. Re1 was best. } (38. Re1) 38... Bb2?? { (-3.30 → 0.00) Blunder. Rf8 was best. } (38... Rf8 39. f4 g5 40. Kf1 gxf4 41. d4 f3 42. g4 Rfc8 43. d5 exd5 44. exd5 Bc5 45. d6) 39. Bxb2 Rxb2 40. Rdc1?? { (0.00 → -4.40) Blunder. Rd2 was best. } (40. Rd2 Rb1+ 41. Rd1 Rb2) 40... Kh7 41. g4?! { (-4.40 → -6.06) Inaccuracy. g3 was best. } (41. g3 Rf8 42. f4 Rfb8 43. Kf1 Rb1 44. Kf2 Rxc1 45. Rxc1 Rb1 46. Rxb1 axb1=R 47. h4 g5) 41... Kg6?! { (-6.06 → -4.42) Inaccuracy. Rf8 was best. } (41... Rf8 42. Kf1 Rfxf2+ 43. Kg1 Rg2+ 44. Kh1 Rg3 45. Rd1 Rxh3+ 46. Kg1 Rg3+ 47. Kh1 Rxg4 48. Re1) 42. f4 Kf6 43. Kd1 Rab8 44. Rc2 Rb1+ 45. Rc1 Rxa1 46. Rxa1 Rb1+ 47. Kc2 Rxa1 48. Kb2 Rh1 49. Kxa2 Rxh3 50. d4 Re3 51. d5?! { (-7.27 → -40.75) Inaccuracy. e5+ was best. } (51. e5+ Kf7 52. g5 hxg5 53. fxg5 Rxe5 54. dxe5 Kg6 55. Kb2 Kxg5 56. Kc2 Kf5 57. Kd3 Kxe5) 51... Rxe4 52. d6 Rxf4 53. d7 Rd4 54. d8=Q+ Rxd8 55. g5+ Kxg5 56. Kb3 e5 57. Kb4 e4 58. Kb5 e3 59. Kb6 e2 60. Kc7 Rd1 61. Kc6 e1=Q 62. Kb7 Qc3 63. Kb6 Rb1+ 64. Ka7 Qa3# { Black wins by checkmate. } 0-1"')),o=new po("Line 2",new io(""));i.addGame(t),i.addGame(n),o.addGame(n),e.addLine(i),e.addLine(o),e.updateLineDisplay(),Ro.switchLine(i),Ro.changeExampleGame(t)}))})()})();